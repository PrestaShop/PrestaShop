{"version":3,"sources":["webpack:///theme.js","webpack:///webpack/bootstrap 5bfa92b19a8b0703b6b9","webpack:///./js/theme.js","webpack:///./js/setup-rivets.js","webpack:///./~/rivets/dist/rivets.js","webpack:///(webpack)/buildin/module.js","webpack:///./~/rivets/~/sightglass/index.js","webpack:///external \"$\"","webpack:///external \"prestashop\"","webpack:///./js/checkout.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_jquery","_jquery2","document","ready","show","hide","_rivets","_rivets2","_prestashop","_prestashop2","configure","prefix","templateDelimiters","formatters","propertyList","key","_results","push","customerAddress","address","customer","addresses","formatted","undefined","window","view","bind","prestashop","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","Rivets","bindMethod","unbindMethod","_ref","__bind","fn","me","apply","arguments","__slice","slice","__hasProp","hasOwnProperty","__extends","child","parent","ctor","this","constructor","prototype","__super__","__indexOf","indexOf","item","i","l","length","options","extensions","public","binders","components","adapters","rootInterface","preloadData","handler","context","ev","binding","models","descriptor","option","value","el","View","init","component","data","scope","createElement","innerHTML","template","initialize","jQuery","Util","bindEvent","event","unbindEvent","getInputValue","$el","attr","is","val","addEventListener","attachEvent","removeEventListener","detachEvent","o","_i","_len","type","checked","selected","TypeParser","types","primitive","keypath","parse","string","test","isNaN","Number","TextTemplateParser","text","delimiters","index","lastIndex","lastToken","substring","tokens","trim","els","k","v","_base","_j","_len1","_ref1","_ref2","_ref3","_ref4","_ref5","update","publish","sync","unbind","select","traverse","build","buildBinding","bindingRegExp","jquery","Array","concat","RegExp","node","declaration","ctx","dependencies","pipe","pipes","split","shift","bindings","_this","block","childNode","n","parser","token","nodeType","createTextNode","parentNode","insertBefore","removeChild","_k","_results1","childNodes","sort","a","b","binder","priority","attribute","attributes","identifier","regexp","nodeName","name","replace","toLowerCase","_bound","ComponentBinding","publishes","model","Binding","getValue","set","eventHandler","formattedValue","parseTarget","observe","setBinder","formatterObservers","args","exec","Function","routine","callback","sightglass","root","observer","target","ai","arg","fi","formatter","processedArgs","match","read","dependency","unobserve","reverse","setValue","_super","propertyName","locals","observers","upstreamObservers","camelCase","result","grouped","toUpperCase","_ref6","_ref7","bound","componentView","TextBinding","textContent","innerText","html","style","display","enabled","disabled","toString","unchecked","tagName","setAttribute","marker","join","getAttribute","createComment","removeAttribute","nested","nextSibling","unless","function","iterated","collection","modelName","previous","_len2","pop","cloneNode","elClass","className","counter","weakmap","weakReference","_name","Object","defineProperty","callbacks","cleanupWeakReference","ref","keys","pointers","stubFunction","map","original","r","response","observeMutations","functions","isArray","unobserveMutations","idx","splice","desc","getOwnPropertyDescriptor","get","enumerable","newValue","factory","_","rivets","webpackPolyfill","deprecate","paths","children","Observer","objectPath","isObject","realize","error","message","Error","tokenize","interfaces","chr","current","path","charAt","substr","prev","unreached","forEach","next","oldValue","adapter","active","action","$","setupRegularCheckout","hideSubmitButton","refreshPaymentOptions","params","serialize","post","then","resp","replaceWith","on","setupAdvancedCheckout","getSelectedPaymentOption","enableOrDisableOrderButton","each","checkbox","confirmPayment","submit"],"mappings":"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","file":"theme.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\t__webpack_require__(2);\n\t\n\t__webpack_require__(8);\n\t\n\tvar _jquery = __webpack_require__(6);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\t(0, _jquery2['default'])(document).ready(function () {\n\t    (0, _jquery2['default'])('.ps-shown-by-js').show();\n\t    (0, _jquery2['default'])('.ps-hidden-by-js').hide();\n\t});\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _rivets = __webpack_require__(3);\n\t\n\tvar _rivets2 = _interopRequireDefault(_rivets);\n\t\n\tvar _jquery = __webpack_require__(6);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _prestashop = __webpack_require__(7);\n\t\n\tvar _prestashop2 = _interopRequireDefault(_prestashop);\n\t\n\t_rivets2['default'].configure({\n\t  prefix: 'ps',\n\t  templateDelimiters: ['[[', ']]']\n\t});\n\t\n\t_rivets2['default'].formatters.propertyList = function (obj) {\n\t  var key, _results;\n\t  _results = [];\n\t  for (key in obj) {\n\t    _results.push(obj[key]);\n\t  }\n\t  return _results;\n\t};\n\t\n\t_rivets2['default'].formatters.customerAddress = function (obj) {\n\t  var address = _prestashop2['default'].customer.addresses[obj];\n\t  if (address) {\n\t    return address.formatted;\n\t  } else {\n\t    return undefined;\n\t  }\n\t};\n\t\n\t(0, _jquery2['default'])(document).ready(function () {\n\t  window.view = _rivets2['default'].bind((0, _jquery2['default'])('body'), {\n\t\n\t    prestashop: _prestashop2['default']\n\t\n\t  });\n\t});\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(module) {// Rivets.js\n\t// version: 0.8.1\n\t// author: Michael Richards\n\t// license: MIT\n\t'use strict';\n\t\n\t(function () {\n\t  var Rivets,\n\t      bindMethod,\n\t      unbindMethod,\n\t      _ref,\n\t      __bind = function __bind(fn, me) {\n\t    return function () {\n\t      return fn.apply(me, arguments);\n\t    };\n\t  },\n\t      __slice = [].slice,\n\t      __hasProp = ({}).hasOwnProperty,\n\t      __extends = function __extends(child, parent) {\n\t    for (var key in parent) {\n\t      if (__hasProp.call(parent, key)) child[key] = parent[key];\n\t    }function ctor() {\n\t      this.constructor = child;\n\t    }ctor.prototype = parent.prototype;child.prototype = new ctor();child.__super__ = parent.prototype;return child;\n\t  },\n\t      __indexOf = [].indexOf || function (item) {\n\t    for (var i = 0, l = this.length; i < l; i++) {\n\t      if (i in this && this[i] === item) return i;\n\t    }return -1;\n\t  };\n\t\n\t  Rivets = {\n\t    options: ['prefix', 'templateDelimiters', 'rootInterface', 'preloadData', 'handler'],\n\t    extensions: ['binders', 'formatters', 'components', 'adapters'],\n\t    \"public\": {\n\t      binders: {},\n\t      components: {},\n\t      formatters: {},\n\t      adapters: {},\n\t      prefix: 'rv',\n\t      templateDelimiters: ['{', '}'],\n\t      rootInterface: '.',\n\t      preloadData: true,\n\t      handler: function handler(context, ev, binding) {\n\t        return this.call(context, ev, binding.view.models);\n\t      },\n\t      configure: function configure(options) {\n\t        var descriptor, key, option, value;\n\t        if (options == null) {\n\t          options = {};\n\t        }\n\t        for (option in options) {\n\t          value = options[option];\n\t          if (option === 'binders' || option === 'components' || option === 'formatters' || option === 'adapters') {\n\t            for (key in value) {\n\t              descriptor = value[key];\n\t              Rivets[option][key] = descriptor;\n\t            }\n\t          } else {\n\t            Rivets[\"public\"][option] = value;\n\t          }\n\t        }\n\t      },\n\t      bind: function bind(el, models, options) {\n\t        var view;\n\t        if (models == null) {\n\t          models = {};\n\t        }\n\t        if (options == null) {\n\t          options = {};\n\t        }\n\t        view = new Rivets.View(el, models, options);\n\t        view.bind();\n\t        return view;\n\t      },\n\t      init: function init(component, el, data) {\n\t        var scope, view;\n\t        if (data == null) {\n\t          data = {};\n\t        }\n\t        if (el == null) {\n\t          el = document.createElement('div');\n\t        }\n\t        component = Rivets[\"public\"].components[component];\n\t        el.innerHTML = component.template.call(this, el);\n\t        scope = component.initialize.call(this, el, data);\n\t        view = new Rivets.View(el, scope);\n\t        view.bind();\n\t        return view;\n\t      }\n\t    }\n\t  };\n\t\n\t  if (window['jQuery'] || window['$']) {\n\t    _ref = 'on' in jQuery.prototype ? ['on', 'off'] : ['bind', 'unbind'], bindMethod = _ref[0], unbindMethod = _ref[1];\n\t    Rivets.Util = {\n\t      bindEvent: function bindEvent(el, event, handler) {\n\t        return jQuery(el)[bindMethod](event, handler);\n\t      },\n\t      unbindEvent: function unbindEvent(el, event, handler) {\n\t        return jQuery(el)[unbindMethod](event, handler);\n\t      },\n\t      getInputValue: function getInputValue(el) {\n\t        var $el;\n\t        $el = jQuery(el);\n\t        if ($el.attr('type') === 'checkbox') {\n\t          return $el.is(':checked');\n\t        } else {\n\t          return $el.val();\n\t        }\n\t      }\n\t    };\n\t  } else {\n\t    Rivets.Util = {\n\t      bindEvent: (function () {\n\t        if ('addEventListener' in window) {\n\t          return function (el, event, handler) {\n\t            return el.addEventListener(event, handler, false);\n\t          };\n\t        }\n\t        return function (el, event, handler) {\n\t          return el.attachEvent('on' + event, handler);\n\t        };\n\t      })(),\n\t      unbindEvent: (function () {\n\t        if ('removeEventListener' in window) {\n\t          return function (el, event, handler) {\n\t            return el.removeEventListener(event, handler, false);\n\t          };\n\t        }\n\t        return function (el, event, handler) {\n\t          return el.detachEvent('on' + event, handler);\n\t        };\n\t      })(),\n\t      getInputValue: function getInputValue(el) {\n\t        var o, _i, _len, _results;\n\t        if (el.type === 'checkbox') {\n\t          return el.checked;\n\t        } else if (el.type === 'select-multiple') {\n\t          _results = [];\n\t          for (_i = 0, _len = el.length; _i < _len; _i++) {\n\t            o = el[_i];\n\t            if (o.selected) {\n\t              _results.push(o.value);\n\t            }\n\t          }\n\t          return _results;\n\t        } else {\n\t          return el.value;\n\t        }\n\t      }\n\t    };\n\t  }\n\t\n\t  Rivets.TypeParser = (function () {\n\t    function TypeParser() {}\n\t\n\t    TypeParser.types = {\n\t      primitive: 0,\n\t      keypath: 1\n\t    };\n\t\n\t    TypeParser.parse = function (string) {\n\t      if (/^'.*'$|^\".*\"$/.test(string)) {\n\t        return {\n\t          type: this.types.primitive,\n\t          value: string.slice(1, -1)\n\t        };\n\t      } else if (string === 'true') {\n\t        return {\n\t          type: this.types.primitive,\n\t          value: true\n\t        };\n\t      } else if (string === 'false') {\n\t        return {\n\t          type: this.types.primitive,\n\t          value: false\n\t        };\n\t      } else if (string === 'null') {\n\t        return {\n\t          type: this.types.primitive,\n\t          value: null\n\t        };\n\t      } else if (string === 'undefined') {\n\t        return {\n\t          type: this.types.primitive,\n\t          value: void 0\n\t        };\n\t      } else if (isNaN(Number(string)) === false) {\n\t        return {\n\t          type: this.types.primitive,\n\t          value: Number(string)\n\t        };\n\t      } else {\n\t        return {\n\t          type: this.types.keypath,\n\t          value: string\n\t        };\n\t      }\n\t    };\n\t\n\t    return TypeParser;\n\t  })();\n\t\n\t  Rivets.TextTemplateParser = (function () {\n\t    function TextTemplateParser() {}\n\t\n\t    TextTemplateParser.types = {\n\t      text: 0,\n\t      binding: 1\n\t    };\n\t\n\t    TextTemplateParser.parse = function (template, delimiters) {\n\t      var index, lastIndex, lastToken, length, substring, tokens, value;\n\t      tokens = [];\n\t      length = template.length;\n\t      index = 0;\n\t      lastIndex = 0;\n\t      while (lastIndex < length) {\n\t        index = template.indexOf(delimiters[0], lastIndex);\n\t        if (index < 0) {\n\t          tokens.push({\n\t            type: this.types.text,\n\t            value: template.slice(lastIndex)\n\t          });\n\t          break;\n\t        } else {\n\t          if (index > 0 && lastIndex < index) {\n\t            tokens.push({\n\t              type: this.types.text,\n\t              value: template.slice(lastIndex, index)\n\t            });\n\t          }\n\t          lastIndex = index + delimiters[0].length;\n\t          index = template.indexOf(delimiters[1], lastIndex);\n\t          if (index < 0) {\n\t            substring = template.slice(lastIndex - delimiters[1].length);\n\t            lastToken = tokens[tokens.length - 1];\n\t            if ((lastToken != null ? lastToken.type : void 0) === this.types.text) {\n\t              lastToken.value += substring;\n\t            } else {\n\t              tokens.push({\n\t                type: this.types.text,\n\t                value: substring\n\t              });\n\t            }\n\t            break;\n\t          }\n\t          value = template.slice(lastIndex, index).trim();\n\t          tokens.push({\n\t            type: this.types.binding,\n\t            value: value\n\t          });\n\t          lastIndex = index + delimiters[1].length;\n\t        }\n\t      }\n\t      return tokens;\n\t    };\n\t\n\t    return TextTemplateParser;\n\t  })();\n\t\n\t  Rivets.View = (function () {\n\t    function View(els, models, options) {\n\t      var k, option, v, _base, _i, _j, _len, _len1, _ref1, _ref2, _ref3, _ref4, _ref5;\n\t      this.els = els;\n\t      this.models = models;\n\t      if (options == null) {\n\t        options = {};\n\t      }\n\t      this.update = __bind(this.update, this);\n\t      this.publish = __bind(this.publish, this);\n\t      this.sync = __bind(this.sync, this);\n\t      this.unbind = __bind(this.unbind, this);\n\t      this.bind = __bind(this.bind, this);\n\t      this.select = __bind(this.select, this);\n\t      this.traverse = __bind(this.traverse, this);\n\t      this.build = __bind(this.build, this);\n\t      this.buildBinding = __bind(this.buildBinding, this);\n\t      this.bindingRegExp = __bind(this.bindingRegExp, this);\n\t      this.options = __bind(this.options, this);\n\t      if (!(this.els.jquery || this.els instanceof Array)) {\n\t        this.els = [this.els];\n\t      }\n\t      _ref1 = Rivets.extensions;\n\t      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t        option = _ref1[_i];\n\t        this[option] = {};\n\t        if (options[option]) {\n\t          _ref2 = options[option];\n\t          for (k in _ref2) {\n\t            v = _ref2[k];\n\t            this[option][k] = v;\n\t          }\n\t        }\n\t        _ref3 = Rivets[\"public\"][option];\n\t        for (k in _ref3) {\n\t          v = _ref3[k];\n\t          if ((_base = this[option])[k] == null) {\n\t            _base[k] = v;\n\t          }\n\t        }\n\t      }\n\t      _ref4 = Rivets.options;\n\t      for (_j = 0, _len1 = _ref4.length; _j < _len1; _j++) {\n\t        option = _ref4[_j];\n\t        this[option] = (_ref5 = options[option]) != null ? _ref5 : Rivets[\"public\"][option];\n\t      }\n\t      this.build();\n\t    }\n\t\n\t    View.prototype.options = function () {\n\t      var option, options, _i, _len, _ref1;\n\t      options = {};\n\t      _ref1 = Rivets.extensions.concat(Rivets.options);\n\t      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t        option = _ref1[_i];\n\t        options[option] = this[option];\n\t      }\n\t      return options;\n\t    };\n\t\n\t    View.prototype.bindingRegExp = function () {\n\t      return new RegExp(\"^\" + this.prefix + \"-\");\n\t    };\n\t\n\t    View.prototype.buildBinding = function (binding, node, type, declaration) {\n\t      var context, ctx, dependencies, keypath, options, pipe, pipes;\n\t      options = {};\n\t      pipes = (function () {\n\t        var _i, _len, _ref1, _results;\n\t        _ref1 = declaration.split('|');\n\t        _results = [];\n\t        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t          pipe = _ref1[_i];\n\t          _results.push(pipe.trim());\n\t        }\n\t        return _results;\n\t      })();\n\t      context = (function () {\n\t        var _i, _len, _ref1, _results;\n\t        _ref1 = pipes.shift().split('<');\n\t        _results = [];\n\t        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t          ctx = _ref1[_i];\n\t          _results.push(ctx.trim());\n\t        }\n\t        return _results;\n\t      })();\n\t      keypath = context.shift();\n\t      options.formatters = pipes;\n\t      if (dependencies = context.shift()) {\n\t        options.dependencies = dependencies.split(/\\s+/);\n\t      }\n\t      return this.bindings.push(new Rivets[binding](this, node, type, keypath, options));\n\t    };\n\t\n\t    View.prototype.build = function () {\n\t      var el, parse, _i, _len, _ref1;\n\t      this.bindings = [];\n\t      parse = (function (_this) {\n\t        return function (node) {\n\t          var block, childNode, delimiters, n, parser, text, token, tokens, _i, _j, _len, _len1, _ref1, _results;\n\t          if (node.nodeType === 3) {\n\t            parser = Rivets.TextTemplateParser;\n\t            if (delimiters = _this.templateDelimiters) {\n\t              if ((tokens = parser.parse(node.data, delimiters)).length) {\n\t                if (!(tokens.length === 1 && tokens[0].type === parser.types.text)) {\n\t                  for (_i = 0, _len = tokens.length; _i < _len; _i++) {\n\t                    token = tokens[_i];\n\t                    text = document.createTextNode(token.value);\n\t                    node.parentNode.insertBefore(text, node);\n\t                    if (token.type === 1) {\n\t                      _this.buildBinding('TextBinding', text, null, token.value);\n\t                    }\n\t                  }\n\t                  node.parentNode.removeChild(node);\n\t                }\n\t              }\n\t            }\n\t          } else if (node.nodeType === 1) {\n\t            block = _this.traverse(node);\n\t          }\n\t          if (!block) {\n\t            _ref1 = (function () {\n\t              var _k, _len1, _ref1, _results1;\n\t              _ref1 = node.childNodes;\n\t              _results1 = [];\n\t              for (_k = 0, _len1 = _ref1.length; _k < _len1; _k++) {\n\t                n = _ref1[_k];\n\t                _results1.push(n);\n\t              }\n\t              return _results1;\n\t            })();\n\t            _results = [];\n\t            for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {\n\t              childNode = _ref1[_j];\n\t              _results.push(parse(childNode));\n\t            }\n\t            return _results;\n\t          }\n\t        };\n\t      })(this);\n\t      _ref1 = this.els;\n\t      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t        el = _ref1[_i];\n\t        parse(el);\n\t      }\n\t      this.bindings.sort(function (a, b) {\n\t        var _ref2, _ref3;\n\t        return (((_ref2 = b.binder) != null ? _ref2.priority : void 0) || 0) - (((_ref3 = a.binder) != null ? _ref3.priority : void 0) || 0);\n\t      });\n\t    };\n\t\n\t    View.prototype.traverse = function (node) {\n\t      var attribute, attributes, binder, bindingRegExp, block, identifier, regexp, type, value, _i, _j, _len, _len1, _ref1, _ref2, _ref3;\n\t      bindingRegExp = this.bindingRegExp();\n\t      block = node.nodeName === 'SCRIPT' || node.nodeName === 'STYLE';\n\t      _ref1 = node.attributes;\n\t      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t        attribute = _ref1[_i];\n\t        if (bindingRegExp.test(attribute.name)) {\n\t          type = attribute.name.replace(bindingRegExp, '');\n\t          if (!(binder = this.binders[type])) {\n\t            _ref2 = this.binders;\n\t            for (identifier in _ref2) {\n\t              value = _ref2[identifier];\n\t              if (identifier !== '*' && identifier.indexOf('*') !== -1) {\n\t                regexp = new RegExp(\"^\" + identifier.replace(/\\*/g, '.+') + \"$\");\n\t                if (regexp.test(type)) {\n\t                  binder = value;\n\t                }\n\t              }\n\t            }\n\t          }\n\t          binder || (binder = this.binders['*']);\n\t          if (binder.block) {\n\t            block = true;\n\t            attributes = [attribute];\n\t          }\n\t        }\n\t      }\n\t      _ref3 = attributes || node.attributes;\n\t      for (_j = 0, _len1 = _ref3.length; _j < _len1; _j++) {\n\t        attribute = _ref3[_j];\n\t        if (bindingRegExp.test(attribute.name)) {\n\t          type = attribute.name.replace(bindingRegExp, '');\n\t          this.buildBinding('Binding', node, type, attribute.value);\n\t        }\n\t      }\n\t      if (!block) {\n\t        type = node.nodeName.toLowerCase();\n\t        if (this.components[type] && !node._bound) {\n\t          this.bindings.push(new Rivets.ComponentBinding(this, node, type));\n\t          block = true;\n\t        }\n\t      }\n\t      return block;\n\t    };\n\t\n\t    View.prototype.select = function (fn) {\n\t      var binding, _i, _len, _ref1, _results;\n\t      _ref1 = this.bindings;\n\t      _results = [];\n\t      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t        binding = _ref1[_i];\n\t        if (fn(binding)) {\n\t          _results.push(binding);\n\t        }\n\t      }\n\t      return _results;\n\t    };\n\t\n\t    View.prototype.bind = function () {\n\t      var binding, _i, _len, _ref1, _results;\n\t      _ref1 = this.bindings;\n\t      _results = [];\n\t      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t        binding = _ref1[_i];\n\t        _results.push(binding.bind());\n\t      }\n\t      return _results;\n\t    };\n\t\n\t    View.prototype.unbind = function () {\n\t      var binding, _i, _len, _ref1, _results;\n\t      _ref1 = this.bindings;\n\t      _results = [];\n\t      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t        binding = _ref1[_i];\n\t        _results.push(binding.unbind());\n\t      }\n\t      return _results;\n\t    };\n\t\n\t    View.prototype.sync = function () {\n\t      var binding, _i, _len, _ref1, _results;\n\t      _ref1 = this.bindings;\n\t      _results = [];\n\t      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t        binding = _ref1[_i];\n\t        _results.push(typeof binding.sync === \"function\" ? binding.sync() : void 0);\n\t      }\n\t      return _results;\n\t    };\n\t\n\t    View.prototype.publish = function () {\n\t      var binding, _i, _len, _ref1, _results;\n\t      _ref1 = this.select(function (b) {\n\t        var _ref1;\n\t        return (_ref1 = b.binder) != null ? _ref1.publishes : void 0;\n\t      });\n\t      _results = [];\n\t      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t        binding = _ref1[_i];\n\t        _results.push(binding.publish());\n\t      }\n\t      return _results;\n\t    };\n\t\n\t    View.prototype.update = function (models) {\n\t      var binding, key, model, _i, _len, _ref1, _results;\n\t      if (models == null) {\n\t        models = {};\n\t      }\n\t      for (key in models) {\n\t        model = models[key];\n\t        this.models[key] = model;\n\t      }\n\t      _ref1 = this.bindings;\n\t      _results = [];\n\t      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t        binding = _ref1[_i];\n\t        _results.push(typeof binding.update === \"function\" ? binding.update(models) : void 0);\n\t      }\n\t      return _results;\n\t    };\n\t\n\t    return View;\n\t  })();\n\t\n\t  Rivets.Binding = (function () {\n\t    function Binding(view, el, type, keypath, options) {\n\t      this.view = view;\n\t      this.el = el;\n\t      this.type = type;\n\t      this.keypath = keypath;\n\t      this.options = options != null ? options : {};\n\t      this.getValue = __bind(this.getValue, this);\n\t      this.update = __bind(this.update, this);\n\t      this.unbind = __bind(this.unbind, this);\n\t      this.bind = __bind(this.bind, this);\n\t      this.publish = __bind(this.publish, this);\n\t      this.sync = __bind(this.sync, this);\n\t      this.set = __bind(this.set, this);\n\t      this.eventHandler = __bind(this.eventHandler, this);\n\t      this.formattedValue = __bind(this.formattedValue, this);\n\t      this.parseTarget = __bind(this.parseTarget, this);\n\t      this.observe = __bind(this.observe, this);\n\t      this.setBinder = __bind(this.setBinder, this);\n\t      this.formatters = this.options.formatters || [];\n\t      this.dependencies = [];\n\t      this.formatterObservers = {};\n\t      this.model = void 0;\n\t      this.setBinder();\n\t    }\n\t\n\t    Binding.prototype.setBinder = function () {\n\t      var identifier, regexp, value, _ref1;\n\t      if (!(this.binder = this.view.binders[this.type])) {\n\t        _ref1 = this.view.binders;\n\t        for (identifier in _ref1) {\n\t          value = _ref1[identifier];\n\t          if (identifier !== '*' && identifier.indexOf('*') !== -1) {\n\t            regexp = new RegExp(\"^\" + identifier.replace(/\\*/g, '.+') + \"$\");\n\t            if (regexp.test(this.type)) {\n\t              this.binder = value;\n\t              this.args = new RegExp(\"^\" + identifier.replace(/\\*/g, '(.+)') + \"$\").exec(this.type);\n\t              this.args.shift();\n\t            }\n\t          }\n\t        }\n\t      }\n\t      this.binder || (this.binder = this.view.binders['*']);\n\t      if (this.binder instanceof Function) {\n\t        return this.binder = {\n\t          routine: this.binder\n\t        };\n\t      }\n\t    };\n\t\n\t    Binding.prototype.observe = function (obj, keypath, callback) {\n\t      return Rivets.sightglass(obj, keypath, callback, {\n\t        root: this.view.rootInterface,\n\t        adapters: this.view.adapters\n\t      });\n\t    };\n\t\n\t    Binding.prototype.parseTarget = function () {\n\t      var token;\n\t      token = Rivets.TypeParser.parse(this.keypath);\n\t      if (token.type === 0) {\n\t        return this.value = token.value;\n\t      } else {\n\t        this.observer = this.observe(this.view.models, this.keypath, this.sync);\n\t        return this.model = this.observer.target;\n\t      }\n\t    };\n\t\n\t    Binding.prototype.formattedValue = function (value) {\n\t      var ai, arg, args, fi, formatter, id, observer, processedArgs, _base, _i, _j, _len, _len1, _ref1;\n\t      _ref1 = this.formatters;\n\t      for (fi = _i = 0, _len = _ref1.length; _i < _len; fi = ++_i) {\n\t        formatter = _ref1[fi];\n\t        args = formatter.match(/[^\\s']+|'([^']|'[^\\s])*'|\"([^\"]|\"[^\\s])*\"/g);\n\t        id = args.shift();\n\t        formatter = this.view.formatters[id];\n\t        args = (function () {\n\t          var _j, _len1, _results;\n\t          _results = [];\n\t          for (_j = 0, _len1 = args.length; _j < _len1; _j++) {\n\t            arg = args[_j];\n\t            _results.push(Rivets.TypeParser.parse(arg));\n\t          }\n\t          return _results;\n\t        })();\n\t        processedArgs = [];\n\t        for (ai = _j = 0, _len1 = args.length; _j < _len1; ai = ++_j) {\n\t          arg = args[ai];\n\t          processedArgs.push(arg.type === 0 ? arg.value : ((_base = this.formatterObservers)[fi] || (_base[fi] = {}), !(observer = this.formatterObservers[fi][ai]) ? (observer = this.observe(this.view.models, arg.value, this.sync), this.formatterObservers[fi][ai] = observer) : void 0, observer.value()));\n\t        }\n\t        if ((formatter != null ? formatter.read : void 0) instanceof Function) {\n\t          value = formatter.read.apply(formatter, [value].concat(__slice.call(processedArgs)));\n\t        } else if (formatter instanceof Function) {\n\t          value = formatter.apply(null, [value].concat(__slice.call(processedArgs)));\n\t        }\n\t      }\n\t      return value;\n\t    };\n\t\n\t    Binding.prototype.eventHandler = function (fn) {\n\t      var binding, handler;\n\t      handler = (binding = this).view.handler;\n\t      return function (ev) {\n\t        return handler.call(fn, this, ev, binding);\n\t      };\n\t    };\n\t\n\t    Binding.prototype.set = function (value) {\n\t      var _ref1;\n\t      value = value instanceof Function && !this.binder[\"function\"] ? this.formattedValue(value.call(this.model)) : this.formattedValue(value);\n\t      return (_ref1 = this.binder.routine) != null ? _ref1.call(this, this.el, value) : void 0;\n\t    };\n\t\n\t    Binding.prototype.sync = function () {\n\t      var dependency, observer;\n\t      return this.set((function () {\n\t        var _i, _j, _len, _len1, _ref1, _ref2, _ref3;\n\t        if (this.observer) {\n\t          if (this.model !== this.observer.target) {\n\t            _ref1 = this.dependencies;\n\t            for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t              observer = _ref1[_i];\n\t              observer.unobserve();\n\t            }\n\t            this.dependencies = [];\n\t            if ((this.model = this.observer.target) != null && ((_ref2 = this.options.dependencies) != null ? _ref2.length : void 0)) {\n\t              _ref3 = this.options.dependencies;\n\t              for (_j = 0, _len1 = _ref3.length; _j < _len1; _j++) {\n\t                dependency = _ref3[_j];\n\t                observer = this.observe(this.model, dependency, this.sync);\n\t                this.dependencies.push(observer);\n\t              }\n\t            }\n\t          }\n\t          return this.observer.value();\n\t        } else {\n\t          return this.value;\n\t        }\n\t      }).call(this));\n\t    };\n\t\n\t    Binding.prototype.publish = function () {\n\t      var args, formatter, id, value, _i, _len, _ref1, _ref2, _ref3;\n\t      if (this.observer) {\n\t        value = this.getValue(this.el);\n\t        _ref1 = this.formatters.slice(0).reverse();\n\t        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t          formatter = _ref1[_i];\n\t          args = formatter.split(/\\s+/);\n\t          id = args.shift();\n\t          if ((_ref2 = this.view.formatters[id]) != null ? _ref2.publish : void 0) {\n\t            value = (_ref3 = this.view.formatters[id]).publish.apply(_ref3, [value].concat(__slice.call(args)));\n\t          }\n\t        }\n\t        return this.observer.setValue(value);\n\t      }\n\t    };\n\t\n\t    Binding.prototype.bind = function () {\n\t      var dependency, observer, _i, _len, _ref1, _ref2, _ref3;\n\t      this.parseTarget();\n\t      if ((_ref1 = this.binder.bind) != null) {\n\t        _ref1.call(this, this.el);\n\t      }\n\t      if (this.model != null && ((_ref2 = this.options.dependencies) != null ? _ref2.length : void 0)) {\n\t        _ref3 = this.options.dependencies;\n\t        for (_i = 0, _len = _ref3.length; _i < _len; _i++) {\n\t          dependency = _ref3[_i];\n\t          observer = this.observe(this.model, dependency, this.sync);\n\t          this.dependencies.push(observer);\n\t        }\n\t      }\n\t      if (this.view.preloadData) {\n\t        return this.sync();\n\t      }\n\t    };\n\t\n\t    Binding.prototype.unbind = function () {\n\t      var ai, args, fi, observer, _i, _len, _ref1, _ref2, _ref3, _ref4;\n\t      if ((_ref1 = this.binder.unbind) != null) {\n\t        _ref1.call(this, this.el);\n\t      }\n\t      if ((_ref2 = this.observer) != null) {\n\t        _ref2.unobserve();\n\t      }\n\t      _ref3 = this.dependencies;\n\t      for (_i = 0, _len = _ref3.length; _i < _len; _i++) {\n\t        observer = _ref3[_i];\n\t        observer.unobserve();\n\t      }\n\t      this.dependencies = [];\n\t      _ref4 = this.formatterObservers;\n\t      for (fi in _ref4) {\n\t        args = _ref4[fi];\n\t        for (ai in args) {\n\t          observer = args[ai];\n\t          observer.unobserve();\n\t        }\n\t      }\n\t      return this.formatterObservers = {};\n\t    };\n\t\n\t    Binding.prototype.update = function (models) {\n\t      var _ref1, _ref2;\n\t      if (models == null) {\n\t        models = {};\n\t      }\n\t      this.model = (_ref1 = this.observer) != null ? _ref1.target : void 0;\n\t      return (_ref2 = this.binder.update) != null ? _ref2.call(this, models) : void 0;\n\t    };\n\t\n\t    Binding.prototype.getValue = function (el) {\n\t      if (this.binder && this.binder.getValue != null) {\n\t        return this.binder.getValue.call(this, el);\n\t      } else {\n\t        return Rivets.Util.getInputValue(el);\n\t      }\n\t    };\n\t\n\t    return Binding;\n\t  })();\n\t\n\t  Rivets.ComponentBinding = (function (_super) {\n\t    __extends(ComponentBinding, _super);\n\t\n\t    function ComponentBinding(view, el, type) {\n\t      var attribute, bindingRegExp, propertyName, _i, _len, _ref1, _ref2;\n\t      this.view = view;\n\t      this.el = el;\n\t      this.type = type;\n\t      this.unbind = __bind(this.unbind, this);\n\t      this.bind = __bind(this.bind, this);\n\t      this.locals = __bind(this.locals, this);\n\t      this.component = this.view.components[this.type];\n\t      this[\"static\"] = {};\n\t      this.observers = {};\n\t      this.upstreamObservers = {};\n\t      bindingRegExp = view.bindingRegExp();\n\t      _ref1 = this.el.attributes || [];\n\t      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t        attribute = _ref1[_i];\n\t        if (!bindingRegExp.test(attribute.name)) {\n\t          propertyName = this.camelCase(attribute.name);\n\t          if (__indexOf.call((_ref2 = this.component[\"static\"]) != null ? _ref2 : [], propertyName) >= 0) {\n\t            this[\"static\"][propertyName] = attribute.value;\n\t          } else {\n\t            this.observers[propertyName] = attribute.value;\n\t          }\n\t        }\n\t      }\n\t    }\n\t\n\t    ComponentBinding.prototype.sync = function () {};\n\t\n\t    ComponentBinding.prototype.update = function () {};\n\t\n\t    ComponentBinding.prototype.publish = function () {};\n\t\n\t    ComponentBinding.prototype.locals = function () {\n\t      var key, observer, result, value, _ref1, _ref2;\n\t      result = {};\n\t      _ref1 = this[\"static\"];\n\t      for (key in _ref1) {\n\t        value = _ref1[key];\n\t        result[key] = value;\n\t      }\n\t      _ref2 = this.observers;\n\t      for (key in _ref2) {\n\t        observer = _ref2[key];\n\t        result[key] = observer.value();\n\t      }\n\t      return result;\n\t    };\n\t\n\t    ComponentBinding.prototype.camelCase = function (string) {\n\t      return string.replace(/-([a-z])/g, function (grouped) {\n\t        return grouped[1].toUpperCase();\n\t      });\n\t    };\n\t\n\t    ComponentBinding.prototype.bind = function () {\n\t      var k, key, keypath, observer, option, options, scope, v, _base, _i, _j, _len, _len1, _ref1, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _results;\n\t      if (!this.bound) {\n\t        _ref1 = this.observers;\n\t        for (key in _ref1) {\n\t          keypath = _ref1[key];\n\t          this.observers[key] = this.observe(this.view.models, keypath, (function (_this) {\n\t            return function (key) {\n\t              return function () {\n\t                return _this.componentView.models[key] = _this.observers[key].value();\n\t              };\n\t            };\n\t          })(this).call(this, key));\n\t        }\n\t        this.bound = true;\n\t      }\n\t      if (this.componentView != null) {\n\t        return this.componentView.bind();\n\t      } else {\n\t        this.el.innerHTML = this.component.template.call(this);\n\t        scope = this.component.initialize.call(this, this.el, this.locals());\n\t        this.el._bound = true;\n\t        options = {};\n\t        _ref2 = Rivets.extensions;\n\t        for (_i = 0, _len = _ref2.length; _i < _len; _i++) {\n\t          option = _ref2[_i];\n\t          options[option] = {};\n\t          if (this.component[option]) {\n\t            _ref3 = this.component[option];\n\t            for (k in _ref3) {\n\t              v = _ref3[k];\n\t              options[option][k] = v;\n\t            }\n\t          }\n\t          _ref4 = this.view[option];\n\t          for (k in _ref4) {\n\t            v = _ref4[k];\n\t            if ((_base = options[option])[k] == null) {\n\t              _base[k] = v;\n\t            }\n\t          }\n\t        }\n\t        _ref5 = Rivets.options;\n\t        for (_j = 0, _len1 = _ref5.length; _j < _len1; _j++) {\n\t          option = _ref5[_j];\n\t          options[option] = (_ref6 = this.component[option]) != null ? _ref6 : this.view[option];\n\t        }\n\t        this.componentView = new Rivets.View(this.el, scope, options);\n\t        this.componentView.bind();\n\t        _ref7 = this.observers;\n\t        _results = [];\n\t        for (key in _ref7) {\n\t          observer = _ref7[key];\n\t          _results.push(this.upstreamObservers[key] = this.observe(this.componentView.models, key, (function (_this) {\n\t            return function (key, observer) {\n\t              return function () {\n\t                return observer.setValue(_this.componentView.models[key]);\n\t              };\n\t            };\n\t          })(this).call(this, key, observer)));\n\t        }\n\t        return _results;\n\t      }\n\t    };\n\t\n\t    ComponentBinding.prototype.unbind = function () {\n\t      var key, observer, _ref1, _ref2, _ref3;\n\t      _ref1 = this.upstreamObservers;\n\t      for (key in _ref1) {\n\t        observer = _ref1[key];\n\t        observer.unobserve();\n\t      }\n\t      _ref2 = this.observers;\n\t      for (key in _ref2) {\n\t        observer = _ref2[key];\n\t        observer.unobserve();\n\t      }\n\t      return (_ref3 = this.componentView) != null ? _ref3.unbind.call(this) : void 0;\n\t    };\n\t\n\t    return ComponentBinding;\n\t  })(Rivets.Binding);\n\t\n\t  Rivets.TextBinding = (function (_super) {\n\t    __extends(TextBinding, _super);\n\t\n\t    function TextBinding(view, el, type, keypath, options) {\n\t      this.view = view;\n\t      this.el = el;\n\t      this.type = type;\n\t      this.keypath = keypath;\n\t      this.options = options != null ? options : {};\n\t      this.sync = __bind(this.sync, this);\n\t      this.formatters = this.options.formatters || [];\n\t      this.dependencies = [];\n\t      this.formatterObservers = {};\n\t    }\n\t\n\t    TextBinding.prototype.binder = {\n\t      routine: function routine(node, value) {\n\t        return node.data = value != null ? value : '';\n\t      }\n\t    };\n\t\n\t    TextBinding.prototype.sync = function () {\n\t      return TextBinding.__super__.sync.apply(this, arguments);\n\t    };\n\t\n\t    return TextBinding;\n\t  })(Rivets.Binding);\n\t\n\t  Rivets[\"public\"].binders.text = function (el, value) {\n\t    if (el.textContent != null) {\n\t      return el.textContent = value != null ? value : '';\n\t    } else {\n\t      return el.innerText = value != null ? value : '';\n\t    }\n\t  };\n\t\n\t  Rivets[\"public\"].binders.html = function (el, value) {\n\t    return el.innerHTML = value != null ? value : '';\n\t  };\n\t\n\t  Rivets[\"public\"].binders.show = function (el, value) {\n\t    return el.style.display = value ? '' : 'none';\n\t  };\n\t\n\t  Rivets[\"public\"].binders.hide = function (el, value) {\n\t    return el.style.display = value ? 'none' : '';\n\t  };\n\t\n\t  Rivets[\"public\"].binders.enabled = function (el, value) {\n\t    return el.disabled = !value;\n\t  };\n\t\n\t  Rivets[\"public\"].binders.disabled = function (el, value) {\n\t    return el.disabled = !!value;\n\t  };\n\t\n\t  Rivets[\"public\"].binders.checked = {\n\t    publishes: true,\n\t    priority: 2000,\n\t    bind: function bind(el) {\n\t      return Rivets.Util.bindEvent(el, 'change', this.publish);\n\t    },\n\t    unbind: function unbind(el) {\n\t      return Rivets.Util.unbindEvent(el, 'change', this.publish);\n\t    },\n\t    routine: function routine(el, value) {\n\t      var _ref1;\n\t      if (el.type === 'radio') {\n\t        return el.checked = ((_ref1 = el.value) != null ? _ref1.toString() : void 0) === (value != null ? value.toString() : void 0);\n\t      } else {\n\t        return el.checked = !!value;\n\t      }\n\t    }\n\t  };\n\t\n\t  Rivets[\"public\"].binders.unchecked = {\n\t    publishes: true,\n\t    priority: 2000,\n\t    bind: function bind(el) {\n\t      return Rivets.Util.bindEvent(el, 'change', this.publish);\n\t    },\n\t    unbind: function unbind(el) {\n\t      return Rivets.Util.unbindEvent(el, 'change', this.publish);\n\t    },\n\t    routine: function routine(el, value) {\n\t      var _ref1;\n\t      if (el.type === 'radio') {\n\t        return el.checked = ((_ref1 = el.value) != null ? _ref1.toString() : void 0) !== (value != null ? value.toString() : void 0);\n\t      } else {\n\t        return el.checked = !value;\n\t      }\n\t    }\n\t  };\n\t\n\t  Rivets[\"public\"].binders.value = {\n\t    publishes: true,\n\t    priority: 3000,\n\t    bind: function bind(el) {\n\t      if (!(el.tagName === 'INPUT' && el.type === 'radio')) {\n\t        this.event = el.tagName === 'SELECT' ? 'change' : 'input';\n\t        return Rivets.Util.bindEvent(el, this.event, this.publish);\n\t      }\n\t    },\n\t    unbind: function unbind(el) {\n\t      if (!(el.tagName === 'INPUT' && el.type === 'radio')) {\n\t        return Rivets.Util.unbindEvent(el, this.event, this.publish);\n\t      }\n\t    },\n\t    routine: function routine(el, value) {\n\t      var o, _i, _len, _ref1, _ref2, _ref3, _results;\n\t      if (el.tagName === 'INPUT' && el.type === 'radio') {\n\t        return el.setAttribute('value', value);\n\t      } else if (window.jQuery != null) {\n\t        el = jQuery(el);\n\t        if ((value != null ? value.toString() : void 0) !== ((_ref1 = el.val()) != null ? _ref1.toString() : void 0)) {\n\t          return el.val(value != null ? value : '');\n\t        }\n\t      } else {\n\t        if (el.type === 'select-multiple') {\n\t          if (value != null) {\n\t            _results = [];\n\t            for (_i = 0, _len = el.length; _i < _len; _i++) {\n\t              o = el[_i];\n\t              _results.push(o.selected = (_ref2 = o.value, __indexOf.call(value, _ref2) >= 0));\n\t            }\n\t            return _results;\n\t          }\n\t        } else if ((value != null ? value.toString() : void 0) !== ((_ref3 = el.value) != null ? _ref3.toString() : void 0)) {\n\t          return el.value = value != null ? value : '';\n\t        }\n\t      }\n\t    }\n\t  };\n\t\n\t  Rivets[\"public\"].binders[\"if\"] = {\n\t    block: true,\n\t    priority: 4000,\n\t    bind: function bind(el) {\n\t      var attr, declaration;\n\t      if (this.marker == null) {\n\t        attr = [this.view.prefix, this.type].join('-').replace('--', '-');\n\t        declaration = el.getAttribute(attr);\n\t        this.marker = document.createComment(\" rivets: \" + this.type + \" \" + declaration + \" \");\n\t        this.bound = false;\n\t        el.removeAttribute(attr);\n\t        el.parentNode.insertBefore(this.marker, el);\n\t        return el.parentNode.removeChild(el);\n\t      }\n\t    },\n\t    unbind: function unbind() {\n\t      var _ref1;\n\t      return (_ref1 = this.nested) != null ? _ref1.unbind() : void 0;\n\t    },\n\t    routine: function routine(el, value) {\n\t      var key, model, models, _ref1;\n\t      if (!!value === !this.bound) {\n\t        if (value) {\n\t          models = {};\n\t          _ref1 = this.view.models;\n\t          for (key in _ref1) {\n\t            model = _ref1[key];\n\t            models[key] = model;\n\t          }\n\t          (this.nested || (this.nested = new Rivets.View(el, models, this.view.options()))).bind();\n\t          this.marker.parentNode.insertBefore(el, this.marker.nextSibling);\n\t          return this.bound = true;\n\t        } else {\n\t          el.parentNode.removeChild(el);\n\t          this.nested.unbind();\n\t          return this.bound = false;\n\t        }\n\t      }\n\t    },\n\t    update: function update(models) {\n\t      var _ref1;\n\t      return (_ref1 = this.nested) != null ? _ref1.update(models) : void 0;\n\t    }\n\t  };\n\t\n\t  Rivets[\"public\"].binders.unless = {\n\t    block: true,\n\t    priority: 4000,\n\t    bind: function bind(el) {\n\t      return Rivets[\"public\"].binders[\"if\"].bind.call(this, el);\n\t    },\n\t    unbind: function unbind() {\n\t      return Rivets[\"public\"].binders[\"if\"].unbind.call(this);\n\t    },\n\t    routine: function routine(el, value) {\n\t      return Rivets[\"public\"].binders[\"if\"].routine.call(this, el, !value);\n\t    },\n\t    update: function update(models) {\n\t      return Rivets[\"public\"].binders[\"if\"].update.call(this, models);\n\t    }\n\t  };\n\t\n\t  Rivets[\"public\"].binders['on-*'] = {\n\t    \"function\": true,\n\t    priority: 1000,\n\t    unbind: function unbind(el) {\n\t      if (this.handler) {\n\t        return Rivets.Util.unbindEvent(el, this.args[0], this.handler);\n\t      }\n\t    },\n\t    routine: function routine(el, value) {\n\t      if (this.handler) {\n\t        Rivets.Util.unbindEvent(el, this.args[0], this.handler);\n\t      }\n\t      return Rivets.Util.bindEvent(el, this.args[0], this.handler = this.eventHandler(value));\n\t    }\n\t  };\n\t\n\t  Rivets[\"public\"].binders['each-*'] = {\n\t    block: true,\n\t    priority: 4000,\n\t    bind: function bind(el) {\n\t      var attr, view, _i, _len, _ref1;\n\t      if (this.marker == null) {\n\t        attr = [this.view.prefix, this.type].join('-').replace('--', '-');\n\t        this.marker = document.createComment(\" rivets: \" + this.type + \" \");\n\t        this.iterated = [];\n\t        el.removeAttribute(attr);\n\t        el.parentNode.insertBefore(this.marker, el);\n\t        el.parentNode.removeChild(el);\n\t      } else {\n\t        _ref1 = this.iterated;\n\t        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t          view = _ref1[_i];\n\t          view.bind();\n\t        }\n\t      }\n\t    },\n\t    unbind: function unbind(el) {\n\t      var view, _i, _len, _ref1, _results;\n\t      if (this.iterated != null) {\n\t        _ref1 = this.iterated;\n\t        _results = [];\n\t        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t          view = _ref1[_i];\n\t          _results.push(view.unbind());\n\t        }\n\t        return _results;\n\t      }\n\t    },\n\t    routine: function routine(el, collection) {\n\t      var binding, data, i, index, key, model, modelName, options, previous, template, view, _i, _j, _k, _len, _len1, _len2, _ref1, _ref2, _ref3, _results;\n\t      modelName = this.args[0];\n\t      collection = collection || [];\n\t      if (this.iterated.length > collection.length) {\n\t        _ref1 = Array(this.iterated.length - collection.length);\n\t        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t          i = _ref1[_i];\n\t          view = this.iterated.pop();\n\t          view.unbind();\n\t          this.marker.parentNode.removeChild(view.els[0]);\n\t        }\n\t      }\n\t      for (index = _j = 0, _len1 = collection.length; _j < _len1; index = ++_j) {\n\t        model = collection[index];\n\t        data = {\n\t          index: index\n\t        };\n\t        data[modelName] = model;\n\t        if (this.iterated[index] == null) {\n\t          _ref2 = this.view.models;\n\t          for (key in _ref2) {\n\t            model = _ref2[key];\n\t            if (data[key] == null) {\n\t              data[key] = model;\n\t            }\n\t          }\n\t          previous = this.iterated.length ? this.iterated[this.iterated.length - 1].els[0] : this.marker;\n\t          options = this.view.options();\n\t          options.preloadData = true;\n\t          template = el.cloneNode(true);\n\t          view = new Rivets.View(template, data, options);\n\t          view.bind();\n\t          this.iterated.push(view);\n\t          this.marker.parentNode.insertBefore(template, previous.nextSibling);\n\t        } else if (this.iterated[index].models[modelName] !== model) {\n\t          this.iterated[index].update(data);\n\t        }\n\t      }\n\t      if (el.nodeName === 'OPTION') {\n\t        _ref3 = this.view.bindings;\n\t        _results = [];\n\t        for (_k = 0, _len2 = _ref3.length; _k < _len2; _k++) {\n\t          binding = _ref3[_k];\n\t          if (binding.el === this.marker.parentNode && binding.type === 'value') {\n\t            _results.push(binding.sync());\n\t          } else {\n\t            _results.push(void 0);\n\t          }\n\t        }\n\t        return _results;\n\t      }\n\t    },\n\t    update: function update(models) {\n\t      var data, key, model, view, _i, _len, _ref1, _results;\n\t      data = {};\n\t      for (key in models) {\n\t        model = models[key];\n\t        if (key !== this.args[0]) {\n\t          data[key] = model;\n\t        }\n\t      }\n\t      _ref1 = this.iterated;\n\t      _results = [];\n\t      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t        view = _ref1[_i];\n\t        _results.push(view.update(data));\n\t      }\n\t      return _results;\n\t    }\n\t  };\n\t\n\t  Rivets[\"public\"].binders['class-*'] = function (el, value) {\n\t    var elClass;\n\t    elClass = \" \" + el.className + \" \";\n\t    if (!value === (elClass.indexOf(\" \" + this.args[0] + \" \") !== -1)) {\n\t      return el.className = value ? \"\" + el.className + \" \" + this.args[0] : elClass.replace(\" \" + this.args[0] + \" \", ' ').trim();\n\t    }\n\t  };\n\t\n\t  Rivets[\"public\"].binders['*'] = function (el, value) {\n\t    if (value != null) {\n\t      return el.setAttribute(this.type, value);\n\t    } else {\n\t      return el.removeAttribute(this.type);\n\t    }\n\t  };\n\t\n\t  Rivets[\"public\"].adapters['.'] = {\n\t    id: '_rv',\n\t    counter: 0,\n\t    weakmap: {},\n\t    weakReference: function weakReference(obj) {\n\t      var id, _base, _name;\n\t      if (!obj.hasOwnProperty(this.id)) {\n\t        id = this.counter++;\n\t        Object.defineProperty(obj, this.id, {\n\t          value: id\n\t        });\n\t      }\n\t      return (_base = this.weakmap)[_name = obj[this.id]] || (_base[_name] = {\n\t        callbacks: {}\n\t      });\n\t    },\n\t    cleanupWeakReference: function cleanupWeakReference(ref, id) {\n\t      if (!Object.keys(ref.callbacks).length) {\n\t        if (!(ref.pointers && Object.keys(ref.pointers).length)) {\n\t          return delete this.weakmap[id];\n\t        }\n\t      }\n\t    },\n\t    stubFunction: function stubFunction(obj, fn) {\n\t      var map, original, weakmap;\n\t      original = obj[fn];\n\t      map = this.weakReference(obj);\n\t      weakmap = this.weakmap;\n\t      return obj[fn] = function () {\n\t        var callback, k, r, response, _i, _len, _ref1, _ref2, _ref3, _ref4;\n\t        response = original.apply(obj, arguments);\n\t        _ref1 = map.pointers;\n\t        for (r in _ref1) {\n\t          k = _ref1[r];\n\t          _ref4 = (_ref2 = (_ref3 = weakmap[r]) != null ? _ref3.callbacks[k] : void 0) != null ? _ref2 : [];\n\t          for (_i = 0, _len = _ref4.length; _i < _len; _i++) {\n\t            callback = _ref4[_i];\n\t            callback();\n\t          }\n\t        }\n\t        return response;\n\t      };\n\t    },\n\t    observeMutations: function observeMutations(obj, ref, keypath) {\n\t      var fn, functions, map, _base, _i, _len;\n\t      if (Array.isArray(obj)) {\n\t        map = this.weakReference(obj);\n\t        if (map.pointers == null) {\n\t          map.pointers = {};\n\t          functions = ['push', 'pop', 'shift', 'unshift', 'sort', 'reverse', 'splice'];\n\t          for (_i = 0, _len = functions.length; _i < _len; _i++) {\n\t            fn = functions[_i];\n\t            this.stubFunction(obj, fn);\n\t          }\n\t        }\n\t        if ((_base = map.pointers)[ref] == null) {\n\t          _base[ref] = [];\n\t        }\n\t        if (__indexOf.call(map.pointers[ref], keypath) < 0) {\n\t          return map.pointers[ref].push(keypath);\n\t        }\n\t      }\n\t    },\n\t    unobserveMutations: function unobserveMutations(obj, ref, keypath) {\n\t      var idx, map, pointers;\n\t      if (Array.isArray(obj) && obj[this.id] != null) {\n\t        if (map = this.weakmap[obj[this.id]]) {\n\t          if (pointers = map.pointers[ref]) {\n\t            if ((idx = pointers.indexOf(keypath)) >= 0) {\n\t              pointers.splice(idx, 1);\n\t            }\n\t            if (!pointers.length) {\n\t              delete map.pointers[ref];\n\t            }\n\t            return this.cleanupWeakReference(map, obj[this.id]);\n\t          }\n\t        }\n\t      }\n\t    },\n\t    observe: function observe(obj, keypath, callback) {\n\t      var callbacks, desc, value;\n\t      callbacks = this.weakReference(obj).callbacks;\n\t      if (callbacks[keypath] == null) {\n\t        callbacks[keypath] = [];\n\t        desc = Object.getOwnPropertyDescriptor(obj, keypath);\n\t        if (!((desc != null ? desc.get : void 0) || (desc != null ? desc.set : void 0))) {\n\t          value = obj[keypath];\n\t          Object.defineProperty(obj, keypath, {\n\t            enumerable: true,\n\t            get: function get() {\n\t              return value;\n\t            },\n\t            set: (function (_this) {\n\t              return function (newValue) {\n\t                var map, _i, _len, _ref1;\n\t                if (newValue !== value) {\n\t                  _this.unobserveMutations(value, obj[_this.id], keypath);\n\t                  value = newValue;\n\t                  if (map = _this.weakmap[obj[_this.id]]) {\n\t                    callbacks = map.callbacks;\n\t                    if (callbacks[keypath]) {\n\t                      _ref1 = callbacks[keypath].slice();\n\t                      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t                        callback = _ref1[_i];\n\t                        if (__indexOf.call(callbacks[keypath], callback) >= 0) {\n\t                          callback();\n\t                        }\n\t                      }\n\t                    }\n\t                    return _this.observeMutations(newValue, obj[_this.id], keypath);\n\t                  }\n\t                }\n\t              };\n\t            })(this)\n\t          });\n\t        }\n\t      }\n\t      if (__indexOf.call(callbacks[keypath], callback) < 0) {\n\t        callbacks[keypath].push(callback);\n\t      }\n\t      return this.observeMutations(obj[keypath], obj[this.id], keypath);\n\t    },\n\t    unobserve: function unobserve(obj, keypath, callback) {\n\t      var callbacks, idx, map;\n\t      if (map = this.weakmap[obj[this.id]]) {\n\t        if (callbacks = map.callbacks[keypath]) {\n\t          if ((idx = callbacks.indexOf(callback)) >= 0) {\n\t            callbacks.splice(idx, 1);\n\t            if (!callbacks.length) {\n\t              delete map.callbacks[keypath];\n\t            }\n\t          }\n\t          this.unobserveMutations(obj[keypath], obj[this.id], keypath);\n\t          return this.cleanupWeakReference(map, obj[this.id]);\n\t        }\n\t      }\n\t    },\n\t    get: function get(obj, keypath) {\n\t      return obj[keypath];\n\t    },\n\t    set: function set(obj, keypath, value) {\n\t      return obj[keypath] = value;\n\t    }\n\t  };\n\t\n\t  Rivets.factory = function (sightglass) {\n\t    Rivets.sightglass = sightglass;\n\t    Rivets[\"public\"]._ = Rivets;\n\t    return Rivets[\"public\"];\n\t  };\n\t\n\t  if (typeof (typeof module !== \"undefined\" && module !== null ? module.exports : void 0) === 'object') {\n\t    module.exports = Rivets.factory(__webpack_require__(5));\n\t  } else if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (sightglass) {\n\t      return this.rivets = Rivets.factory(sightglass);\n\t    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else {\n\t    this.rivets = Rivets.factory(sightglass);\n\t  }\n\t}).call(undefined);\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(4)(module)))\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (module) {\n\t\tif (!module.webpackPolyfill) {\n\t\t\tmodule.deprecate = function () {};\n\t\t\tmodule.paths = [];\n\t\t\t// module.parent = undefined by default\n\t\t\tmodule.children = [];\n\t\t\tmodule.webpackPolyfill = 1;\n\t\t}\n\t\treturn module;\n\t};\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\t\n\t(function () {\n\t  // Public sightglass interface.\n\t  function sightglass(obj, keypath, callback, options) {\n\t    return new Observer(obj, keypath, callback, options);\n\t  }\n\t\n\t  // Batteries not included.\n\t  sightglass.adapters = {};\n\t\n\t  // Constructs a new keypath observer and kicks things off.\n\t  function Observer(obj, keypath, callback, options) {\n\t    this.options = options || {};\n\t    this.options.adapters = this.options.adapters || {};\n\t    this.obj = obj;\n\t    this.keypath = keypath;\n\t    this.callback = callback;\n\t    this.objectPath = [];\n\t    this.parse();\n\t\n\t    if (isObject(this.target = this.realize())) {\n\t      this.set(true, this.key, this.target, this.callback);\n\t    }\n\t  }\n\t\n\t  // Tokenizes the provided keypath string into interface + path tokens for the\n\t  // observer to work with.\n\t  Observer.tokenize = function (keypath, interfaces, root) {\n\t    var tokens = [];\n\t    var current = { i: root, path: '' };\n\t    var index, chr;\n\t\n\t    for (index = 0; index < keypath.length; index++) {\n\t      chr = keypath.charAt(index);\n\t\n\t      if (!! ~interfaces.indexOf(chr)) {\n\t        tokens.push(current);\n\t        current = { i: chr, path: '' };\n\t      } else {\n\t        current.path += chr;\n\t      }\n\t    }\n\t\n\t    tokens.push(current);\n\t    return tokens;\n\t  };\n\t\n\t  // Parses the keypath using the interfaces defined on the view. Sets variables\n\t  // for the tokenized keypath as well as the end key.\n\t  Observer.prototype.parse = function () {\n\t    var interfaces = this.interfaces();\n\t    var root, path;\n\t\n\t    if (!interfaces.length) {\n\t      error('Must define at least one adapter interface.');\n\t    }\n\t\n\t    if (!! ~interfaces.indexOf(this.keypath[0])) {\n\t      root = this.keypath[0];\n\t      path = this.keypath.substr(1);\n\t    } else {\n\t      if (typeof (root = this.options.root || sightglass.root) === 'undefined') {\n\t        error('Must define a default root adapter.');\n\t      }\n\t\n\t      path = this.keypath;\n\t    }\n\t\n\t    this.tokens = Observer.tokenize(path, interfaces, root);\n\t    this.key = this.tokens.pop();\n\t  };\n\t\n\t  // Realizes the full keypath, attaching observers for every key and correcting\n\t  // old observers to any changed objects in the keypath.\n\t  Observer.prototype.realize = function () {\n\t    var current = this.obj;\n\t    var unreached = false;\n\t    var prev;\n\t\n\t    this.tokens.forEach(function (token, index) {\n\t      if (isObject(current)) {\n\t        if (typeof this.objectPath[index] !== 'undefined') {\n\t          if (current !== (prev = this.objectPath[index])) {\n\t            this.set(false, token, prev, this.update.bind(this));\n\t            this.set(true, token, current, this.update.bind(this));\n\t            this.objectPath[index] = current;\n\t          }\n\t        } else {\n\t          this.set(true, token, current, this.update.bind(this));\n\t          this.objectPath[index] = current;\n\t        }\n\t\n\t        current = this.get(token, current);\n\t      } else {\n\t        if (unreached === false) {\n\t          unreached = index;\n\t        }\n\t\n\t        if (prev = this.objectPath[index]) {\n\t          this.set(false, token, prev, this.update.bind(this));\n\t        }\n\t      }\n\t    }, this);\n\t\n\t    if (unreached !== false) {\n\t      this.objectPath.splice(unreached);\n\t    }\n\t\n\t    return current;\n\t  };\n\t\n\t  // Updates the keypath. This is called when any intermediary key is changed.\n\t  Observer.prototype.update = function () {\n\t    var next, oldValue;\n\t\n\t    if ((next = this.realize()) !== this.target) {\n\t      if (isObject(this.target)) {\n\t        this.set(false, this.key, this.target, this.callback);\n\t      }\n\t\n\t      if (isObject(next)) {\n\t        this.set(true, this.key, next, this.callback);\n\t      }\n\t\n\t      oldValue = this.value();\n\t      this.target = next;\n\t\n\t      if (this.value() !== oldValue) this.callback();\n\t    }\n\t  };\n\t\n\t  // Reads the current end value of the observed keypath. Returns undefined if\n\t  // the full keypath is unreachable.\n\t  Observer.prototype.value = function () {\n\t    if (isObject(this.target)) {\n\t      return this.get(this.key, this.target);\n\t    }\n\t  };\n\t\n\t  // Sets the current end value of the observed keypath. Calling setValue when\n\t  // the full keypath is unreachable is a no-op.\n\t  Observer.prototype.setValue = function (value) {\n\t    if (isObject(this.target)) {\n\t      this.adapter(this.key).set(this.target, this.key.path, value);\n\t    }\n\t  };\n\t\n\t  // Gets the provided key on an object.\n\t  Observer.prototype.get = function (key, obj) {\n\t    return this.adapter(key).get(obj, key.path);\n\t  };\n\t\n\t  // Observes or unobserves a callback on the object using the provided key.\n\t  Observer.prototype.set = function (active, key, obj, callback) {\n\t    var action = active ? 'observe' : 'unobserve';\n\t    this.adapter(key)[action](obj, key.path, callback);\n\t  };\n\t\n\t  // Returns an array of all unique adapter interfaces available.\n\t  Observer.prototype.interfaces = function () {\n\t    var interfaces = Object.keys(this.options.adapters);\n\t\n\t    Object.keys(sightglass.adapters).forEach(function (i) {\n\t      if (! ~interfaces.indexOf(i)) {\n\t        interfaces.push(i);\n\t      }\n\t    });\n\t\n\t    return interfaces;\n\t  };\n\t\n\t  // Convenience function to grab the adapter for a specific key.\n\t  Observer.prototype.adapter = function (key) {\n\t    return this.options.adapters[key.i] || sightglass.adapters[key.i];\n\t  };\n\t\n\t  // Unobserves the entire keypath.\n\t  Observer.prototype.unobserve = function () {\n\t    var obj;\n\t\n\t    this.tokens.forEach(function (token, index) {\n\t      if (obj = this.objectPath[index]) {\n\t        this.set(false, token, obj, this.update.bind(this));\n\t      }\n\t    }, this);\n\t\n\t    if (isObject(this.target)) {\n\t      this.set(false, this.key, this.target, this.callback);\n\t    }\n\t  };\n\t\n\t  // Check if a value is an object than can be observed.\n\t  function isObject(obj) {\n\t    return typeof obj === 'object' && obj !== null;\n\t  }\n\t\n\t  // Error thrower.\n\t  function error(message) {\n\t    throw new Error('[sightglass] ' + message);\n\t  }\n\t\n\t  // Export module for Node and the browser.\n\t  if (typeof module !== 'undefined' && module.exports) {\n\t    module.exports = sightglass;\n\t  } else if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function () {\n\t      return this.sightglass = sightglass;\n\t    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else {\n\t    this.sightglass = sightglass;\n\t  }\n\t}).call(undefined);\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\tmodule.exports = $;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\tmodule.exports = prestashop;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _jquery = __webpack_require__(6);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tfunction setupRegularCheckout() {\n\t  function hideSubmitButton() {\n\t    (0, _jquery2['default'])('#conditions-to-approve button').hide();\n\t  }\n\t\n\t  function refreshPaymentOptions() {\n\t    var params = (0, _jquery2['default'])('#conditions-to-approve').serialize() + '&action=getPaymentOptions';\n\t    _jquery2['default'].post('', params).then(function (resp) {\n\t      (0, _jquery2['default'])('#payment-options').replaceWith(resp);\n\t      hideSubmitButton();\n\t    });\n\t  }\n\t\n\t  hideSubmitButton();\n\t  (0, _jquery2['default'])('body').on('change', '#conditions-to-approve input[type=\"checkbox\"]', refreshPaymentOptions);\n\t}\n\t\n\tfunction setupAdvancedCheckout() {\n\t  function getSelectedPaymentOption() {\n\t    return (0, _jquery2['default'])('#payment-options input[name=\"advanced-payment-option\"]:checked').attr('id');\n\t  }\n\t\n\t  function enableOrDisableOrderButton() {\n\t    var show = true;\n\t    (0, _jquery2['default'])('#conditions-to-approve input[type=\"checkbox\"]').each(function (_, checkbox) {\n\t      if (!checkbox.checked) {\n\t        show = false;\n\t      }\n\t    });\n\t\n\t    if (!getSelectedPaymentOption()) {\n\t      show = false;\n\t    }\n\t\n\t    (0, _jquery2['default'])('#payment-confirmation button').attr('disabled', !show);\n\t  }\n\t\n\t  function confirmPayment() {\n\t    var option = getSelectedPaymentOption();\n\t    if (option) {\n\t      (0, _jquery2['default'])('#pay-with-' + option + '-form').submit();\n\t    }\n\t  }\n\t\n\t  (0, _jquery2['default'])('#payment-confirmation button').on('click', function () {\n\t    confirmPayment();\n\t  });\n\t\n\t  (0, _jquery2['default'])('#payment-options input[type=\"checkbox\"][disabled]').attr('disabled', false);\n\t  (0, _jquery2['default'])('body').on('change', '#conditions-to-approve input[type=\"checkbox\"]', enableOrDisableOrderButton);\n\t  (0, _jquery2['default'])('body').on('change', 'input[name=\"advanced-payment-option\"]', enableOrDisableOrderButton);\n\t}\n\t\n\t(0, _jquery2['default'])(document).ready(function setupCheckoutScripts() {\n\t  if ((0, _jquery2['default'])('#payment-options').data('uses-advanced-payment-api')) {\n\t    setupAdvancedCheckout();\n\t  } else {\n\t    setupRegularCheckout();\n\t  }\n\t});\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** theme.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 5bfa92b19a8b0703b6b9\n **/","import './setup-rivets';\nimport './checkout';\n\nimport $ from 'jquery';\n\n$(document).ready(() => {\n    $('.ps-shown-by-js').show();\n    $('.ps-hidden-by-js').hide();\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/theme.js\n **/","import rivets from 'rivets';\nimport $ from 'jquery';\nimport prestashop from 'prestashop';\n\nrivets.configure({\n  prefix: 'ps',\n  templateDelimiters: ['[[', ']]'],\n});\n\nrivets.formatters.propertyList = function(obj) {\n  var key, _results;\n  _results = [];\n  for (key in obj) {\n    _results.push(\n      obj[key]\n    );\n  }\n  return _results;\n};\n\nrivets.formatters.customerAddress = function(obj) {\n  var address = prestashop.customer.addresses[obj];\n  if (address) {\n    return address.formatted;\n  } else {\n    return undefined;\n  }\n};\n\n$(document).ready(function(){\n  window.view = rivets.bind($('body'),{\n\n    prestashop:prestashop,\n\n  });\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/setup-rivets.js\n **/","// Rivets.js\n// version: 0.8.1\n// author: Michael Richards\n// license: MIT\n(function() {\n  var Rivets, bindMethod, unbindMethod, _ref,\n    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    __slice = [].slice,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  Rivets = {\n    options: ['prefix', 'templateDelimiters', 'rootInterface', 'preloadData', 'handler'],\n    extensions: ['binders', 'formatters', 'components', 'adapters'],\n    \"public\": {\n      binders: {},\n      components: {},\n      formatters: {},\n      adapters: {},\n      prefix: 'rv',\n      templateDelimiters: ['{', '}'],\n      rootInterface: '.',\n      preloadData: true,\n      handler: function(context, ev, binding) {\n        return this.call(context, ev, binding.view.models);\n      },\n      configure: function(options) {\n        var descriptor, key, option, value;\n        if (options == null) {\n          options = {};\n        }\n        for (option in options) {\n          value = options[option];\n          if (option === 'binders' || option === 'components' || option === 'formatters' || option === 'adapters') {\n            for (key in value) {\n              descriptor = value[key];\n              Rivets[option][key] = descriptor;\n            }\n          } else {\n            Rivets[\"public\"][option] = value;\n          }\n        }\n      },\n      bind: function(el, models, options) {\n        var view;\n        if (models == null) {\n          models = {};\n        }\n        if (options == null) {\n          options = {};\n        }\n        view = new Rivets.View(el, models, options);\n        view.bind();\n        return view;\n      },\n      init: function(component, el, data) {\n        var scope, view;\n        if (data == null) {\n          data = {};\n        }\n        if (el == null) {\n          el = document.createElement('div');\n        }\n        component = Rivets[\"public\"].components[component];\n        el.innerHTML = component.template.call(this, el);\n        scope = component.initialize.call(this, el, data);\n        view = new Rivets.View(el, scope);\n        view.bind();\n        return view;\n      }\n    }\n  };\n\n  if (window['jQuery'] || window['$']) {\n    _ref = 'on' in jQuery.prototype ? ['on', 'off'] : ['bind', 'unbind'], bindMethod = _ref[0], unbindMethod = _ref[1];\n    Rivets.Util = {\n      bindEvent: function(el, event, handler) {\n        return jQuery(el)[bindMethod](event, handler);\n      },\n      unbindEvent: function(el, event, handler) {\n        return jQuery(el)[unbindMethod](event, handler);\n      },\n      getInputValue: function(el) {\n        var $el;\n        $el = jQuery(el);\n        if ($el.attr('type') === 'checkbox') {\n          return $el.is(':checked');\n        } else {\n          return $el.val();\n        }\n      }\n    };\n  } else {\n    Rivets.Util = {\n      bindEvent: (function() {\n        if ('addEventListener' in window) {\n          return function(el, event, handler) {\n            return el.addEventListener(event, handler, false);\n          };\n        }\n        return function(el, event, handler) {\n          return el.attachEvent('on' + event, handler);\n        };\n      })(),\n      unbindEvent: (function() {\n        if ('removeEventListener' in window) {\n          return function(el, event, handler) {\n            return el.removeEventListener(event, handler, false);\n          };\n        }\n        return function(el, event, handler) {\n          return el.detachEvent('on' + event, handler);\n        };\n      })(),\n      getInputValue: function(el) {\n        var o, _i, _len, _results;\n        if (el.type === 'checkbox') {\n          return el.checked;\n        } else if (el.type === 'select-multiple') {\n          _results = [];\n          for (_i = 0, _len = el.length; _i < _len; _i++) {\n            o = el[_i];\n            if (o.selected) {\n              _results.push(o.value);\n            }\n          }\n          return _results;\n        } else {\n          return el.value;\n        }\n      }\n    };\n  }\n\n  Rivets.TypeParser = (function() {\n    function TypeParser() {}\n\n    TypeParser.types = {\n      primitive: 0,\n      keypath: 1\n    };\n\n    TypeParser.parse = function(string) {\n      if (/^'.*'$|^\".*\"$/.test(string)) {\n        return {\n          type: this.types.primitive,\n          value: string.slice(1, -1)\n        };\n      } else if (string === 'true') {\n        return {\n          type: this.types.primitive,\n          value: true\n        };\n      } else if (string === 'false') {\n        return {\n          type: this.types.primitive,\n          value: false\n        };\n      } else if (string === 'null') {\n        return {\n          type: this.types.primitive,\n          value: null\n        };\n      } else if (string === 'undefined') {\n        return {\n          type: this.types.primitive,\n          value: void 0\n        };\n      } else if (isNaN(Number(string)) === false) {\n        return {\n          type: this.types.primitive,\n          value: Number(string)\n        };\n      } else {\n        return {\n          type: this.types.keypath,\n          value: string\n        };\n      }\n    };\n\n    return TypeParser;\n\n  })();\n\n  Rivets.TextTemplateParser = (function() {\n    function TextTemplateParser() {}\n\n    TextTemplateParser.types = {\n      text: 0,\n      binding: 1\n    };\n\n    TextTemplateParser.parse = function(template, delimiters) {\n      var index, lastIndex, lastToken, length, substring, tokens, value;\n      tokens = [];\n      length = template.length;\n      index = 0;\n      lastIndex = 0;\n      while (lastIndex < length) {\n        index = template.indexOf(delimiters[0], lastIndex);\n        if (index < 0) {\n          tokens.push({\n            type: this.types.text,\n            value: template.slice(lastIndex)\n          });\n          break;\n        } else {\n          if (index > 0 && lastIndex < index) {\n            tokens.push({\n              type: this.types.text,\n              value: template.slice(lastIndex, index)\n            });\n          }\n          lastIndex = index + delimiters[0].length;\n          index = template.indexOf(delimiters[1], lastIndex);\n          if (index < 0) {\n            substring = template.slice(lastIndex - delimiters[1].length);\n            lastToken = tokens[tokens.length - 1];\n            if ((lastToken != null ? lastToken.type : void 0) === this.types.text) {\n              lastToken.value += substring;\n            } else {\n              tokens.push({\n                type: this.types.text,\n                value: substring\n              });\n            }\n            break;\n          }\n          value = template.slice(lastIndex, index).trim();\n          tokens.push({\n            type: this.types.binding,\n            value: value\n          });\n          lastIndex = index + delimiters[1].length;\n        }\n      }\n      return tokens;\n    };\n\n    return TextTemplateParser;\n\n  })();\n\n  Rivets.View = (function() {\n    function View(els, models, options) {\n      var k, option, v, _base, _i, _j, _len, _len1, _ref1, _ref2, _ref3, _ref4, _ref5;\n      this.els = els;\n      this.models = models;\n      if (options == null) {\n        options = {};\n      }\n      this.update = __bind(this.update, this);\n      this.publish = __bind(this.publish, this);\n      this.sync = __bind(this.sync, this);\n      this.unbind = __bind(this.unbind, this);\n      this.bind = __bind(this.bind, this);\n      this.select = __bind(this.select, this);\n      this.traverse = __bind(this.traverse, this);\n      this.build = __bind(this.build, this);\n      this.buildBinding = __bind(this.buildBinding, this);\n      this.bindingRegExp = __bind(this.bindingRegExp, this);\n      this.options = __bind(this.options, this);\n      if (!(this.els.jquery || this.els instanceof Array)) {\n        this.els = [this.els];\n      }\n      _ref1 = Rivets.extensions;\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        option = _ref1[_i];\n        this[option] = {};\n        if (options[option]) {\n          _ref2 = options[option];\n          for (k in _ref2) {\n            v = _ref2[k];\n            this[option][k] = v;\n          }\n        }\n        _ref3 = Rivets[\"public\"][option];\n        for (k in _ref3) {\n          v = _ref3[k];\n          if ((_base = this[option])[k] == null) {\n            _base[k] = v;\n          }\n        }\n      }\n      _ref4 = Rivets.options;\n      for (_j = 0, _len1 = _ref4.length; _j < _len1; _j++) {\n        option = _ref4[_j];\n        this[option] = (_ref5 = options[option]) != null ? _ref5 : Rivets[\"public\"][option];\n      }\n      this.build();\n    }\n\n    View.prototype.options = function() {\n      var option, options, _i, _len, _ref1;\n      options = {};\n      _ref1 = Rivets.extensions.concat(Rivets.options);\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        option = _ref1[_i];\n        options[option] = this[option];\n      }\n      return options;\n    };\n\n    View.prototype.bindingRegExp = function() {\n      return new RegExp(\"^\" + this.prefix + \"-\");\n    };\n\n    View.prototype.buildBinding = function(binding, node, type, declaration) {\n      var context, ctx, dependencies, keypath, options, pipe, pipes;\n      options = {};\n      pipes = (function() {\n        var _i, _len, _ref1, _results;\n        _ref1 = declaration.split('|');\n        _results = [];\n        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n          pipe = _ref1[_i];\n          _results.push(pipe.trim());\n        }\n        return _results;\n      })();\n      context = (function() {\n        var _i, _len, _ref1, _results;\n        _ref1 = pipes.shift().split('<');\n        _results = [];\n        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n          ctx = _ref1[_i];\n          _results.push(ctx.trim());\n        }\n        return _results;\n      })();\n      keypath = context.shift();\n      options.formatters = pipes;\n      if (dependencies = context.shift()) {\n        options.dependencies = dependencies.split(/\\s+/);\n      }\n      return this.bindings.push(new Rivets[binding](this, node, type, keypath, options));\n    };\n\n    View.prototype.build = function() {\n      var el, parse, _i, _len, _ref1;\n      this.bindings = [];\n      parse = (function(_this) {\n        return function(node) {\n          var block, childNode, delimiters, n, parser, text, token, tokens, _i, _j, _len, _len1, _ref1, _results;\n          if (node.nodeType === 3) {\n            parser = Rivets.TextTemplateParser;\n            if (delimiters = _this.templateDelimiters) {\n              if ((tokens = parser.parse(node.data, delimiters)).length) {\n                if (!(tokens.length === 1 && tokens[0].type === parser.types.text)) {\n                  for (_i = 0, _len = tokens.length; _i < _len; _i++) {\n                    token = tokens[_i];\n                    text = document.createTextNode(token.value);\n                    node.parentNode.insertBefore(text, node);\n                    if (token.type === 1) {\n                      _this.buildBinding('TextBinding', text, null, token.value);\n                    }\n                  }\n                  node.parentNode.removeChild(node);\n                }\n              }\n            }\n          } else if (node.nodeType === 1) {\n            block = _this.traverse(node);\n          }\n          if (!block) {\n            _ref1 = (function() {\n              var _k, _len1, _ref1, _results1;\n              _ref1 = node.childNodes;\n              _results1 = [];\n              for (_k = 0, _len1 = _ref1.length; _k < _len1; _k++) {\n                n = _ref1[_k];\n                _results1.push(n);\n              }\n              return _results1;\n            })();\n            _results = [];\n            for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {\n              childNode = _ref1[_j];\n              _results.push(parse(childNode));\n            }\n            return _results;\n          }\n        };\n      })(this);\n      _ref1 = this.els;\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        el = _ref1[_i];\n        parse(el);\n      }\n      this.bindings.sort(function(a, b) {\n        var _ref2, _ref3;\n        return (((_ref2 = b.binder) != null ? _ref2.priority : void 0) || 0) - (((_ref3 = a.binder) != null ? _ref3.priority : void 0) || 0);\n      });\n    };\n\n    View.prototype.traverse = function(node) {\n      var attribute, attributes, binder, bindingRegExp, block, identifier, regexp, type, value, _i, _j, _len, _len1, _ref1, _ref2, _ref3;\n      bindingRegExp = this.bindingRegExp();\n      block = node.nodeName === 'SCRIPT' || node.nodeName === 'STYLE';\n      _ref1 = node.attributes;\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        attribute = _ref1[_i];\n        if (bindingRegExp.test(attribute.name)) {\n          type = attribute.name.replace(bindingRegExp, '');\n          if (!(binder = this.binders[type])) {\n            _ref2 = this.binders;\n            for (identifier in _ref2) {\n              value = _ref2[identifier];\n              if (identifier !== '*' && identifier.indexOf('*') !== -1) {\n                regexp = new RegExp(\"^\" + (identifier.replace(/\\*/g, '.+')) + \"$\");\n                if (regexp.test(type)) {\n                  binder = value;\n                }\n              }\n            }\n          }\n          binder || (binder = this.binders['*']);\n          if (binder.block) {\n            block = true;\n            attributes = [attribute];\n          }\n        }\n      }\n      _ref3 = attributes || node.attributes;\n      for (_j = 0, _len1 = _ref3.length; _j < _len1; _j++) {\n        attribute = _ref3[_j];\n        if (bindingRegExp.test(attribute.name)) {\n          type = attribute.name.replace(bindingRegExp, '');\n          this.buildBinding('Binding', node, type, attribute.value);\n        }\n      }\n      if (!block) {\n        type = node.nodeName.toLowerCase();\n        if (this.components[type] && !node._bound) {\n          this.bindings.push(new Rivets.ComponentBinding(this, node, type));\n          block = true;\n        }\n      }\n      return block;\n    };\n\n    View.prototype.select = function(fn) {\n      var binding, _i, _len, _ref1, _results;\n      _ref1 = this.bindings;\n      _results = [];\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        binding = _ref1[_i];\n        if (fn(binding)) {\n          _results.push(binding);\n        }\n      }\n      return _results;\n    };\n\n    View.prototype.bind = function() {\n      var binding, _i, _len, _ref1, _results;\n      _ref1 = this.bindings;\n      _results = [];\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        binding = _ref1[_i];\n        _results.push(binding.bind());\n      }\n      return _results;\n    };\n\n    View.prototype.unbind = function() {\n      var binding, _i, _len, _ref1, _results;\n      _ref1 = this.bindings;\n      _results = [];\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        binding = _ref1[_i];\n        _results.push(binding.unbind());\n      }\n      return _results;\n    };\n\n    View.prototype.sync = function() {\n      var binding, _i, _len, _ref1, _results;\n      _ref1 = this.bindings;\n      _results = [];\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        binding = _ref1[_i];\n        _results.push(typeof binding.sync === \"function\" ? binding.sync() : void 0);\n      }\n      return _results;\n    };\n\n    View.prototype.publish = function() {\n      var binding, _i, _len, _ref1, _results;\n      _ref1 = this.select(function(b) {\n        var _ref1;\n        return (_ref1 = b.binder) != null ? _ref1.publishes : void 0;\n      });\n      _results = [];\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        binding = _ref1[_i];\n        _results.push(binding.publish());\n      }\n      return _results;\n    };\n\n    View.prototype.update = function(models) {\n      var binding, key, model, _i, _len, _ref1, _results;\n      if (models == null) {\n        models = {};\n      }\n      for (key in models) {\n        model = models[key];\n        this.models[key] = model;\n      }\n      _ref1 = this.bindings;\n      _results = [];\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        binding = _ref1[_i];\n        _results.push(typeof binding.update === \"function\" ? binding.update(models) : void 0);\n      }\n      return _results;\n    };\n\n    return View;\n\n  })();\n\n  Rivets.Binding = (function() {\n    function Binding(view, el, type, keypath, options) {\n      this.view = view;\n      this.el = el;\n      this.type = type;\n      this.keypath = keypath;\n      this.options = options != null ? options : {};\n      this.getValue = __bind(this.getValue, this);\n      this.update = __bind(this.update, this);\n      this.unbind = __bind(this.unbind, this);\n      this.bind = __bind(this.bind, this);\n      this.publish = __bind(this.publish, this);\n      this.sync = __bind(this.sync, this);\n      this.set = __bind(this.set, this);\n      this.eventHandler = __bind(this.eventHandler, this);\n      this.formattedValue = __bind(this.formattedValue, this);\n      this.parseTarget = __bind(this.parseTarget, this);\n      this.observe = __bind(this.observe, this);\n      this.setBinder = __bind(this.setBinder, this);\n      this.formatters = this.options.formatters || [];\n      this.dependencies = [];\n      this.formatterObservers = {};\n      this.model = void 0;\n      this.setBinder();\n    }\n\n    Binding.prototype.setBinder = function() {\n      var identifier, regexp, value, _ref1;\n      if (!(this.binder = this.view.binders[this.type])) {\n        _ref1 = this.view.binders;\n        for (identifier in _ref1) {\n          value = _ref1[identifier];\n          if (identifier !== '*' && identifier.indexOf('*') !== -1) {\n            regexp = new RegExp(\"^\" + (identifier.replace(/\\*/g, '.+')) + \"$\");\n            if (regexp.test(this.type)) {\n              this.binder = value;\n              this.args = new RegExp(\"^\" + (identifier.replace(/\\*/g, '(.+)')) + \"$\").exec(this.type);\n              this.args.shift();\n            }\n          }\n        }\n      }\n      this.binder || (this.binder = this.view.binders['*']);\n      if (this.binder instanceof Function) {\n        return this.binder = {\n          routine: this.binder\n        };\n      }\n    };\n\n    Binding.prototype.observe = function(obj, keypath, callback) {\n      return Rivets.sightglass(obj, keypath, callback, {\n        root: this.view.rootInterface,\n        adapters: this.view.adapters\n      });\n    };\n\n    Binding.prototype.parseTarget = function() {\n      var token;\n      token = Rivets.TypeParser.parse(this.keypath);\n      if (token.type === 0) {\n        return this.value = token.value;\n      } else {\n        this.observer = this.observe(this.view.models, this.keypath, this.sync);\n        return this.model = this.observer.target;\n      }\n    };\n\n    Binding.prototype.formattedValue = function(value) {\n      var ai, arg, args, fi, formatter, id, observer, processedArgs, _base, _i, _j, _len, _len1, _ref1;\n      _ref1 = this.formatters;\n      for (fi = _i = 0, _len = _ref1.length; _i < _len; fi = ++_i) {\n        formatter = _ref1[fi];\n        args = formatter.match(/[^\\s']+|'([^']|'[^\\s])*'|\"([^\"]|\"[^\\s])*\"/g);\n        id = args.shift();\n        formatter = this.view.formatters[id];\n        args = (function() {\n          var _j, _len1, _results;\n          _results = [];\n          for (_j = 0, _len1 = args.length; _j < _len1; _j++) {\n            arg = args[_j];\n            _results.push(Rivets.TypeParser.parse(arg));\n          }\n          return _results;\n        })();\n        processedArgs = [];\n        for (ai = _j = 0, _len1 = args.length; _j < _len1; ai = ++_j) {\n          arg = args[ai];\n          processedArgs.push(arg.type === 0 ? arg.value : ((_base = this.formatterObservers)[fi] || (_base[fi] = {}), !(observer = this.formatterObservers[fi][ai]) ? (observer = this.observe(this.view.models, arg.value, this.sync), this.formatterObservers[fi][ai] = observer) : void 0, observer.value()));\n        }\n        if ((formatter != null ? formatter.read : void 0) instanceof Function) {\n          value = formatter.read.apply(formatter, [value].concat(__slice.call(processedArgs)));\n        } else if (formatter instanceof Function) {\n          value = formatter.apply(null, [value].concat(__slice.call(processedArgs)));\n        }\n      }\n      return value;\n    };\n\n    Binding.prototype.eventHandler = function(fn) {\n      var binding, handler;\n      handler = (binding = this).view.handler;\n      return function(ev) {\n        return handler.call(fn, this, ev, binding);\n      };\n    };\n\n    Binding.prototype.set = function(value) {\n      var _ref1;\n      value = value instanceof Function && !this.binder[\"function\"] ? this.formattedValue(value.call(this.model)) : this.formattedValue(value);\n      return (_ref1 = this.binder.routine) != null ? _ref1.call(this, this.el, value) : void 0;\n    };\n\n    Binding.prototype.sync = function() {\n      var dependency, observer;\n      return this.set((function() {\n        var _i, _j, _len, _len1, _ref1, _ref2, _ref3;\n        if (this.observer) {\n          if (this.model !== this.observer.target) {\n            _ref1 = this.dependencies;\n            for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n              observer = _ref1[_i];\n              observer.unobserve();\n            }\n            this.dependencies = [];\n            if (((this.model = this.observer.target) != null) && ((_ref2 = this.options.dependencies) != null ? _ref2.length : void 0)) {\n              _ref3 = this.options.dependencies;\n              for (_j = 0, _len1 = _ref3.length; _j < _len1; _j++) {\n                dependency = _ref3[_j];\n                observer = this.observe(this.model, dependency, this.sync);\n                this.dependencies.push(observer);\n              }\n            }\n          }\n          return this.observer.value();\n        } else {\n          return this.value;\n        }\n      }).call(this));\n    };\n\n    Binding.prototype.publish = function() {\n      var args, formatter, id, value, _i, _len, _ref1, _ref2, _ref3;\n      if (this.observer) {\n        value = this.getValue(this.el);\n        _ref1 = this.formatters.slice(0).reverse();\n        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n          formatter = _ref1[_i];\n          args = formatter.split(/\\s+/);\n          id = args.shift();\n          if ((_ref2 = this.view.formatters[id]) != null ? _ref2.publish : void 0) {\n            value = (_ref3 = this.view.formatters[id]).publish.apply(_ref3, [value].concat(__slice.call(args)));\n          }\n        }\n        return this.observer.setValue(value);\n      }\n    };\n\n    Binding.prototype.bind = function() {\n      var dependency, observer, _i, _len, _ref1, _ref2, _ref3;\n      this.parseTarget();\n      if ((_ref1 = this.binder.bind) != null) {\n        _ref1.call(this, this.el);\n      }\n      if ((this.model != null) && ((_ref2 = this.options.dependencies) != null ? _ref2.length : void 0)) {\n        _ref3 = this.options.dependencies;\n        for (_i = 0, _len = _ref3.length; _i < _len; _i++) {\n          dependency = _ref3[_i];\n          observer = this.observe(this.model, dependency, this.sync);\n          this.dependencies.push(observer);\n        }\n      }\n      if (this.view.preloadData) {\n        return this.sync();\n      }\n    };\n\n    Binding.prototype.unbind = function() {\n      var ai, args, fi, observer, _i, _len, _ref1, _ref2, _ref3, _ref4;\n      if ((_ref1 = this.binder.unbind) != null) {\n        _ref1.call(this, this.el);\n      }\n      if ((_ref2 = this.observer) != null) {\n        _ref2.unobserve();\n      }\n      _ref3 = this.dependencies;\n      for (_i = 0, _len = _ref3.length; _i < _len; _i++) {\n        observer = _ref3[_i];\n        observer.unobserve();\n      }\n      this.dependencies = [];\n      _ref4 = this.formatterObservers;\n      for (fi in _ref4) {\n        args = _ref4[fi];\n        for (ai in args) {\n          observer = args[ai];\n          observer.unobserve();\n        }\n      }\n      return this.formatterObservers = {};\n    };\n\n    Binding.prototype.update = function(models) {\n      var _ref1, _ref2;\n      if (models == null) {\n        models = {};\n      }\n      this.model = (_ref1 = this.observer) != null ? _ref1.target : void 0;\n      return (_ref2 = this.binder.update) != null ? _ref2.call(this, models) : void 0;\n    };\n\n    Binding.prototype.getValue = function(el) {\n      if (this.binder && (this.binder.getValue != null)) {\n        return this.binder.getValue.call(this, el);\n      } else {\n        return Rivets.Util.getInputValue(el);\n      }\n    };\n\n    return Binding;\n\n  })();\n\n  Rivets.ComponentBinding = (function(_super) {\n    __extends(ComponentBinding, _super);\n\n    function ComponentBinding(view, el, type) {\n      var attribute, bindingRegExp, propertyName, _i, _len, _ref1, _ref2;\n      this.view = view;\n      this.el = el;\n      this.type = type;\n      this.unbind = __bind(this.unbind, this);\n      this.bind = __bind(this.bind, this);\n      this.locals = __bind(this.locals, this);\n      this.component = this.view.components[this.type];\n      this[\"static\"] = {};\n      this.observers = {};\n      this.upstreamObservers = {};\n      bindingRegExp = view.bindingRegExp();\n      _ref1 = this.el.attributes || [];\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        attribute = _ref1[_i];\n        if (!bindingRegExp.test(attribute.name)) {\n          propertyName = this.camelCase(attribute.name);\n          if (__indexOf.call((_ref2 = this.component[\"static\"]) != null ? _ref2 : [], propertyName) >= 0) {\n            this[\"static\"][propertyName] = attribute.value;\n          } else {\n            this.observers[propertyName] = attribute.value;\n          }\n        }\n      }\n    }\n\n    ComponentBinding.prototype.sync = function() {};\n\n    ComponentBinding.prototype.update = function() {};\n\n    ComponentBinding.prototype.publish = function() {};\n\n    ComponentBinding.prototype.locals = function() {\n      var key, observer, result, value, _ref1, _ref2;\n      result = {};\n      _ref1 = this[\"static\"];\n      for (key in _ref1) {\n        value = _ref1[key];\n        result[key] = value;\n      }\n      _ref2 = this.observers;\n      for (key in _ref2) {\n        observer = _ref2[key];\n        result[key] = observer.value();\n      }\n      return result;\n    };\n\n    ComponentBinding.prototype.camelCase = function(string) {\n      return string.replace(/-([a-z])/g, function(grouped) {\n        return grouped[1].toUpperCase();\n      });\n    };\n\n    ComponentBinding.prototype.bind = function() {\n      var k, key, keypath, observer, option, options, scope, v, _base, _i, _j, _len, _len1, _ref1, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _results;\n      if (!this.bound) {\n        _ref1 = this.observers;\n        for (key in _ref1) {\n          keypath = _ref1[key];\n          this.observers[key] = this.observe(this.view.models, keypath, ((function(_this) {\n            return function(key) {\n              return function() {\n                return _this.componentView.models[key] = _this.observers[key].value();\n              };\n            };\n          })(this)).call(this, key));\n        }\n        this.bound = true;\n      }\n      if (this.componentView != null) {\n        return this.componentView.bind();\n      } else {\n        this.el.innerHTML = this.component.template.call(this);\n        scope = this.component.initialize.call(this, this.el, this.locals());\n        this.el._bound = true;\n        options = {};\n        _ref2 = Rivets.extensions;\n        for (_i = 0, _len = _ref2.length; _i < _len; _i++) {\n          option = _ref2[_i];\n          options[option] = {};\n          if (this.component[option]) {\n            _ref3 = this.component[option];\n            for (k in _ref3) {\n              v = _ref3[k];\n              options[option][k] = v;\n            }\n          }\n          _ref4 = this.view[option];\n          for (k in _ref4) {\n            v = _ref4[k];\n            if ((_base = options[option])[k] == null) {\n              _base[k] = v;\n            }\n          }\n        }\n        _ref5 = Rivets.options;\n        for (_j = 0, _len1 = _ref5.length; _j < _len1; _j++) {\n          option = _ref5[_j];\n          options[option] = (_ref6 = this.component[option]) != null ? _ref6 : this.view[option];\n        }\n        this.componentView = new Rivets.View(this.el, scope, options);\n        this.componentView.bind();\n        _ref7 = this.observers;\n        _results = [];\n        for (key in _ref7) {\n          observer = _ref7[key];\n          _results.push(this.upstreamObservers[key] = this.observe(this.componentView.models, key, ((function(_this) {\n            return function(key, observer) {\n              return function() {\n                return observer.setValue(_this.componentView.models[key]);\n              };\n            };\n          })(this)).call(this, key, observer)));\n        }\n        return _results;\n      }\n    };\n\n    ComponentBinding.prototype.unbind = function() {\n      var key, observer, _ref1, _ref2, _ref3;\n      _ref1 = this.upstreamObservers;\n      for (key in _ref1) {\n        observer = _ref1[key];\n        observer.unobserve();\n      }\n      _ref2 = this.observers;\n      for (key in _ref2) {\n        observer = _ref2[key];\n        observer.unobserve();\n      }\n      return (_ref3 = this.componentView) != null ? _ref3.unbind.call(this) : void 0;\n    };\n\n    return ComponentBinding;\n\n  })(Rivets.Binding);\n\n  Rivets.TextBinding = (function(_super) {\n    __extends(TextBinding, _super);\n\n    function TextBinding(view, el, type, keypath, options) {\n      this.view = view;\n      this.el = el;\n      this.type = type;\n      this.keypath = keypath;\n      this.options = options != null ? options : {};\n      this.sync = __bind(this.sync, this);\n      this.formatters = this.options.formatters || [];\n      this.dependencies = [];\n      this.formatterObservers = {};\n    }\n\n    TextBinding.prototype.binder = {\n      routine: function(node, value) {\n        return node.data = value != null ? value : '';\n      }\n    };\n\n    TextBinding.prototype.sync = function() {\n      return TextBinding.__super__.sync.apply(this, arguments);\n    };\n\n    return TextBinding;\n\n  })(Rivets.Binding);\n\n  Rivets[\"public\"].binders.text = function(el, value) {\n    if (el.textContent != null) {\n      return el.textContent = value != null ? value : '';\n    } else {\n      return el.innerText = value != null ? value : '';\n    }\n  };\n\n  Rivets[\"public\"].binders.html = function(el, value) {\n    return el.innerHTML = value != null ? value : '';\n  };\n\n  Rivets[\"public\"].binders.show = function(el, value) {\n    return el.style.display = value ? '' : 'none';\n  };\n\n  Rivets[\"public\"].binders.hide = function(el, value) {\n    return el.style.display = value ? 'none' : '';\n  };\n\n  Rivets[\"public\"].binders.enabled = function(el, value) {\n    return el.disabled = !value;\n  };\n\n  Rivets[\"public\"].binders.disabled = function(el, value) {\n    return el.disabled = !!value;\n  };\n\n  Rivets[\"public\"].binders.checked = {\n    publishes: true,\n    priority: 2000,\n    bind: function(el) {\n      return Rivets.Util.bindEvent(el, 'change', this.publish);\n    },\n    unbind: function(el) {\n      return Rivets.Util.unbindEvent(el, 'change', this.publish);\n    },\n    routine: function(el, value) {\n      var _ref1;\n      if (el.type === 'radio') {\n        return el.checked = ((_ref1 = el.value) != null ? _ref1.toString() : void 0) === (value != null ? value.toString() : void 0);\n      } else {\n        return el.checked = !!value;\n      }\n    }\n  };\n\n  Rivets[\"public\"].binders.unchecked = {\n    publishes: true,\n    priority: 2000,\n    bind: function(el) {\n      return Rivets.Util.bindEvent(el, 'change', this.publish);\n    },\n    unbind: function(el) {\n      return Rivets.Util.unbindEvent(el, 'change', this.publish);\n    },\n    routine: function(el, value) {\n      var _ref1;\n      if (el.type === 'radio') {\n        return el.checked = ((_ref1 = el.value) != null ? _ref1.toString() : void 0) !== (value != null ? value.toString() : void 0);\n      } else {\n        return el.checked = !value;\n      }\n    }\n  };\n\n  Rivets[\"public\"].binders.value = {\n    publishes: true,\n    priority: 3000,\n    bind: function(el) {\n      if (!(el.tagName === 'INPUT' && el.type === 'radio')) {\n        this.event = el.tagName === 'SELECT' ? 'change' : 'input';\n        return Rivets.Util.bindEvent(el, this.event, this.publish);\n      }\n    },\n    unbind: function(el) {\n      if (!(el.tagName === 'INPUT' && el.type === 'radio')) {\n        return Rivets.Util.unbindEvent(el, this.event, this.publish);\n      }\n    },\n    routine: function(el, value) {\n      var o, _i, _len, _ref1, _ref2, _ref3, _results;\n      if (el.tagName === 'INPUT' && el.type === 'radio') {\n        return el.setAttribute('value', value);\n      } else if (window.jQuery != null) {\n        el = jQuery(el);\n        if ((value != null ? value.toString() : void 0) !== ((_ref1 = el.val()) != null ? _ref1.toString() : void 0)) {\n          return el.val(value != null ? value : '');\n        }\n      } else {\n        if (el.type === 'select-multiple') {\n          if (value != null) {\n            _results = [];\n            for (_i = 0, _len = el.length; _i < _len; _i++) {\n              o = el[_i];\n              _results.push(o.selected = (_ref2 = o.value, __indexOf.call(value, _ref2) >= 0));\n            }\n            return _results;\n          }\n        } else if ((value != null ? value.toString() : void 0) !== ((_ref3 = el.value) != null ? _ref3.toString() : void 0)) {\n          return el.value = value != null ? value : '';\n        }\n      }\n    }\n  };\n\n  Rivets[\"public\"].binders[\"if\"] = {\n    block: true,\n    priority: 4000,\n    bind: function(el) {\n      var attr, declaration;\n      if (this.marker == null) {\n        attr = [this.view.prefix, this.type].join('-').replace('--', '-');\n        declaration = el.getAttribute(attr);\n        this.marker = document.createComment(\" rivets: \" + this.type + \" \" + declaration + \" \");\n        this.bound = false;\n        el.removeAttribute(attr);\n        el.parentNode.insertBefore(this.marker, el);\n        return el.parentNode.removeChild(el);\n      }\n    },\n    unbind: function() {\n      var _ref1;\n      return (_ref1 = this.nested) != null ? _ref1.unbind() : void 0;\n    },\n    routine: function(el, value) {\n      var key, model, models, _ref1;\n      if (!!value === !this.bound) {\n        if (value) {\n          models = {};\n          _ref1 = this.view.models;\n          for (key in _ref1) {\n            model = _ref1[key];\n            models[key] = model;\n          }\n          (this.nested || (this.nested = new Rivets.View(el, models, this.view.options()))).bind();\n          this.marker.parentNode.insertBefore(el, this.marker.nextSibling);\n          return this.bound = true;\n        } else {\n          el.parentNode.removeChild(el);\n          this.nested.unbind();\n          return this.bound = false;\n        }\n      }\n    },\n    update: function(models) {\n      var _ref1;\n      return (_ref1 = this.nested) != null ? _ref1.update(models) : void 0;\n    }\n  };\n\n  Rivets[\"public\"].binders.unless = {\n    block: true,\n    priority: 4000,\n    bind: function(el) {\n      return Rivets[\"public\"].binders[\"if\"].bind.call(this, el);\n    },\n    unbind: function() {\n      return Rivets[\"public\"].binders[\"if\"].unbind.call(this);\n    },\n    routine: function(el, value) {\n      return Rivets[\"public\"].binders[\"if\"].routine.call(this, el, !value);\n    },\n    update: function(models) {\n      return Rivets[\"public\"].binders[\"if\"].update.call(this, models);\n    }\n  };\n\n  Rivets[\"public\"].binders['on-*'] = {\n    \"function\": true,\n    priority: 1000,\n    unbind: function(el) {\n      if (this.handler) {\n        return Rivets.Util.unbindEvent(el, this.args[0], this.handler);\n      }\n    },\n    routine: function(el, value) {\n      if (this.handler) {\n        Rivets.Util.unbindEvent(el, this.args[0], this.handler);\n      }\n      return Rivets.Util.bindEvent(el, this.args[0], this.handler = this.eventHandler(value));\n    }\n  };\n\n  Rivets[\"public\"].binders['each-*'] = {\n    block: true,\n    priority: 4000,\n    bind: function(el) {\n      var attr, view, _i, _len, _ref1;\n      if (this.marker == null) {\n        attr = [this.view.prefix, this.type].join('-').replace('--', '-');\n        this.marker = document.createComment(\" rivets: \" + this.type + \" \");\n        this.iterated = [];\n        el.removeAttribute(attr);\n        el.parentNode.insertBefore(this.marker, el);\n        el.parentNode.removeChild(el);\n      } else {\n        _ref1 = this.iterated;\n        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n          view = _ref1[_i];\n          view.bind();\n        }\n      }\n    },\n    unbind: function(el) {\n      var view, _i, _len, _ref1, _results;\n      if (this.iterated != null) {\n        _ref1 = this.iterated;\n        _results = [];\n        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n          view = _ref1[_i];\n          _results.push(view.unbind());\n        }\n        return _results;\n      }\n    },\n    routine: function(el, collection) {\n      var binding, data, i, index, key, model, modelName, options, previous, template, view, _i, _j, _k, _len, _len1, _len2, _ref1, _ref2, _ref3, _results;\n      modelName = this.args[0];\n      collection = collection || [];\n      if (this.iterated.length > collection.length) {\n        _ref1 = Array(this.iterated.length - collection.length);\n        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n          i = _ref1[_i];\n          view = this.iterated.pop();\n          view.unbind();\n          this.marker.parentNode.removeChild(view.els[0]);\n        }\n      }\n      for (index = _j = 0, _len1 = collection.length; _j < _len1; index = ++_j) {\n        model = collection[index];\n        data = {\n          index: index\n        };\n        data[modelName] = model;\n        if (this.iterated[index] == null) {\n          _ref2 = this.view.models;\n          for (key in _ref2) {\n            model = _ref2[key];\n            if (data[key] == null) {\n              data[key] = model;\n            }\n          }\n          previous = this.iterated.length ? this.iterated[this.iterated.length - 1].els[0] : this.marker;\n          options = this.view.options();\n          options.preloadData = true;\n          template = el.cloneNode(true);\n          view = new Rivets.View(template, data, options);\n          view.bind();\n          this.iterated.push(view);\n          this.marker.parentNode.insertBefore(template, previous.nextSibling);\n        } else if (this.iterated[index].models[modelName] !== model) {\n          this.iterated[index].update(data);\n        }\n      }\n      if (el.nodeName === 'OPTION') {\n        _ref3 = this.view.bindings;\n        _results = [];\n        for (_k = 0, _len2 = _ref3.length; _k < _len2; _k++) {\n          binding = _ref3[_k];\n          if (binding.el === this.marker.parentNode && binding.type === 'value') {\n            _results.push(binding.sync());\n          } else {\n            _results.push(void 0);\n          }\n        }\n        return _results;\n      }\n    },\n    update: function(models) {\n      var data, key, model, view, _i, _len, _ref1, _results;\n      data = {};\n      for (key in models) {\n        model = models[key];\n        if (key !== this.args[0]) {\n          data[key] = model;\n        }\n      }\n      _ref1 = this.iterated;\n      _results = [];\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        view = _ref1[_i];\n        _results.push(view.update(data));\n      }\n      return _results;\n    }\n  };\n\n  Rivets[\"public\"].binders['class-*'] = function(el, value) {\n    var elClass;\n    elClass = \" \" + el.className + \" \";\n    if (!value === (elClass.indexOf(\" \" + this.args[0] + \" \") !== -1)) {\n      return el.className = value ? \"\" + el.className + \" \" + this.args[0] : elClass.replace(\" \" + this.args[0] + \" \", ' ').trim();\n    }\n  };\n\n  Rivets[\"public\"].binders['*'] = function(el, value) {\n    if (value != null) {\n      return el.setAttribute(this.type, value);\n    } else {\n      return el.removeAttribute(this.type);\n    }\n  };\n\n  Rivets[\"public\"].adapters['.'] = {\n    id: '_rv',\n    counter: 0,\n    weakmap: {},\n    weakReference: function(obj) {\n      var id, _base, _name;\n      if (!obj.hasOwnProperty(this.id)) {\n        id = this.counter++;\n        Object.defineProperty(obj, this.id, {\n          value: id\n        });\n      }\n      return (_base = this.weakmap)[_name = obj[this.id]] || (_base[_name] = {\n        callbacks: {}\n      });\n    },\n    cleanupWeakReference: function(ref, id) {\n      if (!Object.keys(ref.callbacks).length) {\n        if (!(ref.pointers && Object.keys(ref.pointers).length)) {\n          return delete this.weakmap[id];\n        }\n      }\n    },\n    stubFunction: function(obj, fn) {\n      var map, original, weakmap;\n      original = obj[fn];\n      map = this.weakReference(obj);\n      weakmap = this.weakmap;\n      return obj[fn] = function() {\n        var callback, k, r, response, _i, _len, _ref1, _ref2, _ref3, _ref4;\n        response = original.apply(obj, arguments);\n        _ref1 = map.pointers;\n        for (r in _ref1) {\n          k = _ref1[r];\n          _ref4 = (_ref2 = (_ref3 = weakmap[r]) != null ? _ref3.callbacks[k] : void 0) != null ? _ref2 : [];\n          for (_i = 0, _len = _ref4.length; _i < _len; _i++) {\n            callback = _ref4[_i];\n            callback();\n          }\n        }\n        return response;\n      };\n    },\n    observeMutations: function(obj, ref, keypath) {\n      var fn, functions, map, _base, _i, _len;\n      if (Array.isArray(obj)) {\n        map = this.weakReference(obj);\n        if (map.pointers == null) {\n          map.pointers = {};\n          functions = ['push', 'pop', 'shift', 'unshift', 'sort', 'reverse', 'splice'];\n          for (_i = 0, _len = functions.length; _i < _len; _i++) {\n            fn = functions[_i];\n            this.stubFunction(obj, fn);\n          }\n        }\n        if ((_base = map.pointers)[ref] == null) {\n          _base[ref] = [];\n        }\n        if (__indexOf.call(map.pointers[ref], keypath) < 0) {\n          return map.pointers[ref].push(keypath);\n        }\n      }\n    },\n    unobserveMutations: function(obj, ref, keypath) {\n      var idx, map, pointers;\n      if (Array.isArray(obj) && (obj[this.id] != null)) {\n        if (map = this.weakmap[obj[this.id]]) {\n          if (pointers = map.pointers[ref]) {\n            if ((idx = pointers.indexOf(keypath)) >= 0) {\n              pointers.splice(idx, 1);\n            }\n            if (!pointers.length) {\n              delete map.pointers[ref];\n            }\n            return this.cleanupWeakReference(map, obj[this.id]);\n          }\n        }\n      }\n    },\n    observe: function(obj, keypath, callback) {\n      var callbacks, desc, value;\n      callbacks = this.weakReference(obj).callbacks;\n      if (callbacks[keypath] == null) {\n        callbacks[keypath] = [];\n        desc = Object.getOwnPropertyDescriptor(obj, keypath);\n        if (!((desc != null ? desc.get : void 0) || (desc != null ? desc.set : void 0))) {\n          value = obj[keypath];\n          Object.defineProperty(obj, keypath, {\n            enumerable: true,\n            get: function() {\n              return value;\n            },\n            set: (function(_this) {\n              return function(newValue) {\n                var map, _i, _len, _ref1;\n                if (newValue !== value) {\n                  _this.unobserveMutations(value, obj[_this.id], keypath);\n                  value = newValue;\n                  if (map = _this.weakmap[obj[_this.id]]) {\n                    callbacks = map.callbacks;\n                    if (callbacks[keypath]) {\n                      _ref1 = callbacks[keypath].slice();\n                      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n                        callback = _ref1[_i];\n                        if (__indexOf.call(callbacks[keypath], callback) >= 0) {\n                          callback();\n                        }\n                      }\n                    }\n                    return _this.observeMutations(newValue, obj[_this.id], keypath);\n                  }\n                }\n              };\n            })(this)\n          });\n        }\n      }\n      if (__indexOf.call(callbacks[keypath], callback) < 0) {\n        callbacks[keypath].push(callback);\n      }\n      return this.observeMutations(obj[keypath], obj[this.id], keypath);\n    },\n    unobserve: function(obj, keypath, callback) {\n      var callbacks, idx, map;\n      if (map = this.weakmap[obj[this.id]]) {\n        if (callbacks = map.callbacks[keypath]) {\n          if ((idx = callbacks.indexOf(callback)) >= 0) {\n            callbacks.splice(idx, 1);\n            if (!callbacks.length) {\n              delete map.callbacks[keypath];\n            }\n          }\n          this.unobserveMutations(obj[keypath], obj[this.id], keypath);\n          return this.cleanupWeakReference(map, obj[this.id]);\n        }\n      }\n    },\n    get: function(obj, keypath) {\n      return obj[keypath];\n    },\n    set: function(obj, keypath, value) {\n      return obj[keypath] = value;\n    }\n  };\n\n  Rivets.factory = function(sightglass) {\n    Rivets.sightglass = sightglass;\n    Rivets[\"public\"]._ = Rivets;\n    return Rivets[\"public\"];\n  };\n\n  if (typeof (typeof module !== \"undefined\" && module !== null ? module.exports : void 0) === 'object') {\n    module.exports = Rivets.factory(require('sightglass'));\n  } else if (typeof define === 'function' && define.amd) {\n    define(['sightglass'], function(sightglass) {\n      return this.rivets = Rivets.factory(sightglass);\n    });\n  } else {\n    this.rivets = Rivets.factory(sightglass);\n  }\n\n}).call(this);\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/rivets/dist/rivets.js\n **/","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** (webpack)/buildin/module.js\n **/","(function() {\n  // Public sightglass interface.\n  function sightglass(obj, keypath, callback, options) {\n    return new Observer(obj, keypath, callback, options)\n  }\n\n  // Batteries not included.\n  sightglass.adapters = {}\n\n  // Constructs a new keypath observer and kicks things off.\n  function Observer(obj, keypath, callback, options) {\n    this.options = options || {}\n    this.options.adapters = this.options.adapters || {}\n    this.obj = obj\n    this.keypath = keypath\n    this.callback = callback\n    this.objectPath = []\n    this.parse()\n\n    if (isObject(this.target = this.realize())) {\n      this.set(true, this.key, this.target, this.callback)\n    }\n  }\n\n  // Tokenizes the provided keypath string into interface + path tokens for the\n  // observer to work with.\n  Observer.tokenize = function(keypath, interfaces, root) {\n    var tokens = []\n    var current = {i: root, path: ''}\n    var index, chr\n\n    for (index = 0; index < keypath.length; index++) {\n      chr = keypath.charAt(index)\n\n      if (!!~interfaces.indexOf(chr)) {\n        tokens.push(current)\n        current = {i: chr, path: ''}\n      } else {\n        current.path += chr\n      }\n    }\n\n    tokens.push(current)\n    return tokens\n  }\n\n  // Parses the keypath using the interfaces defined on the view. Sets variables\n  // for the tokenized keypath as well as the end key.\n  Observer.prototype.parse = function() {\n    var interfaces = this.interfaces()\n    var root, path\n\n    if (!interfaces.length) {\n      error('Must define at least one adapter interface.')\n    }\n\n    if (!!~interfaces.indexOf(this.keypath[0])) {\n      root = this.keypath[0]\n      path = this.keypath.substr(1)\n    } else {\n      if (typeof (root = this.options.root || sightglass.root) === 'undefined') {\n        error('Must define a default root adapter.')\n      }\n\n      path = this.keypath\n    }\n\n    this.tokens = Observer.tokenize(path, interfaces, root)\n    this.key = this.tokens.pop()\n  }\n\n  // Realizes the full keypath, attaching observers for every key and correcting\n  // old observers to any changed objects in the keypath.\n  Observer.prototype.realize = function() {\n    var current = this.obj\n    var unreached = false\n    var prev\n\n    this.tokens.forEach(function(token, index) {\n      if (isObject(current)) {\n        if (typeof this.objectPath[index] !== 'undefined') {\n          if (current !== (prev = this.objectPath[index])) {\n            this.set(false, token, prev, this.update.bind(this))\n            this.set(true, token, current, this.update.bind(this))\n            this.objectPath[index] = current\n          }\n        } else {\n          this.set(true, token, current, this.update.bind(this))\n          this.objectPath[index] = current\n        }\n\n        current = this.get(token, current)\n      } else {\n        if (unreached === false) {\n          unreached = index\n        }\n\n        if (prev = this.objectPath[index]) {\n          this.set(false, token, prev, this.update.bind(this))\n        }\n      }\n    }, this)\n\n    if (unreached !== false) {\n      this.objectPath.splice(unreached)\n    }\n\n    return current\n  }\n\n  // Updates the keypath. This is called when any intermediary key is changed.\n  Observer.prototype.update = function() {\n    var next, oldValue\n\n    if ((next = this.realize()) !== this.target) {\n      if (isObject(this.target)) {\n        this.set(false, this.key, this.target, this.callback)\n      }\n\n      if (isObject(next)) {\n        this.set(true, this.key, next, this.callback)\n      }\n\n      oldValue = this.value()\n      this.target = next\n\n      if (this.value() !== oldValue) this.callback()\n    }\n  }\n\n  // Reads the current end value of the observed keypath. Returns undefined if\n  // the full keypath is unreachable.\n  Observer.prototype.value = function() {\n    if (isObject(this.target)) {\n      return this.get(this.key, this.target)\n    }\n  }\n\n  // Sets the current end value of the observed keypath. Calling setValue when\n  // the full keypath is unreachable is a no-op.\n  Observer.prototype.setValue = function(value) {\n    if (isObject(this.target)) {\n      this.adapter(this.key).set(this.target, this.key.path, value)\n    }\n  }\n\n  // Gets the provided key on an object.\n  Observer.prototype.get = function(key, obj) {\n    return this.adapter(key).get(obj, key.path)\n  }\n\n  // Observes or unobserves a callback on the object using the provided key.\n  Observer.prototype.set = function(active, key, obj, callback) {\n    var action = active ? 'observe' : 'unobserve'\n    this.adapter(key)[action](obj, key.path, callback)\n  }\n\n  // Returns an array of all unique adapter interfaces available.\n  Observer.prototype.interfaces = function() {\n    var interfaces = Object.keys(this.options.adapters)\n\n    Object.keys(sightglass.adapters).forEach(function(i) {\n      if (!~interfaces.indexOf(i)) {\n        interfaces.push(i)\n      }\n    })\n\n    return interfaces\n  }\n\n  // Convenience function to grab the adapter for a specific key.\n  Observer.prototype.adapter = function(key) {\n    return this.options.adapters[key.i] ||\n      sightglass.adapters[key.i]\n  }\n\n  // Unobserves the entire keypath.\n  Observer.prototype.unobserve = function() {\n    var obj\n\n    this.tokens.forEach(function(token, index) {\n      if (obj = this.objectPath[index]) {\n        this.set(false, token, obj, this.update.bind(this))\n      }\n    }, this)\n\n    if (isObject(this.target)) {\n      this.set(false, this.key, this.target, this.callback)\n    }\n  }\n\n  // Check if a value is an object than can be observed.\n  function isObject(obj) {\n    return typeof obj === 'object' && obj !== null\n  }\n\n  // Error thrower.\n  function error(message) {\n    throw new Error('[sightglass] ' + message)\n  }\n\n  // Export module for Node and the browser.\n  if (typeof module !== 'undefined' && module.exports) {\n    module.exports = sightglass\n  } else if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return this.sightglass = sightglass\n    })\n  } else {\n    this.sightglass = sightglass\n  }\n}).call(this);\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/rivets/~/sightglass/index.js\n **/","module.exports = $;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"$\"\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = prestashop;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"prestashop\"\n ** module id = 7\n ** module chunks = 0\n **/","import $ from 'jquery';\n\nfunction setupRegularCheckout () {\n  function hideSubmitButton () {\n    $('#conditions-to-approve button').hide();\n  }\n\n  function refreshPaymentOptions () {\n    let params = $('#conditions-to-approve').serialize() + '&action=getPaymentOptions';\n    $.post('', params).then(resp => {\n      $('#payment-options').replaceWith(resp);\n      hideSubmitButton();\n    });\n  }\n\n  hideSubmitButton();\n  $('body').on('change', '#conditions-to-approve input[type=\"checkbox\"]', refreshPaymentOptions);\n}\n\nfunction setupAdvancedCheckout () {\n  function getSelectedPaymentOption () {\n    return $('#payment-options input[name=\"advanced-payment-option\"]:checked').attr('id');\n  }\n\n  function enableOrDisableOrderButton () {\n    var show = true;\n    $('#conditions-to-approve input[type=\"checkbox\"]').each((_, checkbox) => {\n      if (!checkbox.checked) {\n        show = false;\n      }\n    });\n\n    if (!getSelectedPaymentOption()) {\n      show = false;\n    }\n\n    $('#payment-confirmation button').attr('disabled', !show);\n  }\n\n  function confirmPayment () {\n    var option = getSelectedPaymentOption();\n    if (option) {\n      $('#pay-with-' + option + '-form').submit();\n    }\n  }\n\n  $('#payment-confirmation button').on('click', function () {\n    confirmPayment();\n  });\n\n\n  $('#payment-options input[type=\"checkbox\"][disabled]').attr('disabled', false);\n  $('body').on('change', '#conditions-to-approve input[type=\"checkbox\"]', enableOrDisableOrderButton);\n  $('body').on('change', 'input[name=\"advanced-payment-option\"]', enableOrDisableOrderButton);\n}\n\n$(document).ready(function setupCheckoutScripts () {\n  if ($('#payment-options').data('uses-advanced-payment-api')) {\n    setupAdvancedCheckout();\n  } else {\n    setupRegularCheckout();\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/checkout.js\n **/"],"sourceRoot":""}