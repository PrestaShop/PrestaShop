services:
    _defaults:
        public: true

    # Command handlers

    prestashop.adapter.currency.command_handler.toggle_currency_status:
        class: 'PrestaShop\PrestaShop\Adapter\Currency\CommandHandler\ToggleCurrencyStatusHandler'
        arguments:
            - '@=service("prestashop.adapter.legacy.configuration").get("PS_CURRENCY_DEFAULT")'
        tags:
            - { name: 'tactician.handler', command: 'PrestaShop\PrestaShop\Core\Domain\Currency\Command\ToggleCurrencyStatusCommand' }

    prestashop.adapter.currency.command_handler.delete_currency:
        class: 'PrestaShop\PrestaShop\Adapter\Currency\CommandHandler\DeleteCurrencyHandler'
        arguments:
            - '@=service("prestashop.adapter.legacy.configuration").get("PS_CURRENCY_DEFAULT")'
        tags:
            - { name: 'tactician.handler', command: 'PrestaShop\PrestaShop\Core\Domain\Currency\Command\DeleteCurrencyCommand' }

    prestashop.adapter.currency.command_handler.create_currency:
        class: 'PrestaShop\PrestaShop\Adapter\Currency\CommandHandler\CreateCurrencyHandler'
        tags:
            - { name: 'tactician.handler', command: 'PrestaShop\PrestaShop\Core\Domain\Currency\Command\CreateCurrencyCommand' }

    prestashop.adapter.currency.command_handler.update_currency:
        class: 'PrestaShop\PrestaShop\Adapter\Currency\CommandHandler\UpdateCurrencyHandler'
        tags:
            - { name: 'tactician.handler', command: 'PrestaShop\PrestaShop\Core\Domain\Currency\Command\UpdateCurrencyCommand' }

    prestashop.adapter.currency.command_handler.update_exchange_rates:
        class: 'PrestaShop\PrestaShop\Adapter\Currency\CommandHandler\UpdateExchangeRatesHandler'
        tags:
            - { name: 'tactician.handler', command: 'PrestaShop\PrestaShop\Core\Domain\Currency\Command\UpdateExchangeRatesCommand' }

    prestashop.adapter.currency.command_handler.update_live_exchange_rates:
        class: 'PrestaShop\PrestaShop\Adapter\Currency\CommandHandler\UpdateLiveExchangeRatesHandler'
        arguments:
          - '@prestashop.adapter.legacy.configuration'
          - '@prestashop.adapter.tools'
          - '@=service("prestashop.adapter.legacy.context").getContext().shop'
          - '@prestashop.adapter.shop.shop_url'
          - '@translator'
          - '@=service("prestashop.adapter.module.validator").isInstalled("cronjobs")'
          - '@=service("prestashop.adapter.legacy.context").getAdminBaseUrl()'
          - '%database_prefix%'
        tags:
            - { name: 'tactician.handler', command: 'PrestaShop\PrestaShop\Core\Domain\Currency\Command\UpdateLiveExchangeRatesCommand' }


    # Query handlers

    prestashop.adapter.currency.query_handler.get_currency_for_form_editing:
        class: 'PrestaShop\PrestaShop\Adapter\Currency\QueryHandler\GetCurrencyForFormEditingHandler'
        arguments:
            - '@=service("prestashop.adapter.legacy.context").getContext().shop.id'
        tags:
            - { name: 'tactician.handler', command: 'PrestaShop\PrestaShop\Core\Domain\Currency\Query\GetCurrencyForFormEditing' }
