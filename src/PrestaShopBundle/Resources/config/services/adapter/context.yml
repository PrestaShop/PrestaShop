services:
  _defaults:
    public: true

  # SECURITY
  PrestaShop\PrestaShop\Adapter\Security\Admin:
    autowire: true
    arguments:
      $userProvider: "@prestashop.security.admin.provider"
    tags:
      - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest }

  prestashop.adapter.legacy_context_loader:
    class: 'PrestaShop\PrestaShop\Adapter\LegacyContextLoader'
    arguments: [ '@=service("prestashop.adapter.legacy.context").getContext()' ]
