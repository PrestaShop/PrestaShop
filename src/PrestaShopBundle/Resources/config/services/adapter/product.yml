imports:
  - { resource: product/*.yml }

services:
  _defaults:
    public: true

  PrestaShop\PrestaShop\Adapter\Product\AdminProductDataProvider:
    decorates: prestashop.core.admin.data_provider.product_interface
    arguments:
      - "@doctrine.orm.entity_manager"
      - "@prestashop.adapter.image_manager"
      - "@prestashop.static_cache.adapter"
    public: false

  prestashop.adapter.admin.data_provider.product:
    alias: PrestaShop\PrestaShop\Adapter\Product\AdminProductDataProvider

  PrestaShop\PrestaShop\Adapter\Product\AdminProductDataUpdater:
    class: PrestaShop\PrestaShop\Adapter\Product\AdminProductDataUpdater
    decorates: prestashop.core.admin.data_updater.product_interface
    public: false
    arguments:
      - "@prestashop.core.hook.dispatcher"
      - "@prestashop.static_cache.adapter"

  prestashop.adapter.admin.data_updater.product:
    alias: PrestaShop\PrestaShop\Adapter\Product\AdminProductDataUpdater

  PrestaShop\PrestaShop\Adapter\Product\AdminProductWrapper:
    arguments:
      - "@translator"
      - "@=service('prestashop.adapter.legacy.context').getContext().employee.getAssociatedShops()"
      - "@prestashop.core.localization.locale.context_locale"
      - "@prestashop.utils.float_parser"

  prestashop.adapter.admin.wrapper.product:
    alias: PrestaShop\PrestaShop\Adapter\Product\AdminProductWrapper

  PrestaShop\PrestaShop\Adapter\Attribute\AdminAttributeGeneratorControllerWrapper: ~

  prestashop.adapter.admin.controller.attribute_generator:
    alias: PrestaShop\PrestaShop\Adapter\Attribute\AdminAttributeGeneratorControllerWrapper

  PrestaShop\PrestaShop\Adapter\Product\FilterCategoriesRequestPurifier: ~

  prestashop.adapter.product.filter_categories_request_purifier:
    alias: 'PrestaShop\PrestaShop\Adapter\Product\FilterCategoriesRequestPurifier'

  prestashop.adapter.product.list_parameters_updater:
    class: 'PrestaShop\PrestaShop\Adapter\Product\ListParametersUpdater'

  PrestaShop\PrestaShop\Adapter\Product\CommandHandler\AssignProductToCategoryHandler:
    tags:
      - { name: tactician.handler, command: PrestaShop\PrestaShop\Core\Domain\Product\Command\AssignProductToCategoryCommand }

  PrestaShop\PrestaShop\Adapter\Product\CommandHandler\UpdateProductStatusHandler:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\ProductStatusUpdater'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Command\UpdateProductStatusCommand

  PrestaShop\PrestaShop\Adapter\Product\QueryHandler\SearchProductsHandler:
    arguments:
      - '@=service("prestashop.adapter.legacy.context").getContext().language.id'
      - '@prestashop.core.localization.locale.context_locale'
      - '@prestashop.adapter.tools'
      - '@prestashop.adapter.data_provider.currency'
      - '@prestashop.adapter.context_state_manager'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Query\SearchProducts

  PrestaShop\PrestaShop\Adapter\Product\QueryHandler\SearchProductsForAssociationHandler:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductRepository'
      - '@prestashop.adapter.product.image.product_image_url_factory'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Query\SearchProductsForAssociation

  PrestaShop\PrestaShop\Adapter\Product\QueryHandler\GetProductIsEnabledHandler:
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Query\GetProductIsEnabled

  PrestaShop\PrestaShop\Adapter\Product\Grid\Data\Factory\ProductGridDataFactoryDecorator:
    arguments:
      - '@prestashop.core.grid.data.factory.product'
      - '@prestashop.core.localization.locale.repository'
      - '@=service("prestashop.adapter.legacy.context").getContext().language.getLocale()'
      - '@=service("prestashop.adapter.legacy.configuration").get("PS_CURRENCY_DEFAULT")'
      - '@prestashop.adapter.tax.tax_computer'
      - '@=service("prestashop.adapter.legacy.context").getContext().country.id'
      - '@prestashop.adapter.product.image.product_image_url_factory'
      - '@translator'
      - "@=service('prestashop.adapter.legacy.configuration').getBoolean('PS_TAX')"
      - "@=service('prestashop.adapter.legacy.configuration').getBoolean('PS_USE_ECOTAX')"
      - "@=service('prestashop.adapter.legacy.configuration').getInt('PS_ECOTAX_TAX_RULES_GROUP_ID')"
      - "@prestashop.adapter.shop.repository.shop_repository"
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductMultiShopRepository'

  PrestaShop\PrestaShop\Adapter\Product\Grid\Data\Factory\ProductShopsGridDataFactoryDecorator:
    parent: PrestaShop\PrestaShop\Adapter\Product\Grid\Data\Factory\ProductGridDataFactoryDecorator
    arguments:
      $productGridDataFactory: '@prestashop.core.grid.data.factory.product.shops'
    public: false

  PrestaShop\PrestaShop\Adapter\Product\Grid\Data\Factory\ProductLightGridDataFactoryDecorator:
    arguments:
      - '@prestashop.core.grid.data.factory.product'
      - '@prestashop.core.localization.locale.repository'
      - '@=service("prestashop.adapter.legacy.context").getContext().language.getLocale()'
      - '@=service("prestashop.adapter.legacy.configuration").get("PS_CURRENCY_DEFAULT")'
      - '@=service("prestashop.adapter.legacy.configuration").get("PS_STOCK_MANAGEMENT")'

  PrestaShop\PrestaShop\Adapter\Product\QueryHandler\GetProductForEditingHandler:
    arguments:
      - '@prestashop.core.util.number.number_extractor'
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductMultiShopRepository'
      - '@prestashop.adapter.category.repository.category_repository'
      - '@PrestaShop\PrestaShop\Adapter\Product\Stock\Repository\StockAvailableMultiShopRepository'
      - '@prestashop.adapter.product.virtual_product.repository.virtual_product_file_repository'
      - '@PrestaShop\PrestaShop\Adapter\Product\Image\Repository\ProductImageMultiShopRepository'
      - '@prestashop.adapter.attachment.attachment_repository'
      - '@prestashop.adapter.tax.tax_computer'
      - "@=service('prestashop.adapter.legacy.configuration').getInt('PS_COUNTRY_DEFAULT')"
      - '@prestashop.adapter.product.options.redirect_target_provider'
      - '@prestashop.adapter.product.image.product_image_url_factory'
      - '@prestashop.adapter.product.specific_price.repository.specific_price_repository'
      - '@prestashop.adapter.legacy.configuration'
      - '@prestashop.core.category.name_builder.category_display_name_builder'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Query\GetProductForEditing

  PrestaShop\PrestaShop\Adapter\Product\CommandHandler\AddProductHandler:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductMultiShopRepository'
      - '@prestashop.adapter.tools'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Command\AddProductCommand

  PrestaShop\PrestaShop\Adapter\Product\CommandHandler\SetProductTagsHandler:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductRepository'
      - '@PrestaShop\PrestaShop\Adapter\Product\Update\ProductTagUpdater'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Command\SetProductTagsCommand

  PrestaShop\PrestaShop\Adapter\Product\CommandHandler\UpdateProductsPositionsHandler:
    arguments:
      - '@prestashop.core.grid.product.position_definition'
      - '@prestashop.core.grid.position.position_update_factory'
      - '@prestashop.core.grid.position.doctrine_grid_position_updater'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Command\UpdateProductsPositionsCommand

  PrestaShop\PrestaShop\Adapter\Product\CommandHandler\RemoveAllProductTagsHandler:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductRepository'
      - '@PrestaShop\PrestaShop\Adapter\Product\Update\ProductTagUpdater'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Command\RemoveAllProductTagsCommand

  PrestaShop\PrestaShop\Adapter\Product\CommandHandler\SetAssociatedProductCategoriesHandler:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductRepository'
      - '@PrestaShop\PrestaShop\Adapter\Product\Update\ProductCategoryUpdater'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Command\SetAssociatedProductCategoriesCommand

  PrestaShop\PrestaShop\Adapter\Product\CommandHandler\RemoveAllAssociatedProductCategoriesHandler:
    arguments:
      - '@=service("prestashop.adapter.legacy.configuration").getInt("PS_HOME_CATEGORY")'
      - '@PrestaShop\PrestaShop\Adapter\Product\Update\ProductCategoryUpdater'
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductRepository'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Command\RemoveAllAssociatedProductCategoriesCommand

  PrestaShop\PrestaShop\Adapter\Product\CommandHandler\SetCarriersHandler:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductMultiShopRepository'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Command\SetCarriersCommand

  PrestaShop\PrestaShop\Adapter\Product\QueryHandler\GetProductSupplierOptionsHandler:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductSupplierRepository'
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductRepository'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Supplier\Query\GetProductSupplierOptions

  PrestaShop\PrestaShop\Adapter\Product\Supplier\QueryHandler\GetAssociatedSuppliersHandler:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductSupplierRepository'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Supplier\Query\GetAssociatedSuppliers

  PrestaShop\PrestaShop\Adapter\Product\Supplier\CommandHandler\SetSuppliersHandler:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Update\ProductSupplierUpdater'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Supplier\Command\SetSuppliersCommand

  PrestaShop\PrestaShop\Adapter\Product\Supplier\CommandHandler\SetProductDefaultSupplierHandler:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Update\ProductSupplierUpdater'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Supplier\Command\SetProductDefaultSupplierCommand

  PrestaShop\PrestaShop\Adapter\Product\Supplier\CommandHandler\UpdateProductSuppliersHandler:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Update\ProductSupplierUpdater'
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductSupplierRepository'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Supplier\Command\UpdateProductSuppliersCommand

  PrestaShop\PrestaShop\Adapter\Product\Supplier\CommandHandler\RemoveAllAssociatedProductSuppliersHandler:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Update\ProductSupplierUpdater'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Supplier\Command\RemoveAllAssociatedProductSuppliersCommand

  PrestaShop\PrestaShop\Adapter\Product\Update\ProductAttachmentUpdater:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductRepository'
      - '@prestashop.adapter.attachment.attachment_repository'

  PrestaShop\PrestaShop\Adapter\Product\Validate\ProductValidator:
    arguments:
      - '@=service("prestashop.adapter.legacy.configuration").get("PS_LANG_DEFAULT")'

  PrestaShop\PrestaShop\Adapter\Product\Repository\ProductRepository:
    arguments:
      - '@doctrine.dbal.default_connection'
      - '%database_prefix%'
      - '@PrestaShop\PrestaShop\Adapter\Product\Validate\ProductValidator'
      - '@prestashop.adapter.tax_rules_group.repository.tax_rules_group_repository'
      - '@prestashop.adapter.manufacturer.repository.manufacturer_repository'
      - '@PrestaShop\PrestaShop\Adapter\Product\Pack\Repository\ProductPackRepository'

  PrestaShop\PrestaShop\Adapter\Product\Repository\ProductMultiShopRepository:
    arguments:
      - '@doctrine.dbal.default_connection'
      - '%database_prefix%'
      - '@PrestaShop\PrestaShop\Adapter\Product\Validate\ProductValidator'
      - '@=service("prestashop.adapter.legacy.context").getContext().shop.id_category'
      - '@prestashop.adapter.tax_rules_group.repository.tax_rules_group_repository'
      - '@prestashop.adapter.manufacturer.repository.manufacturer_repository'

  PrestaShop\PrestaShop\Adapter\Product\Update\ProductTypeUpdater:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductRepository'
      - '@PrestaShop\PrestaShop\Adapter\Product\Pack\Update\ProductPackUpdater'
      - '@PrestaShop\PrestaShop\Adapter\Product\Combination\Update\CombinationDeleter'
      - '@prestashop.adapter.product.virtual_product.update.virtual_product_updater'
      - '@prestashop.adapter.product.stock.update.product_stock_updater'
      - '@PrestaShop\PrestaShop\Adapter\Product\Pack\Repository\ProductPackRepository'

  PrestaShop\PrestaShop\Adapter\Product\CommandHandler\DeleteProductHandler:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductRepository'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Command\DeleteProductCommand

  PrestaShop\PrestaShop\Adapter\Product\CommandHandler\BulkDeleteProductHandler:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductRepository'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Command\BulkDeleteProductCommand

  PrestaShop\PrestaShop\Adapter\Product\CommandHandler\BulkDuplicateProductHandler:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\ProductDuplicator'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Command\BulkDuplicateProductCommand

  PrestaShop\PrestaShop\Adapter\Product\CommandHandler\BulkUpdateProductStatusHandler:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\ProductStatusUpdater'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Command\BulkUpdateProductStatusCommand

  PrestaShop\PrestaShop\Adapter\Product\Attachment\CommandHandler\SetAssociatedProductAttachmentsHandler:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Update\ProductAttachmentUpdater'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Attachment\Command\SetAssociatedProductAttachmentsCommand

  PrestaShop\PrestaShop\Adapter\Product\Attachment\CommandHandler\RemoveAllAssociatedProductAttachmentsHandler:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Update\ProductAttachmentUpdater'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Attachment\Command\RemoveAllAssociatedProductAttachmentsCommand

  PrestaShop\PrestaShop\Adapter\Product\Validate\ProductSupplierValidator:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductRepository'
      - '@prestashop.adapter.supplier.repository.supplier_repository'
      - '@prestashop.adapter.currency.repository.currency_repository'

  PrestaShop\PrestaShop\Adapter\Product\Repository\ProductSupplierRepository:
    arguments:
      - '@doctrine.dbal.default_connection'
      - '%database_prefix%'
      - '@PrestaShop\PrestaShop\Adapter\Product\Validate\ProductSupplierValidator'

  PrestaShop\PrestaShop\Adapter\Product\Update\ProductSupplierUpdater:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductMultiShopRepository'
      - '@PrestaShop\PrestaShop\Adapter\Product\Combination\Repository\CombinationRepository'
      - '@prestashop.adapter.supplier.repository.supplier_repository'
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductSupplierRepository'
      - "@=service('prestashop.adapter.legacy.configuration').get('PS_CURRENCY_DEFAULT')"

  PrestaShop\PrestaShop\Adapter\Product\Update\RelatedProductsUpdater:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductRepository'

  PrestaShop\PrestaShop\Adapter\Product\CommandHandler\SetRelatedProductsHandler:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Update\RelatedProductsUpdater'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Command\SetRelatedProductsCommand

  PrestaShop\PrestaShop\Adapter\Product\QueryHandler\GetRelatedProductsHandler:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductRepository'
      - '@PrestaShop\PrestaShop\Adapter\Product\Image\Repository\ProductImageRepository'
      - '@prestashop.adapter.product.image.product_image_url_factory'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Query\GetRelatedProducts

  PrestaShop\PrestaShop\Adapter\Product\CommandHandler\RemoveAllRelatedProductsHandler:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Update\RelatedProductsUpdater'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Command\RemoveAllRelatedProductsCommand

  PrestaShop\PrestaShop\Adapter\Product\Repository\TagRepository:
    arguments:
      - '@doctrine.dbal.default_connection'
      - '%database_prefix%'

  PrestaShop\PrestaShop\Adapter\Product\Update\ProductTagUpdater:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\TagRepository'
      - '@PrestaShop\PrestaShop\Adapter\Product\Update\ProductIndexationUpdater'

  PrestaShop\PrestaShop\Adapter\Product\Update\ProductCategoryUpdater:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductRepository'

  PrestaShop\PrestaShop\Adapter\Product\CommandHandler\DuplicateProductHandler:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\ProductDuplicator'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Command\DuplicateProductCommand

  PrestaShop\PrestaShop\Adapter\Product\Shop\CommandHandler\CopyProductToShopHandler:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Update\ProductShopUpdater'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Shop\Command\CopyProductToShopCommand

  PrestaShop\PrestaShop\Adapter\Product\Shop\CommandHandler\DeleteProductFromShopsHandler:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductMultiShopRepository'
      - '@PrestaShop\PrestaShop\Adapter\Product\Combination\Repository\CombinationRepository'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Shop\Command\DeleteProductFromShopsCommand

  PrestaShop\PrestaShop\Adapter\Product\ProductDuplicator:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductRepository'
      - '@prestashop.core.hook.dispatcher'
      - "@=service('prestashop.adapter.legacy.configuration').getBoolean('PS_SEARCH_INDEXATION')"
      - '@prestashop.adapter.shop.context'
      - '@translator'
      - '@prestashop.core.util.string.string_modifier'

  PrestaShop\PrestaShop\Adapter\Product\ProductStatusUpdater:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductRepository'
      - '@PrestaShop\PrestaShop\Adapter\Product\Update\ProductIndexationUpdater'

  PrestaShop\PrestaShop\Adapter\Product\CommandHandler\UpdateProductTypeHandler:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Update\ProductTypeUpdater'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Command\UpdateProductTypeCommand

  PrestaShop\PrestaShop\Adapter\Product\Update\ProductIndexationUpdater:
    arguments:
      - "@=service('prestashop.adapter.legacy.configuration').getBoolean('PS_SEARCH_INDEXATION')"

  PrestaShop\PrestaShop\Adapter\Product\Repository\ProductPreviewRepository:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductRepository'
      - '@PrestaShop\PrestaShop\Adapter\Product\Image\Repository\ProductImageRepository'

  PrestaShop\PrestaShop\Adapter\Product\Update\ProductShopUpdater:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductMultiShopRepository'
      - '@PrestaShop\PrestaShop\Adapter\Product\Stock\Repository\StockAvailableMultiShopRepository'
      - '@prestashop.adapter.shop.repository.shop_repository'
      - '@PrestaShop\PrestaShop\Adapter\Product\Image\Repository\ProductImageMultiShopRepository'
      - '@prestashop.adapter.product.stock.update.product_stock_updater'
      - '@PrestaShop\PrestaShop\Adapter\Product\Combination\Repository\CombinationRepository'
      - '@PrestaShop\PrestaShop\Adapter\Product\Combination\Update\CombinationStockUpdater'
      - '@PrestaShop\PrestaShop\Adapter\Product\Combination\Update\DefaultCombinationUpdater'

  PrestaShop\PrestaShop\Adapter\Product\CommandHandler\UpdateProductHandler:
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Update\Filler\ProductFiller'
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductMultiShopRepository'
      - '@PrestaShop\PrestaShop\Adapter\Product\Update\ProductIndexationUpdater'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Command\UpdateProductCommand

  PrestaShop\PrestaShop\Adapter\Product\Stock\CommandHandler\UpdateProductStockAvailableHandler:
    arguments:
      - '@prestashop.adapter.product.stock.update.product_stock_updater'
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductMultiShopRepository'
      - '@PrestaShop\PrestaShop\Adapter\Product\Combination\Repository\CombinationRepository'
    tags:
      - name: tactician.handler
        command: PrestaShop\PrestaShop\Core\Domain\Product\Stock\Command\UpdateProductStockAvailableCommand

  PrestaShop\PrestaShop\Adapter\Product\Update\Filler\ProductFiller:
    arguments:
      - !tagged core.product_filler

  PrestaShop\PrestaShop\Adapter\Product\Update\Filler\BasicInformationFiller:
    arguments:
      - '@=service("prestashop.adapter.legacy.configuration").get("PS_LANG_DEFAULT")'
    tags:
      # its important that BasicInformationFiller is prioritized before the SeoFiller, because of link_rewrite overriding
      - { name: 'core.product_filler', priority: 10 }

  PrestaShop\PrestaShop\Adapter\Product\Update\Filler\OptionsFiller:
    tags: [ 'core.product_filler' ]

  PrestaShop\PrestaShop\Adapter\Product\Update\Filler\PricesFiller:
    tags: [ 'core.product_filler' ]
    arguments:
      - '@prestashop.core.util.number.number_extractor'
      - '@prestashop.adapter.legacy.configuration'

  PrestaShop\PrestaShop\Adapter\Product\Update\Filler\SeoFiller:
    tags: [ 'core.product_filler' ]
    arguments:
      - '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductRepository'
      - '@prestashop.adapter.category.repository.category_repository'
      - '@prestashop.adapter.tools'

  PrestaShop\PrestaShop\Adapter\Product\Update\Filler\DetailsFiller:
    tags: [ 'core.product_filler' ]

  PrestaShop\PrestaShop\Adapter\Product\Update\Filler\ShippingFiller:
    tags: [ 'core.product_filler' ]

  PrestaShop\PrestaShop\Adapter\Product\Update\Filler\StockInformationFiller:
    tags: [ 'core.product_filler' ]
