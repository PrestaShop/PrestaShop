services:
  _defaults:
    public: false
    autowire: true
    autoconfigure: true
    bind:
      $commandBus: '@prestashop.core.command_bus'
      $contextShopId: "@=service('prestashop.adapter.shop.context').getContextShopID()"
      $defaultShopId: '@=service("prestashop.adapter.legacy.configuration").getInt("PS_SHOP_DEFAULT")'
      $isMultishopEnabled: '@=service("prestashop.adapter.multistore_feature").isUsed()'
      $contextEmployeeId: '@=service("prestashop.adapter.legacy.context").getContext().employee.id'
      PrestaShop\PrestaShop\Core\Form\IdentifiableObject\CommandBuilder\Product\ProductCommandsBuilderInterface $commandsBuilder: '@PrestaShop\PrestaShop\Core\Form\IdentifiableObject\CommandBuilder\Product\ProductCommandsBuilder'
      PrestaShop\PrestaShop\Core\Form\IdentifiableObject\CommandBuilder\Product\Combination\CombinationCommandsBuilderInterface $commandsBuilder: '@PrestaShop\PrestaShop\Core\Form\IdentifiableObject\CommandBuilder\Product\Combination\CombinationCommandsBuilder'

  PrestaShop\PrestaShop\Core\Form\IdentifiableObject\DataHandler\:
    resource: '../../../Core/Form/IdentifiableObject/DataHandler/*'

  PrestaShop\PrestaShop\Core\Form\IdentifiableObject\DataHandler\CustomerFormDataHandler:
    arguments:
      - '@prestashop.core.command_bus'
      - '@=service("prestashop.adapter.legacy.context").getContext().shop.id'
      - '@=service("prestashop.core.b2b.b2b_feature").isActive()'
      - '@prestashop.adapter.group.provider.default_groups_provider'

  PrestaShop\PrestaShop\Core\Form\IdentifiableObject\DataHandler\CurrencyFormDataHandler:
    arguments:
      $cacheClearerCollection:
        - '@prestashop.adapter.cache.clearer.symfony_cache_clearer'
        - '@prestashop.adapter.cache.clearer.smarty_cache_clearer'

  PrestaShop\PrestaShop\Core\Form\IdentifiableObject\DataHandler\WebserviceKeyFormDataHandler:
    class: 'PrestaShop\PrestaShop\Core\Form\IdentifiableObject\DataHandler\WebserviceKeyFormDataHandler'
    arguments:
      - '@prestashop.core.command_bus'
      - '@=service("prestashop.adapter.legacy.context").getContext().shop.id'

  PrestaShop\PrestaShop\Core\Form\IdentifiableObject\DataHandler\CategoryFormDataHandler:
    arguments:
      - '@prestashop.core.command_bus'
      - '@prestashop.adapter.image.uploader.category_cover_image_uploader'
      - '@prestashop.adapter.image.uploader.category_thumbnail_image_uploader'
      - '@prestashop.adapter.image.uploader.category_menu_thumbnail_image_uploader'
      - '@PrestaShop\PrestaShop\Core\Category\Provider\MenuThumbnailAvailableKeyProvider'

  PrestaShop\PrestaShop\Core\Form\IdentifiableObject\DataHandler\RootCategoryFormDataHandler:
    arguments:
      - '@prestashop.core.command_bus'
      - '@prestashop.adapter.image.uploader.category_cover_image_uploader'
      - '@prestashop.adapter.image.uploader.category_thumbnail_image_uploader'
      - '@prestashop.adapter.image.uploader.category_menu_thumbnail_image_uploader'
      - '@PrestaShop\PrestaShop\Core\Category\Provider\MenuThumbnailAvailableKeyProvider'

  PrestaShop\PrestaShop\Core\Form\IdentifiableObject\DataHandler\ManufacturerFormDataHandler:
    arguments:
      $imageUploader: '@prestashop.adapter.image.uploader.manufacturer_image_uploader'

  PrestaShop\PrestaShop\Core\Form\IdentifiableObject\DataHandler\EmployeeFormDataHandler:
    arguments:
      - '@prestashop.core.command_bus'
      - '@=service("prestashop.adapter.shop.context").getShops(true, true)'
      - '@=service("prestashop.adapter.legacy.configuration").getInt("_PS_ADMIN_PROFILE_")'
      - '@prestashop.adapter.employee.form_access_checker'
      - '@prestashop.adapter.employee.data_provider'
      - '@prestashop.core.crypto.hashing'
      - '@prestashop.adapter.image.uploader.employee_image_uploader'
      - '@=service("prestashop.adapter.legacy.configuration").getInt(constant("PrestaShop\\PrestaShop\\Core\\Security\\PasswordPolicyConfiguration::CONFIGURATION_MINIMUM_LENGTH"))'
      - '@=service("prestashop.adapter.legacy.configuration").getInt(constant("PrestaShop\\PrestaShop\\Core\\Security\\PasswordPolicyConfiguration::CONFIGURATION_MAXIMUM_LENGTH"))'
      - '@=service("prestashop.adapter.legacy.configuration").getInt(constant("PrestaShop\\PrestaShop\\Core\\Security\\PasswordPolicyConfiguration::CONFIGURATION_MINIMUM_SCORE"))'

  PrestaShop\PrestaShop\Core\Form\IdentifiableObject\DataHandler\ProfileFormDataHandler:
    arguments:
      $imageUploader: '@prestashop.adapter.image.uploader.profile_image_uploader'

  PrestaShop\PrestaShop\Core\Form\IdentifiableObject\DataHandler\SupplierFormDataHandler:
    arguments:
      $imageUploader: '@PrestaShop\PrestaShop\Adapter\Image\Uploader\SupplierImageUploader'

  PrestaShop\PrestaShop\Core\Form\IdentifiableObject\DataHandler\CatalogPriceRuleFormDataHandler:
    arguments:
      $contextShopId: '@=service("prestashop.adapter.legacy.context").getContext().shop.id'

  PrestaShop\PrestaShop\Core\Form\IdentifiableObject\DataHandler\AddressFormDataHandler:
    arguments:
      $customerDataProvider: '@prestashop.adapter.data_provider.customer'
