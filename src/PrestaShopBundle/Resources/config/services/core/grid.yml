services:
    _defaults:
        public: true

    # Grid data providers
    prestashop.core.grid.data_provider.log:
        class: 'PrestaShop\PrestaShop\Core\Grid\DataProvider\DoctrineGridDataProvider'
        arguments:
            - '@prestashop.core.admin.log.repository'

    prestashop.core.grid.data_provider.manufacturer:
        class: 'PrestaShop\PrestaShop\Core\Grid\DataProvider\DoctrineGridDataProvider'
        arguments:
            - '@prestashop.core.api.manufacturer.repository'

    prestashop.core.grid.data_provider.manufacturer_address:
        class: 'PrestaShop\PrestaShop\Core\Grid\DataProvider\DoctrineGridDataProvider'
        arguments:
            - '@prestashop.core.grid.query.doctrine.manufacturer_address'

    # Grid definition factories
    prestashop.core.grid.definition.factory.abstract_grid_definition:
        class: 'PrestaShop\PrestaShop\Core\Grid\Definition\Factory\AbstractGridDefinitionFactory'
        abstract: true
        calls:
            - [setTranslator, ['@translator']]

    prestashop.core.grid.definition.factory.log_definition:
        class: 'PrestaShop\PrestaShop\Core\Grid\Definition\Factory\LogGridDefinitionFactory'
        parent: 'prestashop.core.grid.definition.factory.abstract_grid_definition'
        arguments:
          - "@=service('router').generate('admin_common_reset_search', {'controller': 'logs', 'action': 'index'})"
          - "@=service('router').generate('admin_logs')"
        public: true

    prestashop.core.grid.definition.factory.manufacturer_definition:
        class: 'PrestaShop\PrestaShop\Core\Grid\Definition\Factory\Catalog\Manufacturer\ManufacturerGridDefinitionFactory'
        parent: 'prestashop.core.grid.definition.factory.abstract_grid_definition'
        arguments:
          - '@prestashop.adapter.image_manager'
          - "@=service('router').generate('admin_common_reset_search', {'controller': 'manufacturer', 'action': 'index'})"
          - "@=service('router').generate('admin_manufacturers')"
        public: true

    prestashop.core.grid.definition.factory.manufacturer_address_definition:
        class: 'PrestaShop\PrestaShop\Core\Grid\Definition\Factory\Catalog\Manufacturer\AddressGridDefinitionFactory'
        parent: 'prestashop.core.grid.definition.factory.abstract_grid_definition'
        arguments:
          - "@=service('router').generate('admin_common_reset_search', {'controller': 'manufacturer', 'action': 'index'})"
          - "@=service('router').generate('admin_manufacturers')"
        public: true

    # Grid factories
    prestashop.core.grid.log_factory:
        class: 'PrestaShop\PrestaShop\Core\Grid\GridFactory'
        arguments:
            - '@prestashop.core.grid.definition.factory.log_definition'
            - '@prestashop.core.grid.data_provider.log'
            - '@prestashop.hook.dispatcher'
            - '@form.factory'

    prestashop.core.grid.manufacturer_factory:
        class: 'PrestaShop\PrestaShop\Core\Grid\GridFactory'
        arguments:
            - '@prestashop.core.grid.definition.factory.manufacturer_definition'
            - '@prestashop.core.grid.data_provider.manufacturer'
            - '@prestashop.hook.dispatcher'
            - '@form.factory'

    prestashop.core.grid.manufacturer_address_factory:
        class: 'PrestaShop\PrestaShop\Core\Grid\GridFactory'
        arguments:
            - '@prestashop.core.grid.definition.factory.manufacturer_address_definition'
            - '@prestashop.core.grid.data_provider.manufacturer_address'
            - '@prestashop.hook.dispatcher'
            - '@form.factory'

    # Grid presenter
    prestashop.core.grid.presenter.grid_presenter:
        class: 'PrestaShop\PrestaShop\Core\Grid\Presenter\GridPresenter'
        arguments:
            - '@form.factory'

    # Doctrine query builder
    prestashop.core.grid.query.doctrine.manufacturer_address:
        class: 'PrestaShop\PrestaShop\Core\Grid\Query\Doctrine\ManufacturerAddressQueryBuilder'
        arguments:
            - '@doctrine.dbal.default_connection'
            - '%database_prefix%'
