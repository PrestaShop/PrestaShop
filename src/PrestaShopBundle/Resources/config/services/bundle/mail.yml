services:
  _defaults:
    public: true

  prestashop.service.mail.mail_template_folder_catalog:
    class: 'PrestaShopBundle\Service\Mail\MailTemplateFolderCatalog'
    arguments:
      - '%mail_themes_dir%'

  prestashop.service.mail.mail_template_parameters_builder:
    class: 'PrestaShopBundle\Service\Mail\MailTemplateParametersBuilder'
    arguments:
      -
        emailPublicWebRoot: "@=service('prestashop.adapter.legacy.context').getRootUrl()"

  prestashop.service.mail.mail_template_renderer:
    class: 'PrestaShopBundle\Service\Mail\MailTemplateRenderer'
    arguments:
      - '@templating.engine.twig'
      - '@prestashop.service.mail.mail_template_parameters_builder'

  prestashop.service.mail.mail_template_generator:
    class: 'PrestaShopBundle\Service\Mail\MailTemplateGenerator'
    arguments:
      - '@prestashop.service.mail.mail_template_folder_catalog'
      - '@prestashop.service.mail.mail_template_renderer'
    calls:
      - method: setLogger
        arguments:
          - '@logger'
