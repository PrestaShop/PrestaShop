services:
    prestashop.bundle.routing.module_route_loader:
        class: 'PrestaShopBundle\Routing\YamlModuleLoader'
        arguments:
          - '@=service("prestashop.module_kernel.repository").getActiveModulesPaths()'
        tags: [routing.loader]

    prestashop.bundle.routing.legacy_url_converter:
        class: 'PrestaShopBundle\Routing\Converter\LegacyUrlConverter'
        arguments:
            $router: '@router'
            $legacyRouteProvider: '@=parameter("kernel.environment") == "prod" ? service("prestashop.bundle.routing.cache_provider") : service("prestashop.bundle.routing.router_provider")'

    prestashop.bundle.routing.router_provider:
        class: 'PrestaShopBundle\Routing\Converter\RouterProvider'
        arguments:
            $router: '@router'

    prestashop.bundle.routing.cache_provider:
        class: 'PrestaShopBundle\Routing\Converter\CacheProvider'
        arguments:
            $legacyRouteProvider: '@prestashop.bundle.routing.router_provider'
            $cache: '@cache.app'
