services:
  _defaults:
    public: true

  PrestaShopBundle\Bridge\Smarty\SmartyBridge:
    arguments:
      - "@prestashop.adapter.legacy.context"
      - "@prestashop.adapter.legacy.configuration"
      - !tagged prestashop.bridge.smarty_configurator

  PrestaShopBundle\Bridge\Smarty\BreadcrumbsAndTitleConfigurator:
    arguments:
      - "@prestashop.adapter.legacy.context"
      - "@prestashop.adapter.legacy.configuration"
    tags: [ 'prestashop.bridge.smarty_configurator' ]

  PrestaShopBundle\Bridge\Smarty\HeaderConfigurator:
    arguments:
      - "@translator"
      - "@prestashop.adapter.legacy.context"
      - "@prestashop.hook.dispatcher"
      - "@prestashop.adapter.legacy.configuration"
    tags:
      # Header configurator must be executed early as it executes hooks that may add JS or CSS files
      - { name: 'prestashop.bridge.smarty_configurator', priority: 42 }

  PrestaShopBundle\Bridge\Smarty\ModalConfigurator:
    tags: [ 'prestashop.bridge.smarty_configurator' ]

  PrestaShopBundle\Bridge\Smarty\NotificationsConfigurator:
    arguments:
      - "@prestashop.adapter.legacy.configuration"
    tags: [ 'prestashop.bridge.smarty_configurator' ]

  PrestaShopBundle\Bridge\Smarty\ToolbarFlagsConfigurator:
    arguments:
      - "@prestashop.adapter.legacy.configuration"
      - '@PrestaShop\PrestaShop\Core\Help\Documentation'
      - "@=service('prestashop.adapter.environment').isDebug()"
    tags: [ 'prestashop.bridge.smarty_configurator' ]

  PrestaShopBundle\Bridge\Smarty\FooterConfigurator:
    arguments:
      - "@prestashop.adapter.legacy.context"
    tags:
      # Footer configurator must be executed late to make sure js and css files are up to date
      - { name: 'prestashop.bridge.smarty_configurator', priority: -5 }

  PrestaShopBundle\Bridge\Smarty\LayoutConfigurator:
    autowire: true
    tags:
      # Layout configurator should be the last one executed
      - { name: 'prestashop.bridge.smarty_configurator', priority: -10 }
