services:
  _defaults:
    public: true

  PrestaShopBundle\Bridge\AdminController\ControllerConfigurationFactory:
    autowire: true
    arguments:
      $link: '@=service("prestashop.adapter.legacy.context").getContext().link'

  PrestaShopBundle\Bridge\AdminController\LegacyControllerBridgeFactory:
    arguments:
      - '@prestashop.adapter.multistore_feature'
      - '@prestashop.adapter.legacy.context'
      - '@prestashop.core.hook.dispatcher'

  PrestaShopBundle\Bridge\AdminController\Listener\InitFrameworkBridgeControllerListener:
    autowire: true
    tags:
      - { name: kernel.event_listener, event: kernel.controller }

  PrestaShopBundle\Bridge\SymfonyLayoutFeature:
    autowire: true
    arguments:
      $enabledByEnv: '%env(bool:USE_SYMFONY_LAYOUT)%'

  PrestaShopBundle\Bridge\SymfonyLayoutFeatureInterface: '@PrestaShopBundle\Bridge\SymfonyLayoutFeature'
