services:
  _defaults:
    public: false
    autoconfigure: true
    autowire: true
    bind:
      $titleFormBuilder: '@prestashop.core.form.identifiable_object.builder.title_form_builder'
      $titleFormHandler: '@prestashop.core.form.identifiable_object.handler.title_form_handler'

  prestashop.core.admin.multistore:
    class: PrestaShopBundle\Controller\Admin\MultistoreController
    parent: PrestaShopBundle\Controller\Admin\FrameworkBundleAdminController
    autoconfigure: false
    autowire: false
    public: true
    properties:
      multiStoreFeature: "@prestashop.adapter.multistore_feature"
      multiStoreContext: "@prestashop.adapter.shop.context"
      entityManager: "@doctrine.orm.entity_manager"
      productRepository: '@PrestaShop\PrestaShop\Adapter\Product\Repository\ProductRepository'
    calls:
      - [ setContainer, [ '@service_container' ] ]


  # Every single controller should be loaded here, except the legacy ones, and some misplaced files are also excluded.
  PrestaShopBundle\Controller\:
    resource: "%kernel.project_dir%/src/PrestaShopBundle/Controller/*"
    exclude:
      - "%kernel.project_dir%/src/PrestaShopBundle/Controller/Api"
      - "%kernel.project_dir%/src/PrestaShopBundle/Controller/ArgumentResolver"
      - "%kernel.project_dir%/src/PrestaShopBundle/Controller/Exception"
