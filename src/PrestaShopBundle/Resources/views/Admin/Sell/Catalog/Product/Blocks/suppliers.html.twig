{# **
 * Copyright since 2007 PrestaShop SA and Contributors
 * PrestaShop is an International Registered Trademark & Property of PrestaShop SA
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.md.
 * It is also available through the world-wide-web at this URL:
 * https://opensource.org/licenses/OSL-3.0
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@prestashop.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade PrestaShop to newer
 * versions in the future. If you wish to customize PrestaShop for your
 * needs please refer to https://devdocs.prestashop.com/ for more information.
 *
 * @author    PrestaShop SA and Contributors <contact@prestashop.com>
 * @copyright Since 2007 PrestaShop SA and Contributors
 * @license   https://opensource.org/licenses/OSL-3.0 Open Software License (OSL 3.0)
 * #}

{% set suppliersForm = productForm.suppliers %}

<div class="row">
  <div class="col">
    {# {{ form_row(suppliersForm.supplier_ids) }} #}

    <div class="form-group row">
      <label class="form-control-label">{{ form_label(suppliersForm.supplier_ids) }}</label>
      <div class="col-sm">
        <div id="product_suppliers_supplier_ids">

          {% for index, choice in suppliersForm.supplier_ids.vars.choices %}
            <div class="form-check">
              <label for="product_suppliers_supplier_ids_{{ index }}">
                <input type="checkbox" id="product_suppliers_supplier_ids_{{ index }}"
                       name="product[suppliers][supplier_ids][]"
                       class="form-check-input" value="{{ choice.value }}"
                       data-label="{{ choice.label }}"
                >
                  {{ choice.label }}
              </label>
            </div>
          {% endfor %}
          {{ suppliersForm.supplier_ids.setRendered(true) }}

        </div>
      </div>
    </div>

  </div>
  <div class="col">
    {{ form_row(suppliersForm.default_supplier_id) }}
  </div>
</div>

{% for supplierReferenceForm in suppliersForm.supplier_references %}
  <div>{{ supplierReferenceForm.vars.value.supplier_name }}</div>
  <table class="table">
    <thead class="thead-default">
    <tr>
      <th>{{ 'Product name'|trans({}, 'Admin.Catalog.Feature') }}</th>
      <th>{{ 'Supplier reference'|trans({}, 'Admin.Catalog.Feature') }}</th>
      <th>{{ 'Cost price (tax excl.)'|trans({}, 'Admin.Catalog.Feature') }}</th>
      <th>{{ 'Currency'|trans({}, 'Admin.Global') }}</th>
    </tr>
    </thead>
    <tbody>
    {% for productSupplierField in supplierReferenceForm.product_suppliers_collection %}
      {% form_theme productSupplierField '@PrestaShop/Admin/Sell/Catalog/Product/Blocks/product_supplier_collection_widget.html.twig' %}

      {{ form_widget(productSupplierField) }}
    {% endfor %}
    </tbody>
  </table>
  {# setRendered(true) to avoid rendering twice #}
  {{ supplierReferenceForm.setRendered(true) }}
{% endfor %}

<div id="supplierReferences">

</div>

<script id="productSupplierPrototype" type="text/template">
  {{ form_widget(suppliersForm.supplier_references.vars.prototype.product_suppliers_collection.vars.prototype) }}
</script>

<script id="supplierReferencePrototype" type="text/template">
  {{ form_widget(suppliersForm.supplier_references.vars.prototype) }}
</script>
