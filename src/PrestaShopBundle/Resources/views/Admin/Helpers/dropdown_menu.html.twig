{% set buttonType = buttonType|default('primary') %}
{% set right = right|default(false) %}

<div class="{{ div_style|default("btn-group dropdown") }}">

  {% if default_item is defined and default_item is not empty %}
    {% set link = default_item.href %}
    <a
      href="{{ attribute(product,link) |default("#") }}"
      title="{{ default_item.title|default(default_item.label|default("")) }}"
      class="btn btn-{{ buttonType }}"
      {% if disabled is defined and disabled == true %}disabled="disabled"{% endif %}
    >
      {% if default_item.icon %}
        <i class="material-icons">{{ default_item.icon }}</i>
      {% endif %}
      {{ default_item.label|default('') }}
    </a>
  {% endif %}

  <button
    {% if button_id %}id="{{ button_id }}"{% endif %}
    class="btn btn-{{ buttonType }} dropdown-toggle"
    {% if disabled is defined and disabled == true %}disabled="disabled"{% endif %}
    data-toggle="dropdown"
  >
    {{ menu_label|default('') }}
    <i class="{{ menu_icon|default("icon-caret-down") }}"></i>
  </button>

  <div class="dropdown-menu{% if right %} dropdown-menu-right{% endif %}">
    {% for entry in items %}
      {% if entry.divider is defined and entry.divider==true %}
        <div class="dropdown-divider"></div>
      {% else %}
        {% if entry.href is defined %}
          {% set link = attribute(product,entry.href) %}
        {% else %}
          {% set link = null %}
        {% endif %}
        <a
          class="dropdown-item" href="{{ link |default("#") }}"
          {% if entry.onclick is defined %}onclick="{{ entry.onclick }}"{% endif %}
          {% if entry.target is defined %}target="{{ entry.target }}"{% endif %}
        >
          {% if entry.icon %}
            <i class="material-icons">{{ entry.icon }}</i>
          {% endif %}
          {{ entry.label|default('') }}
        </a>
      {% endif %}
    {% endfor %}
  </div>

</div>
