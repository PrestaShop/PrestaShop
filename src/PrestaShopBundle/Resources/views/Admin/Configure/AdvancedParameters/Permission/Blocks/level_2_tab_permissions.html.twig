{#**
 * 2007-2018 PrestaShop
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * https://opensource.org/licenses/OSL-3.0
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@prestashop.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade PrestaShop to newer
 * versions in the future. If you wish to customize PrestaShop for your
 * needs please refer to http://www.prestashop.com for more information.
 *
 * @author    PrestaShop SA <contact@prestashop.com>
 * @copyright 2007-2018 PrestaShop SA
 * @license   https://opensource.org/licenses/OSL-3.0 Open Software License (OSL 3.0)
 * International Registered Trademark & Property of PrestaShop SA
 *#}

{% if parentTab.children is not empty %}
  {% for childTab in parentTab.children %}
    {% if profileTabPermissions[childTab.id] is defined %}
      {% set isChild, resultPermissions, hasAllPermissions = true, 0, true %}
      <tr>
        <td>&raquo; {{ childTab.name }}</td>
        {% for permission in permissions %}
          {% set permissionId = permissionIds[permission] %}

          <td>
            {% if hasEmployeeEditPermission and employeeProfileTabPermissions[childTab.id][permission] %}
              <div class="md-checkbox md-checkbox-inline">
                <label>
                  <input type="checkbox"
                         data-id="{{ permissionId }}"
                         data-parent="{{ parentTab.id_parent }}"
                         data-type="{{ permission }}"
                         {% if profileTabPermissions[childTab.id][permission] %}checked{% endif %}
                  >
                  <i class="md-checkbox-control"></i>
                </label>
              </div>
            {% else %}
              {% set hasAllPermission = false %}
              {#@todo: disable bulk add#}
              <div class="md-checkbox md-checkbox-inline">
                <label>
                  <input type="checkbox"
                         disabled
                         {% if profileTabPermissions[childTab.id][permission] %}checked{% endif %}
                  >
                  <i class="md-checkbox-control"></i>
                </label>
              </div>
            {% endif %}
          </td>

          {% set resultPermissions = resultPermissions + profileTabPermissions[childTab.id][permission] %}
        {% endfor %}

        <td>
          <div class="md-checkbox md-checkbox-inline">
            <label>
              <input type="checkbox"
                     {% if resultPermissions == 4 %}checked{% endif %}
              >
              <i class="md-checkbox-control"></i>
            </label>
          </div>
        </td>
      </tr>
    {% endif %}

    {% include '@PrestaShop/Admin/Configure/AdvancedParameters/Permission/Blocks/level_3_tab_permissions.html.twig' with {'parentTab': childTab} %}
  {% endfor %}
{% endif %}
