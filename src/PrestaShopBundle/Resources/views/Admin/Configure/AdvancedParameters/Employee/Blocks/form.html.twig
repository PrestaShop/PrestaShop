{#**
 * 2007-2018 PrestaShop
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * https://opensource.org/licenses/OSL-3.0
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@prestashop.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade PrestaShop to newer
 * versions in the future. If you wish to customize PrestaShop for your
 * needs please refer to http://www.prestashop.com for more information.
 *
 * @author    PrestaShop SA <contact@prestashop.com>
 * @copyright 2007-2018 PrestaShop SA
 * @license   https://opensource.org/licenses/OSL-3.0 Open Software License (OSL 3.0)
 * International Registered Trademark & Property of PrestaShop SA
 *#}

{% import '@PrestaShop/Admin/macros.html.twig' as ps %}
{% trans_default_domain 'Admin.Advparameters.Feature' %}

{% block employee_addons_connect %}
  {% include '@PrestaShop/Admin/Module/Includes/modal_addons_connect.html.twig' with { 'level' : level, 'errorMessage' : errorMessage } %}
{% endblock %}

{% block employee_form %}
  {{ form_start(employeeForm) }}
  <div class="card">
    <h3 class="card-header">
      {{ 'Employees'|trans }}
    </h3>
    <div class="card-block row">
      <div class="card-text">
        {{ ps.form_group_row(employeeForm.firstname, {}, {
          'label': 'First name'|trans({}, 'Admin.Global')
        }) }}

        {{ ps.form_group_row(employeeForm.lastname, {}, {
          'label': 'Last name'|trans({}, 'Admin.Global')
        }) }}

        {{ ps.form_group_row(employeeForm.avatar, {}, {
          'label': ''
        }) }}

        <div class="form-group row">
          <label class="form-control-label"></label>
          <div class="col-sm">
            <div class="alert alert-info" role="alert">
              <p class="alert-text">
                {{ 'Your avatar in PrestaShop 1.7.x is your profile picture on %url%. To change your avatar, log in to PrestaShop.com with your email %email% and follow the on-screen instructions.'|trans({}, 'Admin.Advparameters.Help')
                    |replace({
                      '%url%': '<a href="' ~ employeeForm.avatar.vars.click_url ~ '" class="alert-link" target="_blank">PrestaShop.com</a>',
                      '%email%': employeeForm.email.vars.value
                    })|raw
                }}
              </p>
            </div>
          </div>
        </div>

        {{ ps.form_group_row(employeeForm.email, {}, {
          'label': 'Email address'|trans({}, 'Admin.Global')
        }) }}

        {% if isRestrictedAccess %}
          {% set buttonAttributes = { class: 'btn-outline-secondary' } %}

          {{ ps.form_group_row(employeeForm.change_password, {
            change_password_button: {
              label: 'Change password'|trans,
              attr: buttonAttributes,
            },
            generate_password_button: {
              label: 'Generate password'|trans,
              attr: buttonAttributes
            },
            old_password: {
              label: 'Current password'|trans,
            },
            new_password: {
              first_options: {
                label: 'New password'|trans,
              },
              second_options: {
                label: 'Confirm password'|trans,
              }
            },
            cancel_button: {
              label: 'Cancel'|trans,
              attr: buttonAttributes,
            }
          }, {
            'label': 'Password'|trans({}, 'Admin.Global'),
            'required': false,
          }) }}
        {% else %}
          {{ ps.form_group_row(employeeForm.password, {}, {
            'label': 'Password'|trans({}, 'Admin.Global')
          }) }}
        {% endif %}

        {% if isRestrictedAccess %}
          {{ ps.form_group_row(employeeForm.prestashop_addons, { attr: {
            class: 'btn-outline-secondary',
          }}, {
            'label': 'PrestaShop Addons',
          }) }}
        {% endif %}

        {{ ps.form_group_row(employeeForm.optin, {}, {
          'label': 'Subscribe to PrestaShop newsletter'|trans,
          'help': 'PrestaShop can provide you with guidance on a regular basis by sending you tips on how to optimize the management of your store which will help you grow your business. If you do not wish to receive these tips, you can disable this option.'|trans({}, 'Admin.Advparameters.Help')
        }) }}

        {{ ps.form_group_row(employeeForm.default_page, {'attr': {'data-minimumResultsForSearch': '7', 'data-toggle': 'select2'}}, {
          'label': 'Default page'|trans,
          'help': 'This page will be displayed just after login.'|trans({}, 'Admin.Advparameters.Help')
        }) }}

        {{ ps.form_group_row(employeeForm.language, {}, {
          'label': 'Language'|trans({}, 'Admin.Global')
        }) }}

        {% if not isRestrictedAccess %}
          {{ ps.form_group_row(employeeForm.active, {}, {
            'label': 'Active'|trans({}, 'Admin.Global'),
            'help': 'Allow or disallow this employee to log in to the Admin panel.'|trans({}, 'Admin.Advparameters.Help')
          }) }}

          {{ ps.form_group_row(employeeForm.profile, {}, {
            'label': 'Permission profile'|trans({}, 'Admin.Advparameters.Feature')
          }) }}

          {% if employeeForm.shop_association is defined %}
            {{ ps.form_group_row(employeeForm.shop_association, {}, {
              'label': 'Shop association'|trans({}, 'Admin.Global'),
              'help': 'Select the shops the employee is allowed to access.'|trans({}, 'Admin.Advparameters.Help')
            }) }}
          {% endif %}
        {% endif %}

        {% block employee_form_rest %}
          {{ form_rest(employeeForm) }}
        {% endblock %}
      </div>
    </div>
    <div class="card-footer">
      <a href="{{ path('admin_employees_index') }}" class="btn btn-outline-secondary">
        <i class="material-icons">cancel</i>
        {{ 'Cancel'|trans({}, 'Admin.Actions') }}
      </a>
      <button class="btn btn-primary float-right">
        <i class="material-icons">save</i>
        {{ 'Save'|trans({}, 'Admin.Actions') }}
      </button>
    </div>
  </div>
  {{ form_end(employeeForm) }}
{% endblock %}
