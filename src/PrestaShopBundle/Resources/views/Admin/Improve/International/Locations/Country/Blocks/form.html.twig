{#**
 * 2007-2019 PrestaShop and Contributors
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * https://opensource.org/licenses/OSL-3.0
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@prestashop.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade PrestaShop to newer
 * versions in the future. If you wish to customize PrestaShop for your
 * needs please refer to https://www.prestashop.com for more information.
 *
 * @author    PrestaShop SA <contact@prestashop.com>
 * @copyright 2007-2019 PrestaShop SA and Contributors
 * @license   https://opensource.org/licenses/OSL-3.0 Open Software License (OSL 3.0)
 * International Registered Trademark & Property of PrestaShop SA
 *#}

{% import '@PrestaShop/Admin/macros.html.twig' as ps %}
{% import '@PrestaShop/Admin/Improve/International/Locations/Country/Macros/address_format_macros.html.twig' as adr %}

{{ form_start(countryForm) }}
<div class="card">
  <div class="card-header">
    {{ 'Countries'|trans({}, 'Admin.Navigation.Menu') }}
  </div>

  <div class="card-block row">
    <div class="card-text">

      {{ form_errors(countryForm) }}

      <div class="form-group row">
        {{ ps.label_with_help(
          'Country'|trans({}, 'Admin.Global'),
          'Country name'|trans({}, 'Admin.International.Feature') ~ ' - ' ~ 'Invalid characters:'|trans({}, 'Admin.Global') ~ ' <>;=#{} ',
          '',
          '',
          true
        ) }}
        <div class="col-sm">
          {{ form_widget(countryForm.country) }}
          {{ form_errors(countryForm.country) }}
        </div>
      </div>

      <div class="form-group row">
        {{ ps.label_with_help(
          'ISO code'|trans({}, 'Admin.International.Feature'),
          'Two -- or three -- letter ISO code (e.g. "us" for United States).'|trans({}, 'Admin.International.Help'),
          '',
          '',
          true
        ) }}
        <div class="col-sm">
          {{ form_widget(countryForm.iso_code) }}
          {{ form_errors(countryForm.iso_code) }}
        </div>
      </div>

      <div class="form-group row">
        {{ ps.label_with_help(
          'Call prefix'|trans({}, 'Admin.International.Feature'),
          'International call prefix, (e.g. 1 for United States).'|trans({}, 'Admin.International.Help'),
          '',
          '',
          true
        ) }}
        <div class="col-sm">
          {{ form_widget(countryForm.call_prefix) }}
          {{ form_errors(countryForm.call_prefix) }}
        </div>
      </div>

      {{ ps.form_group_row(countryForm.default_currency, {}, {
        'label': 'Default currency'|trans({}, 'Admin.International.Feature')
      }) }}

      <div class="form-group row">
        {{ ps.label_with_help(
          'Zone'|trans({}, 'Admin.Global'),
          ('Geographical region.'|trans({}, 'Admin.International.Help')),
          '',
          '',
          true
        ) }}
        <div class="col-sm">
          {{ form_widget(countryForm.zone) }}
          {{ form_errors(countryForm.zone) }}
        </div>
      </div>

      {{ ps.form_group_row(countryForm.need_zip_code, {}, {
        'label': 'Does it need Zip/postal code?'|trans({}, 'Admin.International.Feature')
      }) }}

      {{ ps.form_group_row(countryForm.zip_code_format, {}, {
        'label': 'Zip/postal code format'|trans({}, 'Admin.International.Feature'),
        'help' : 'Indicate the format of the postal code: use L for a letter, N for a number, and C for the country\'s ISO 3166-1 alpha-2 code. For example, NNNNN for the United States, France, Poland and many other; LNNNNLLL for Argentina, etc. If you do not want PrestaShop to verify the postal code for this country, leave it blank.'|trans({}, 'Admin.International.Help')
      }) }}

      <div class="form-group row">
        <label class="form-control-label">
          <span class="text-danger">*</span>
          {{ 'Address format'|trans({}, 'Admin.International.Feature')}}
        </label>
        <div class="col-sm">
          {{ form_widget(countryForm.address_format, {'attr': {'style': 'min-height: 200px'}}) }}
          {{ form_errors(countryForm.address_format) }}
        </div>
        <div class="col-sm">
          {{ adr.tabNav(displayValidFields) }}
          {{ adr.tabContent(displayValidFields) }}
        </div>
      </div>

      <div class="form-group row justify-content-end">
        {{ include('@PrestaShop/Admin/Improve/International/Locations/Country/Blocks/format_actions.html.twig',
          {
            'countryForm': countryForm,
            'displayValidFields': displayValidFields,
            'addressLayout': addressLayout,
            'defaultLayout': encodingDefaultLayout,
            'encodingAddressLayout': encodingAddressLayout
          }
        ) }}
      </div>

      <div class="form-group row">
        {{ ps.label_with_help(
          'Active'|trans({}, 'Admin.Global'),
          'Display this country to your customers (the selected country will always be displayed in the Back Office).'|trans({}, 'Admin.International.Help'),
          '',
          ''
        ) }}
        <div class="col-sm">
          {{ form_widget(countryForm.is_enabled) }}
          {{ form_errors(countryForm.is_enabled) }}
        </div>
      </div>

      {{ ps.form_group_row(countryForm.contains_states, {}, {
        'label': 'Contains states'|trans({}, 'Admin.International.Feature')
      }) }}

      {{ ps.form_group_row(countryForm.need_identification_number, {}, {
        'label': 'Do you need a tax identification number?'|trans({}, 'Admin.International.Feature')
      }) }}

      {{ ps.form_group_row(countryForm.display_tax_label, {}, {
        'label': 'Display tax label (e.g. "Tax incl.")'|trans({}, 'Admin.International.Feature')
      }) }}

      {% if countryForm.shop_association is defined %}
        {{ ps.form_group_row(countryForm.shop_association, {}, {
          'label': 'Shop association'|trans({}, 'Admin.Global')
        }) }}
      {% endif %}

      {{ form_rest(countryForm) }}
    </div>
  </div>

  <div class="card-footer">
    <div class="d-inline-flex">
      <a href="{{ path('admin_countries_index') }}" class="btn btn-outline-secondary">
        {{ 'Cancel'|trans({}, 'Admin.Actions') }}
      </a>
    </div>
    <div class="d-inline-flex float-right">
      <button class="btn btn-primary">{{ 'Save'|trans({}, 'Admin.Actions') }}</button>
    </div>
  </div>
</div>
{{ form_end(countryForm) }}
