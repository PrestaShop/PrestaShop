<<<<<<< HEAD
window.order_create=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=353)}({17:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0;var n=r(20),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.EventEmitter=new o.default},20:function(e,t,r){"use strict";function n(e){console&&console.warn&&console.warn(e)}function o(){o.init.call(this)}function i(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function a(e,t,r,o){var a,s,u;if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r);if(s=e._events,void 0===s?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),u=s[t]),void 0===u)u=s[t]=r,++e._eventsCount;else if("function"==typeof u?u=s[t]=o?[r,u]:[u,r]:o?u.unshift(r):u.push(r),(a=i(e))>0&&u.length>a&&!u.warned){u.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=u.length,n(c)}return e}function s(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,v(this.listener,this.target,e))}function u(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=s.bind(n);return o.listener=r,n.wrapFn=o,o}function c(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?h(o):l(o,o.length)}function d(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function l(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function f(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function h(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}var m,p="object"==typeof Reflect?Reflect:null,v=p&&"function"==typeof p.apply?p.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};m=p&&"function"==typeof p.ownKeys?p.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var y=Number.isNaN||function(e){return e!==e};e.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var _=10;Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return _},set:function(e){if("number"!=typeof e||e<0||y(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");_=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||y(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return i(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var a=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw a.context=i,a}var s=o[e];if(void 0===s)return!1;if("function"==typeof s)v(s,this,t);else for(var u=s.length,c=l(s,u),r=0;r<u;++r)v(c[r],this,t);return!0},o.prototype.addListener=function(e,t){return a(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return a(this,e,t,!0)},o.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,u(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,u(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,n,o,i,a;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){a=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():f(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return c(this,e,!0)},o.prototype.rawListeners=function(e){return c(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},o.prototype.listenerCount=d,o.prototype.eventNames=function(){return this._eventsCount>0?m(this._events):[]}},268:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(31),s=n(a),u=r(359),c=n(u),d=r(362),l=n(d),f=r(356),h=n(f),m=r(358),p=n(m),v=r(357),y=n(v),_=r(361),b=n(_),C=r(354),g=n(C),w=r(363),k=n(w),S=r(50),R=n(S),O=r(17),j=r(355),T=n(j),E=r(65),x=n(E),P=r(360),F=n(P),I=window.$,B=function(){function e(){var t=this;return o(this,e),this.data={},this.$container=I(s.default.orderCreationContainer),this.cartProvider=new h.default,this.customerInfoProvider=new p.default,this.customerSearcher=new c.default,this.shippingRenderer=new l.default,this.cartsRenderer=new y.default,this.ordersRenderer=new b.default,this.addressesRenderer=new g.default,this.vouchersRenderer=new k.default,this.router=new R.default,this.cartEditor=new T.default,this.cartProducts=new F.default,{listenForCustomerSearch:function(){return t._handleCustomerSearch()},listenForCustomerSelect:function(){return t._handleCustomerChooseForOrderCreation()},listenForCartSelect:function(){return t._handleUseCartForOrderCreation()},listenForOrderSelect:function(){return t._handleDuplicateOrderCart()},listenForCartEdit:function(){return t._handleCartEdit()},listenForCartLoading:function(){return t._onCartLoaded()},listenForAddToCartClick:function(){return t._handleAddProductToCart()}}}return i(e,[{key:"_onCartLoaded",value:function(){var e=this;O.EventEmitter.on(x.default.cartLoaded,function(t){e.data.cart_id=t.cartId,e._renderCartInfo(t)})}},{key:"_handleCustomerSearch",value:function(){var e=this;this.$container.on("input",s.default.customerSearchInput,function(){e.customerSearcher.onCustomerSearch()})}},{key:"_handleCustomerChooseForOrderCreation",value:function(){var e=this;this.$container.on("click",s.default.chooseCustomerBtn,function(t){var r=e.customerSearcher.onCustomerChooseForOrderCreation(t);e.data.customer_id=r,e.cartProvider.loadEmptyCart(r),e._loadCustomerCarts(r),e._loadCustomerOrders(r)}),this.$container.on("click",s.default.changeCustomerBtn,function(){return e.customerSearcher.onCustomerChange()})}},{key:"_handleAddProductToCart",value:function(){var e=this;I(s.default.addToCartButton).on("click",function(){return e.cartProducts.onAddProductToCart(e.data.cart_id)})}},{key:"_handleUseCartForOrderCreation",value:function(){var e=this;this.$container.on("click",s.default.useCartBtn,function(t){var r=I(t.currentTarget).data("cart-id");e.cartProvider.getCart(r)})}},{key:"_handleDuplicateOrderCart",value:function(){var e=this;this.$container.on("click",s.default.useOrderBtn,function(t){var r=I(t.currentTarget).data("order-id");e.cartProvider.duplicateOrderCart(r)})}},{key:"_handleCartEdit",value:function(){var e=this;this.$container.on("change",s.default.addressSelect,function(){return e._changeCartAddresses()}),this.$container.on("change",s.default.deliveryOptionSelect,function(t){return e._changeDeliveryOption(t)}),this.$container.on("change",s.default.freeShippingSwitch,function(t){return e._setFreeShipping(t)})}},{key:"_loadCustomerCarts",value:function(e){var t=this;this.customerInfoProvider.getCustomerCarts(e),O.EventEmitter.on(x.default.customerCartsLoaded,function(e){t.cartsRenderer.render({carts:e.carts,currentCartId:t.data.cart_id})})}},{key:"_loadCustomerOrders",value:function(e){var t=this;this.customerInfoProvider.getCustomerOrders(e),O.EventEmitter.on(x.default.customerOrdersLoaded,function(e){t.ordersRenderer.render(e.orders)})}},{key:"_renderCartInfo",value:function(e){this.addressesRenderer.render(e.addresses),this.vouchersRenderer.render(e.cartRules),this.shippingRenderer.render(e.shipping,0===e.products.length),I(s.default.cartBlock).removeClass("d-none")}},{key:"_changeCartAddresses",value:function(){var e=this,t={delivery_address_id:I(s.default.deliveryAddressSelect).val(),invoice_address_id:I(s.default.invoiceAddressSelect).val()};this.cartEditor.changeCartAddresses(this.data.cart_id,t),O.EventEmitter.on(x.default.cartAddressesChanged,function(t){e.addressesRenderer.render(t.addresses),e.shippingRenderer.render(t.shipping,0===t.products.length)})}},{key:"_changeDeliveryOption",value:function(e){var t=this;this.cartEditor.changeDeliveryOption(this.data.cart_id,e.currentTarget.value),O.EventEmitter.on(x.default.cartDeliveryOptionChanged,function(e){t.shippingRenderer.render(e.shipping,0===e.products.length)})}},{key:"_setFreeShipping",value:function(e){var t=this;this.cartEditor.setFreeShipping(this.data.cart_id,e.currentTarget.value),O.EventEmitter.on(x.default.cartFreeShippingSet,function(e){t.shippingRenderer.render(e.shipping,0===e.products.length)})}},{key:"_persistCartInfoData",value:function(e){this.data.cart_id=e.cart.id,this.data.delivery_address_id=e.cart.id_address_delivery,this.data.invoice_address_id=e.cart.id_address_invoice}},{key:"_choosePreviousCart",value:function(e){var t=this;I.ajax(this.$container.data("cart-summary-url"),{method:"POST",data:{id_cart:e,id_customer:this.data.customer_id}}).then(function(e){t._persistCartInfoData(e),t._renderCartInfo(e)})}}]),e}();t.default=B},302:function(e,t){e.exports={base_url:"",routes:{admin_customers_search:{tokens:[["text","/sell/customers/search"]],defaults:[],requirements:[],hosttokens:[],methods:["GET"],schemes:[]},admin_customers_carts:{tokens:[["text","/carts"],["variable","/","\\d+","customerId"],["text","/sell/customers"]],defaults:[],requirements:{customerId:"\\d+"},hosttokens:[],methods:["GET"],schemes:[]},admin_customers_orders:{tokens:[["text","/orders"],["variable","/","\\d+","customerId"],["text","/sell/customers"]],defaults:[],requirements:{customerId:"\\d+"},hosttokens:[],methods:["GET"],schemes:[]},admin_carts_info:{tokens:[["text","/info"],["variable","/","\\d+","cartId"],["text","/sell/orders/carts"]],defaults:[],requirements:{cartId:"\\d+"},hosttokens:[],methods:["GET"],schemes:[]},admin_carts_create:{tokens:[["text","/sell/orders/carts/new"]],defaults:[],requirements:[],hosttokens:[],methods:["POST"],schemes:[]},admin_carts_edit_addresses:{tokens:[["text","/addresses"],["variable","/","\\d+","cartId"],["text","/sell/orders/carts"]],defaults:[],requirements:{cartId:"\\d+"},hosttokens:[],methods:["POST"],schemes:[]},admin_carts_edit_carrier:{tokens:[["text","/carrier"],["variable","/","\\d+","cartId"],["text","/sell/orders/carts"]],defaults:[],requirements:{cartId:"\\d+"},hosttokens:[],methods:["POST"],schemes:[]},admin_carts_set_free_shipping:{tokens:[["text","/rules/free-shipping"],["variable","/","\\d+","cartId"],["text","/sell/orders/carts"]],defaults:[],requirements:{cartId:"\\d+"},hosttokens:[],methods:["POST"],schemes:[]},admin_orders_duplicate_cart:{tokens:[["text","/duplicate-cart"],["variable","/","\\d+","orderId"],["text","/sell/orders/orders"]],defaults:[],requirements:{orderId:"\\d+"},hosttokens:[],methods:["POST"],schemes:[]}},prefix:"",host:"localhost",port:"",scheme:"http",locale:[]}},31:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),/**
 * 2007-2019 PrestaShop SA and Contributors
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * https://opensource.org/licenses/OSL-3.0
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@prestashop.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade PrestaShop to newer
 * versions in the future. If you wish to customize PrestaShop for your
 * needs please refer to https://www.prestashop.com for more information.
 *
 * @author    PrestaShop SA <contact@prestashop.com>
 * @copyright 2007-2019 PrestaShop SA and Contributors
 * @license   https://opensource.org/licenses/OSL-3.0 Open Software License (OSL 3.0)
 * International Registered Trademark & Property of PrestaShop SA
 */
t.default={orderCreationContainer:"#order-creation-container",customerSearchInput:"#customer-search-input",customerSearchResultsBlock:".js-customer-search-results",customerSearchResultTemplate:"#customer-search-result-template",changeCustomerBtn:".js-change-customer-btn",customerSearchRow:".js-search-customer-row",chooseCustomerBtn:".js-choose-customer-btn",notSelectedCustomerSearchResults:".js-customer-search-result:not(.border-success)",customerSearchResultName:".js-customer-name",customerSearchResultEmail:".js-customer-email",customerSearchResultId:".js-customer-id",customerSearchResultBirthday:".js-customer-birthday",customerDetailsBtn:".js-details-customer-btn",useCartBtn:".js-use-cart-btn",useOrderBtn:".js-use-order-btn",customerSearchResultColumn:".js-customer-search-result-col",customerSearchBlock:"#customer-search-block",customerCartsTable:"#customer-carts-table",customerCartsTableRowTemplate:"#customer-carts-table-row-template",customerCheckoutHistory:"#customer-checkout-history",customerOrdersTable:"#customer-orders-table",customerOrdersTableRowTemplate:"#customer-orders-table-row-template",vouchersTable:"#vouchers-table",vouchersTableRowTemplate:"#vouchers-table-row-template",cartBlock:"#cart-block",vouchersBlock:"#vouchers-block",addressesBlock:"#addresses-block",deliveryAddressDetails:"#delivery-address-details",invoiceAddressDetails:"#invoice-address-details",deliveryAddressSelect:"#delivery-address-select",invoiceAddressSelect:"#invoice-address-select",addressSelect:".js-address-select",addressesContent:"#addresses-content",addressesWarning:"#addresses-warning",summaryBlock:"#summary-block",shippingBlock:"#shipping-block",shippingForm:".js-shipping-form",noCarrierBlock:".js-no-carrier-block",deliveryOptionSelect:"#delivery-option-select",totalShippingField:".js-total-shipping",freeShippingSwitch:".js-free-shipping-switch",productSearch:"#productSearch",combinationsSelect:"#combinationsSelect",productResultBlock:"#productSearchResults",productSelect:"#productSelect",quantityInput:"#quantityInput",noRecordsFound:".js-no-records-found",noRecordsFoundRow:".js-no-records-found-row",inStockCounter:".js-in-stock-counter",combinationsTemplate:"#combinationsTemplate",combinationsRow:".js-combinations-row",productSelectRow:".js-product-select-row",customizedFieldContainer:".js-customized-field-container",quantityRow:".js-quantity-row",customizedLabelClass:".js-customized-field-label",cartProductCustomizedFieldTemplate:"#cartProductCustomizedFieldTemplate",customizedFieldInputWrapper:".js-customized-field-input-wrapper",customizedFieldInput:".js-customized-field-input",productSearchEmptyResultTemplate:"#productSearchEmptyResultTemplate",addToCartButton:"#addToCartButton",customizedFieldTypes:{0:"#cartProductCustomizedFieldInputTemplate-0",1:"#cartProductCustomizedFieldInputTemplate-1"}}},353:function(e,t,r){"use strict";var n=r(268),o=function(e){return e&&e.__esModule?e:{default:e}}(n);/**
                   * 2007-2019 PrestaShop SA and Contributors
                   *
                   * NOTICE OF LICENSE
                   *
                   * This source file is subject to the Open Software License (OSL 3.0)
                   * that is bundled with this package in the file LICENSE.txt.
                   * It is also available through the world-wide-web at this URL:
                   * https://opensource.org/licenses/OSL-3.0
                   * If you did not receive a copy of the license and are unable to
                   * obtain it through the world-wide-web, please send an email
                   * to license@prestashop.com so we can send you a copy immediately.
                   *
                   * DISCLAIMER
                   *
                   * Do not edit or add to this file if you wish to upgrade PrestaShop to newer
                   * versions in the future. If you wish to customize PrestaShop for your
                   * needs please refer to https://www.prestashop.com for more information.
                   *
                   * @author    PrestaShop SA <contact@prestashop.com>
                   * @copyright 2007-2019 PrestaShop SA and Contributors
                   * @license   https://opensource.org/licenses/OSL-3.0 Open Software License (OSL 3.0)
                   * International Registered Trademark & Property of PrestaShop SA
                   */
(0,window.$)(document).ready(function(){var e=new o.default;e.listenForCustomerSearch(),e.listenForCustomerSelect(),e.listenForCartSelect(),e.listenForOrderSelect(),e.listenForCartEdit(),e.listenForCartLoading(),e.listenForAddToCartClick()})},354:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(31),a=function(e){return e&&e.__esModule?e:{default:e}}(i),s=window.$,u=function(){function e(){n(this,e)}return o(e,[{key:"render",value:function(e){var t="",r="",n=s(a.default.deliveryAddressDetails),o=s(a.default.invoiceAddressDetails),i=s(a.default.deliveryAddressSelect),u=s(a.default.invoiceAddressSelect),c=s(a.default.addressesContent),d=s(a.default.addressesWarning);if(n.empty(),o.empty(),i.empty(),u.empty(),0===e.length)return d.removeClass("d-none"),void c.addClass("d-none");c.removeClass("d-none"),d.addClass("d-none");for(var l in Object.keys(e)){var f=e[l],h={value:f.addressId,text:f.alias},m={value:f.addressId,text:f.alias};f.delivery&&(t=f.formattedAddress,h.selected="selected"),f.invoice&&(r=f.formattedAddress,m.selected="selected"),i.append(s("<option>",h)),u.append(s("<option>",m))}t&&n.html(t),r&&o.html(r),this._showAddressesBlock()}},{key:"_showAddressesBlock",value:function(){s(a.default.addressesBlock).removeClass("d-none")}}]),e}();t.default=u},355:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(31),s=(n(a),r(50)),u=n(s),c=r(17),d=r(65),l=n(d),f=window.$,h=function(){function e(){o(this,e),this.router=new u.default}return i(e,[{key:"changeCartAddresses",value:function(e,t){f.post(this.router.generate("admin_carts_edit_addresses",{cartId:e}),t).then(function(e){c.EventEmitter.emit(l.default.cartAddressesChanged,e)})}},{key:"changeDeliveryOption",value:function(e,t){f.post(this.router.generate("admin_carts_edit_carrier",{cartId:e}),{carrier_id:t}).then(function(e){c.EventEmitter.emit(l.default.cartDeliveryOptionChanged,e)})}},{key:"setFreeShipping",value:function(e,t){f.post(this.router.generate("admin_carts_set_free_shipping",{cartId:e}),{free_shipping:t}).then(function(e){c.EventEmitter.emit(l.default.cartFreeShippingSet,e)})}}]),e}();t.default=h},356:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(31),s=n(a),u=r(50),c=n(u),d=r(17),l=r(65),f=n(l),h=window.$,m=function(){function e(){o(this,e),this.$container=h(s.default.orderCreationContainer),this.router=new c.default}return i(e,[{key:"getCart",value:function(e){h.get(this.router.generate("admin_carts_info",{cartId:e})).then(function(e){d.EventEmitter.emit(f.default.cartLoaded,e)})}},{key:"loadEmptyCart",value:function(e){h.post(this.router.generate("admin_carts_create"),{customer_id:e}).then(function(e){d.EventEmitter.emit(f.default.cartLoaded,e)})}},{key:"duplicateOrderCart",value:function(e){h.post(this.router.generate("admin_orders_duplicate_cart",{orderId:e})).then(function(e){d.EventEmitter.emit(f.default.cartLoaded,e)})}}]),e}();t.default=m},357:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(31),a=function(e){return e&&e.__esModule?e:{default:e}}(i),s=window.$,u=function(){function e(){n(this,e)}return o(e,[{key:"render",value:function(e){var t=e.carts,r=e.currentCartId,n=s(a.default.customerCartsTable),o=s(s(a.default.customerCartsTableRowTemplate).html());if(n.find("tbody").empty(),t){this._showCheckoutHistoryBlock();for(var i in t){var u=t[i];if(u.cartId!==r){var c=o.clone();c.find(".js-cart-id").text(u.cartId),c.find(".js-cart-date").text(u.creationDate),c.find(".js-cart-total").text(u.totalPrice),c.find(".js-use-cart-btn").data("cart-id",u.cartId),n.find("tbody").append(c)}}}}},{key:"_showCheckoutHistoryBlock",value:function(){s(a.default.customerCheckoutHistory).removeClass("d-none")}}]),e}();t.default=u},358:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(31),s=n(a),u=r(50),c=n(u),d=r(17),l=r(65),f=n(l),h=window.$,m=function(){function e(){o(this,e),this.$container=h(s.default.orderCreationContainer),this.router=new c.default}return i(e,[{key:"getCustomerCarts",value:function(e){h.get(this.router.generate("admin_customers_carts",{customerId:e})).then(function(e){d.EventEmitter.emit(f.default.customerCartsLoaded,e)})}},{key:"getCustomerOrders",value:function(e){h.get(this.router.generate("admin_customers_orders",{customerId:e})).then(function(e){d.EventEmitter.emit(f.default.customerOrdersLoaded,e)})}}]),e}();t.default=m},359:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(31),s=n(a),u=r(50),c=n(u),d=window.$,l=function(){function e(){var t=this;return o(this,e),this.router=new c.default,this.$container=d(s.default.customerSearchBlock),this.$searchInput=d(s.default.customerSearchInput),this.$customerSearchResultBlock=d(s.default.customerSearchResultsBlock),{onCustomerSearch:function(){t._doSearch()},onCustomerChooseForOrderCreation:function(e){return t._chooseCustomerForOrderCreation(e)},onCustomerChange:function(){t._showCustomerSearch()}}}return i(e,[{key:"_chooseCustomerForOrderCreation",value:function(e){var t=d(e.currentTarget),r=t.closest(".card");return t.addClass("d-none"),r.addClass("border-success"),r.find(s.default.changeCustomerBtn).removeClass("d-none"),this.$container.find(s.default.customerSearchRow).addClass("d-none"),this.$container.find(s.default.notSelectedCustomerSearchResults).closest(s.default.customerSearchResultColumn).remove(),t.data("customer-id")}},{key:"_doSearch",value:function(){var e=this,t=this.$searchInput.val();t.length<4||d.get(this.router.generate("admin_customers_search"),{customer_search:t}).then(function(t){if(e._clearShownCustomers(),!t.found)return void e._showNotFoundCustomers();for(var r in t.customers){var n=t.customers[r],o={id:r,first_name:n.firstname,last_name:n.lastname,email:n.email,birthday:"0000-00-00"!==n.birthday?n.birthday:" "};e._showCustomer(o)}})}},{key:"_showCustomer",value:function(e){var t=d(d(s.default.customerSearchResultTemplate).html()),r=t.clone();return r.find(s.default.customerSearchResultName).text(e.first_name+" "+e.last_name),r.find(s.default.customerSearchResultEmail).text(e.email),r.find(s.default.customerSearchResultId).text(e.id),r.find(s.default.customerSearchResultBirthday).text(e.birthday),r.find(s.default.customerDetailsBtn).data("customer-id",e.id),r.find(s.default.chooseCustomerBtn).data("customer-id",e.id),this.$customerSearchResultBlock.append(r)}},{key:"_showNotFoundCustomers",value:function(){var e=d(d("#customerSearchEmptyResultTemplate").html());this.$customerSearchResultBlock.append(e)}},{key:"_clearShownCustomers",value:function(){this.$customerSearchResultBlock.empty()}},{key:"_showCustomerSearch",value:function(){this.$container.find(s.default.customerSearchRow).removeClass("d-none")}}]),e}();t.default=l},360:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(31),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=window.$,c=function(){function e(){var t=this;return n(this,e),this.products=[],this.combinations=[],this._initEvents(),{onAddProductToCart:function(e){t._addProductToCart(e)}}}return i(e,[{key:"_initEvents",value:function(){var e=this;u(s.default.productSearch).on("input",function(t){return e._handleProductSearch(t)}),u(s.default.productSelect).on("change",function(t){return e._handleProductChange(t)}),u(s.default.productResultBlock).on("change",s.default.combinationsSelect,function(t){return e._handleCombinationChange(t)})}},{key:"_handleProductSearch",value:function(e){var t=this,r=u(e.currentTarget),n=r.val();n.length<3||u.ajax(r.data("product-search-url"),{method:"GET",data:{product_search_phrase:n}}).then(function(e){if(t.products=JSON.parse(e),0===t.products.length)return void t._showNotFoundProducts();t._renderProductSearchResult()}).catch(function(e){void 0!==e.responseJSON&&showErrorMessage(e.responseJSON.message)})}},{key:"_renderProductSearchResult",value:function(){u(s.default.productSelect).empty();var e=!0,t=!1,r=void 0;try{for(var n,i=this.products.entries()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var a=o(n.value,2),c=a[0],d=a[1];0===c&&this._fillFieldsRelatedToProduct(d);var l=d.name,f=d.combinations;null===f&&(l+=" - "+d.formatted_price);null===f&&0===c&&this._updateStock(d.stock),u(s.default.productSelect).append(u("<option></option>").attr("value",d.product_id).text(l).attr("data-index",c))}}catch(e){t=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}var h=u(s.default.noRecordsFound).find(s.default.noRecordsFoundRow);0!==h.length&&h.remove(),this._showResultBlock()}},{key:"_updateStock",value:function(e){u(s.default.inStockCounter).text(e),u(s.default.quantityInput).attr("max",e)}},{key:"_fillFieldsRelatedToProduct",value:function(e){this._fillCombinations(e.combinations),this._resolveCustomizationFields(e.customization_fields)}},{key:"_handleProductChange",value:function(e){var t=u(e.currentTarget).find(":selected").data("index"),r=this.products[t];this._fillFieldsRelatedToProduct(r),null===r.combinations&&(this.combinations=[],this._updateStock(r.stock)),this._fillCombinations(r.combinations)}},{key:"_handleCombinationChange",value:function(e){var t=u(e.currentTarget).find(":selected").val(),r=this.combinations[t];this._updateStock(r.stock)}},{key:"_fillCombinations",value:function(e){if(null===e)return void this._removeCombinationSelect();if(this.combinations=e.combinations,0===u(s.default.combinationsRow).length){var t=u(u(s.default.combinationsTemplate).html());u(s.default.productSelectRow).after(t)}var r=u(s.default.combinationsSelect);r.empty();var n=Object.entries(e.combinations),i=0,a=!0,c=!1,d=void 0;try{for(var l,f=n[Symbol.iterator]();!(a=(l=f.next()).done);a=!0){var h=o(l.value,2),m=h[0],p=h[1];0===i&&this._updateStock(p.stock);var v=p.attribute+" - "+p.formatted_price;r.append(u("<option></option>").attr("value",m).text(v)),i+=1}}catch(e){c=!0,d=e}finally{try{!a&&f.return&&f.return()}finally{if(c)throw d}}}},{key:"_resolveCustomizationFields",value:function(e){if(this._removeCustomizedFields(),null!==e){var t=u(s.default.cartProductCustomizedFieldTemplate),r=u(t.html()),n=u(s.default.productSelect).data("customization-label");r.find(s.default.customizedLabelClass).text(n),u(s.default.quantityRow).before(r),u.each(e.product_customization_fields,function(e,n){var o=u(u(s.default.customizedFieldTypes[n.type]).html());r=u(t.html()),n.required&&r.find(s.default.customizedLabelClass).append('<span class="text-danger">*</span>'),r.find(s.default.customizedLabelClass).append(n.name);var i=r.find(s.default.customizedFieldInputWrapper);i.append(o),i.find(s.default.customizedFieldInput).attr("data-customization-field-id",n.customization_field_id),u(s.default.quantityRow).before(r)})}}},{key:"_removeCombinationSelect",value:function(){u(s.default.combinationsRow).remove()}},{key:"_removeCustomizedFields",value:function(){u(s.default.customizedFieldContainer).remove()}},{key:"_showNotFoundProducts",value:function(){var e=u(u(s.default.productSearchEmptyResultTemplate).html());this._hideResultBlock();var t=u(s.default.noRecordsFound);0===t.find(s.default.noRecordsFoundRow).length&&t.append(e)}},{key:"_showResultBlock",value:function(){u(s.default.productResultBlock).show(),u(s.default.productResultBlock).removeClass("d-none")}},{key:"_hideResultBlock",value:function(){u(s.default.productResultBlock).hide()}},{key:"_addProductToCart",value:function(e){u.ajax(u(s.default.addToCartButton).data("add-product-url"),{method:"POST",data:this._getProductData(e),processData:!1,contentType:!1,cache:!1}).then(function(e){}).catch(function(e){void 0!==e.responseJSON&&showErrorMessage(e.responseJSON.message)})}},{key:"_getProductData",value:function(e){var t=new FormData;if(t.append("cart_id",e),t.append("product_id",u(s.default.productSelect).find(":selected").val()),t.append("quantity",u(s.default.quantityInput).val()),0!==u(s.default.combinationsSelect).length){var r=u(s.default.combinationsSelect).find(":selected").val();t.append("combination_id",r)}return this._resolveCustomizationValuesForAddProduct(t),t}},{key:"_resolveCustomizationValuesForAddProduct",value:function(e){var t=u(s.default.customizedFieldInput);return u.each(t,function(t,r){var n=u(r).data("customization-field-id"),o="customization["+n+"]";if("file"===u(r).attr("type"))return void e.append(o,u(r)[0].files[0]);e.append(o,u(r).val())}),e}}]),e}();t.default=c},361:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(31),a=function(e){return e&&e.__esModule?e:{default:e}}(i),s=window.$,u=function(){function e(){n(this,e)}return o(e,[{key:"render",value:function(e){var t=s(a.default.customerOrdersTable),r=s(s(a.default.customerOrdersTableRowTemplate).html());if(t.find("tbody").empty(),e){this._showCheckoutHistoryBlock();for(var n in Object.keys(e)){var o=e[n],i=r.clone();i.find(".js-order-id").text(o.orderId),i.find(".js-order-date").text(o.orderPlacedDate),i.find(".js-order-products").text(o.totalProductsCount),i.find(".js-order-total-paid").text(o.totalPaid),i.find(".js-order-status").text(o.orderStatus),i.find(".js-use-order-btn").data("order-id",o.orderId),t.find("tbody").append(i)}}}},{key:"_showCheckoutHistoryBlock",value:function(){s(a.default.customerCheckoutHistory).removeClass("d-none")}}]),e}();t.default=u},362:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(31),a=function(e){return e&&e.__esModule?e:{default:e}}(i),s=window.$,u=function(){function e(){n(this,e),this.$container=s(a.default.shippingBlock),this.$form=s(a.default.shippingForm),this.$noCarrierBlock=s(a.default.noCarrierBlock)}return o(e,[{key:"render",value:function(e,t){var r=void 0!==e&&null!==e&&0!==e.length;t?this._hideContainer():r?this._displayForm(e):this._displayNoCarriersWarning()}},{key:"_displayForm",value:function(e){this._hideNoCarrierBlock(),this._renderDeliveryOptions(e.deliveryOptions,e.selectedCarrierId),this._renderTotalShipping(e.shippingPrice),this._showForm(),this._showContainer()}},{key:"_displayNoCarriersWarning",value:function(){this._showContainer(),this._hideForm(),this._showNoCarrierBlock()}},{key:"_renderDeliveryOptions",value:function(e,t){var r=s(a.default.deliveryOptionSelect);r.empty();for(var n in Object.keys(e)){var o=e[n],i={value:o.carrierId,text:o.carrierName+" - "+o.carrierDelay};t===i.value&&(i.selected="selected"),r.append(s("<option>",i))}}},{key:"_renderTotalShipping",value:function(e){var t=s(a.default.totalShippingField);t.empty(),t.append(e)}},{key:"_showContainer",value:function(){this.$container.removeClass("d-none")}},{key:"_hideContainer",value:function(){this.$container.addClass("d-none")}},{key:"_showForm",value:function(){this.$form.removeClass("d-none")}},{key:"_hideForm",value:function(){this.$form.addClass("d-none")}},{key:"_showNoCarrierBlock",value:function(){this.$noCarrierBlock.removeClass("d-none")}},{key:"_hideNoCarrierBlock",value:function(){this.$noCarrierBlock.addClass("d-none")}}]),e}();t.default=u},363:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(31),a=function(e){return e&&e.__esModule?e:{default:e}}(i),s=window.$,u=function(){function e(){n(this,e)}return o(e,[{key:"render",value:function(e){var t=s(a.default.vouchersTable),r=s(s(a.default.vouchersTableRowTemplate).html());if(t.find("tbody").empty(),0===e.length)return void t.addClass("d-none");t.removeClass("d-none");for(var n in e){var o=e[n],i=r.clone();i.find(".js-voucher-name").text(o.name),i.find(".js-voucher-description").text(o.description),i.find(".js-voucher-value").text(o.value),i.find(".js-voucher-delete-btn").data("cart-rule-id",o.cartRuleId),t.find("tbody").append(i)}this._showVouchersBlock()}},{key:"_showVouchersBlock",value:function(){s(a.default.vouchersBlock).removeClass("d-none")}}]),e}();t.default=u},436:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=Object.assign||function(e){for(var t,r=1;r<arguments.length;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function e(){var t=this;n(this,e),this.setRoutes=function(e){t.routesRouting=e||[]},this.getRoutes=function(){return t.routesRouting},this.setBaseUrl=function(e){t.contextRouting.base_url=e},this.getBaseUrl=function(){return t.contextRouting.base_url},this.setPrefix=function(e){t.contextRouting.prefix=e},this.setScheme=function(e){t.contextRouting.scheme=e},this.getScheme=function(){return t.contextRouting.scheme},this.setHost=function(e){t.contextRouting.host=e},this.getHost=function(){return t.contextRouting.host},this.buildQueryParams=function(e,r,n){var o=new RegExp(/\[]$/);r instanceof Array?r.forEach(function(r,a){o.test(e)?n(e,r):t.buildQueryParams(e+"["+("object"===(void 0===r?"undefined":i(r))?a:"")+"]",r,n)}):"object"===(void 0===r?"undefined":i(r))?Object.keys(r).forEach(function(o){return t.buildQueryParams(e+"["+o+"]",r[o],n)}):n(e,r)},this.getRoute=function(e){var r=t.contextRouting.prefix+e;if(t.routesRouting[r])return t.routesRouting[r];if(!t.routesRouting[e])throw new Error('The route "'+e+'" does not exist.');return t.routesRouting[e]},this.generate=function(e,r,n){var i=t.getRoute(e),a=r||{},s=o({},a),u="_scheme",c="",d=!0,l="";if((i.tokens||[]).forEach(function(t){if("text"===t[0])return c=t[1]+c,void(d=!1);if("variable"!==t[0])throw new Error('The token type "'+t[0]+'" is not supported.');var r=(i.defaults||{})[t[3]];if(0==d||!r||(a||{})[t[3]]&&a[t[3]]!==i.defaults[t[3]]){var n;if((a||{})[t[3]])n=a[t[3]],delete s[t[3]];else{if(!r){if(d)return;throw new Error('The route "'+e+'" requires the parameter "'+t[3]+'".')}n=i.defaults[t[3]]}if(!(!0===n||!1===n||""===n)||!d){var o=encodeURIComponent(n).replace(/%2F/g,"/");"null"===o&&null===n&&(o=""),c=t[1]+o+c}d=!1}else r&&delete s[t[3]]}),""==c&&(c="/"),(i.hosttokens||[]).forEach(function(e){var t;return"text"===e[0]?void(l=e[1]+l):void("variable"===e[0]&&((a||{})[e[3]]?(t=a[e[3]],delete s[e[3]]):i.defaults[e[3]]&&(t=i.defaults[e[3]]),l=e[1]+t+l))}),c=t.contextRouting.base_url+c,i.requirements[u]&&t.getScheme()!==i.requirements[u]?c=i.requirements[u]+"://"+(l||t.getHost())+c:l&&t.getHost()!==l?c=t.getScheme()+"://"+l+c:!0===n&&(c=t.getScheme()+"://"+t.getHost()+c),0<Object.keys(s).length){var f=[],h=function(e,t){var r=t;r="function"==typeof r?r():r,r=null===r?"":r,f.push(encodeURIComponent(e)+"="+encodeURIComponent(r))};Object.keys(s).forEach(function(e){return t.buildQueryParams(e,s[e],h)}),c=c+"?"+f.join("&").replace(/%20/g,"+")}return c},this.setData=function(e){t.setBaseUrl(e.base_url),t.setRoutes(e.routes),"prefix"in e&&t.setPrefix(e.prefix),t.setHost(e.host),t.setScheme(e.scheme)},this.contextRouting={base_url:"",prefix:"",host:"",scheme:""}};e.exports=new a},50:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(436),s=n(a),u=r(302),c=n(u),d=window.$,l=function(){function e(){return o(this,e),s.default.setData(c.default),s.default.setBaseUrl(d(document).find("body").data("base-url")),this}return i(e,[{key:"generate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.assign(t,{_token:d(document).find("body").data("token")});return s.default.generate(e,r)}}]),e}();t.default=l},65:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),/**
=======
window.order_create=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=348)}({265:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(33),u=n(s),i=r(353),c=n(i),d=r(355),l=n(d),f=r(350),h=n(f),m=r(352),v=n(m),p=r(351),y=n(p),C=r(354),_=n(C),b=r(349),w=n(b),g=r(356),k=n(g),S=r(68),j=n(S),R=window.$,x=function(){function e(){var t=this;return o(this,e),this.data={},this.$container=R(u.default.orderCreationContainer),this.cartProvider=new h.default,this.customerInfoProvider=new v.default,this.customerSearcher=new c.default,this.shippingRenderer=new l.default,this.cartsRenderer=new y.default,this.ordersRenderer=new _.default,this.addressesRenderer=new w.default,this.vouchersRenderer=new k.default,this.router=new j.default,{listenForCustomerSearch:function(){return t._handleCustomerSearch()},listenForCustomerSelect:function(){return t._handleCustomerChooseForOrderCreation()},listenForCartSelect:function(){return t._handleUseCartForOrderCreation()},listenForOrderSelect:function(){return t._handleDuplicateOrderCart()},listenForCartUpdate:function(){return t._handleCartUpdate()}}}return a(e,[{key:"_handleCustomerSearch",value:function(){var e=this;this.$container.on("input",u.default.customerSearchInput,function(){e.customerSearcher.onCustomerSearch()})}},{key:"_handleCustomerChooseForOrderCreation",value:function(){var e=this;this.$container.on("click",u.default.chooseCustomerBtn,function(t){var r=e.customerSearcher.onCustomerChooseForOrderCreation(t);e.data.customer_id=r,e.cartProvider.loadEmptyCart(r).then(function(t){e.data.cart_id=t.cartId,e._renderCartInfo(t)}),e._loadCustomerCarts(r),e._loadCustomerOrders(r)}),this.$container.on("click",u.default.changeCustomerBtn,function(){return e.customerSearcher.onCustomerChange()})}},{key:"_handleUseCartForOrderCreation",value:function(){var e=this;this.$container.on("click",".js-use-cart-btn",function(t){var r=R(t.currentTarget).data("cart-id");e.cartProvider.getCart(r).then(function(t){e._renderCartInfo(t)})})}},{key:"_handleDuplicateOrderCart",value:function(){var e=this;this.$container.on("click",".js-use-order-btn",function(t){var r=R(t.currentTarget).data("order-id");e.cartProvider.duplicateOrderCart(r).then(function(t){e._renderCartInfo(t)})})}},{key:"_handleCartUpdate",value:function(){var e=this;this.$container.on("change",u.default.addressSelect,function(){return e._changeCartAddresses()})}},{key:"_loadCustomerCarts",value:function(e){var t=this;this.customerInfoProvider.getCustomerCarts(e).then(function(e){t.cartsRenderer.render({carts:e.carts,currentCartId:t.data.cart_id}),R(u.default.customerCheckoutHistory).removeClass("d-none")})}},{key:"_loadCustomerOrders",value:function(e){var t=this;this.customerInfoProvider.getCustomerOrders(e).then(function(e){t.ordersRenderer.render(e.orders),R(u.default.customerCheckoutHistory).removeClass("d-none")})}},{key:"_renderCartInfo",value:function(e){this.addressesRenderer.render(e.addresses),this.vouchersRenderer.render(e.cartRules),this._showCartInfo()}},{key:"_showCartInfo",value:function(){R(u.default.cartBlock).removeClass("d-none"),R(u.default.vouchersBlock).removeClass("d-none"),R(u.default.addressesBlock).removeClass("d-none")}},{key:"_changeCartAddresses",value:function(){var e=this;R.ajax(this.$container.data("edit-address-url"),{method:"POST",data:{cart_id:this.data.cart_id,delivery_address_id:R(u.default.deliveryAddressSelect).val(),invoice_address_id:R(u.default.invoiceAddressSelect).val()},dataType:"json"}).then(function(t){e.addressesRenderer.render(t.addresses)})}},{key:"_persistCartInfoData",value:function(e){this.data.cart_id=e.cart.id,this.data.delivery_address_id=e.cart.id_address_delivery,this.data.invoice_address_id=e.cart.id_address_invoice}},{key:"_choosePreviousCart",value:function(e){var t=this;R.ajax(this.$container.data("cart-summary-url"),{method:"POST",data:{id_cart:e,id_customer:this.data.customer_id},dataType:"json"}).then(function(e){t._persistCartInfoData(e),t._renderCartInfo(e)})}}]),e}();t.default=x},299:function(e,t){e.exports={base_url:"",routes:{admin_customers_carts:{tokens:[["text","/carts"],["variable","/","\\d+","customerId"],["text","/sell/customers"]],defaults:[],requirements:{customerId:"\\d+"},hosttokens:[],methods:["GET"],schemes:[]},admin_customers_orders:{tokens:[["text","/orders"],["variable","/","\\d+","customerId"],["text","/sell/customers"]],defaults:[],requirements:{customerId:"\\d+"},hosttokens:[],methods:["GET"],schemes:[]},admin_carts_info:{tokens:[["text","/info"],["variable","/","\\d+","cartId"],["text","/sell/orders/carts"]],defaults:[],requirements:{cartId:"\\d+"},hosttokens:[],methods:["GET"],schemes:[]},admin_carts_create:{tokens:[["text","/sell/orders/carts/new"]],defaults:[],requirements:[],hosttokens:[],methods:["POST"],schemes:[]},admin_carts_edit_address:{tokens:[["text","/edit-address"],["variable","/","\\d+","cartId"],["text","/sell/orders/carts"]],defaults:[],requirements:{cartId:"\\d+"},hosttokens:[],methods:["POST"],schemes:[]},admin_orders_duplicate_cart:{tokens:[["text","/duplicate-cart"],["variable","/","\\d+","orderId"],["text","/sell/orders/orders"]],defaults:[],requirements:{orderId:"\\d+"},hosttokens:[],methods:["POST"],schemes:[]}},prefix:"",host:"localhost",port:"",scheme:"http",locale:[]}},33:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),/**
>>>>>>> Rebuild assets
 * 2007-2019 PrestaShop SA and Contributors
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * https://opensource.org/licenses/OSL-3.0
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@prestashop.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade PrestaShop to newer
 * versions in the future. If you wish to customize PrestaShop for your
 * needs please refer to https://www.prestashop.com for more information.
 *
 * @author    PrestaShop SA <contact@prestashop.com>
 * @copyright 2007-2019 PrestaShop SA and Contributors
 * @license   https://opensource.org/licenses/OSL-3.0 Open Software License (OSL 3.0)
 * International Registered Trademark & Property of PrestaShop SA
 */
<<<<<<< HEAD
t.default={cartLoaded:"cartLoaded",customerCartsLoaded:"customerCartsLoaded",customerOrdersLoaded:"customerOrdersLoaded",cartAddressesChanged:"cartAddressesChanged",cartDeliveryOptionChanged:"cartDeliveryOptionChanged",cartFreeShippingSet:"cartFreeShippingSet"}}});
=======
t.default={orderCreationContainer:"#orderCreationContainer",customerSearchInput:"#customerSearchInput",customerSearchResultsBlock:".js-customer-search-results",customerSearchResultTemplate:"#customerSearchResultTemplate",changeCustomerBtn:".js-change-customer-btn",customerSearchRow:".js-search-customer-row",chooseCustomerBtn:".js-choose-customer-btn",notSelectedCustomerSearchResults:".js-customer-search-result:not(.border-success)",customerSearchResultName:".js-customer-name",customerSearchResultEmail:".js-customer-email",customerSearchResultId:".js-customer-id",customerSearchResultBirthday:".js-customer-birthday",customerDetailsBtn:".js-details-customer-btn",customerSearchResultColumn:".js-customer-search-result-col",customerSearchBlock:"#customerSearchBlock",customerCartsTable:"#customerCartsTable",customerCartsTableRowTemplate:"#customerCartsTableRowTemplate",customerCheckoutHistory:"#customerCheckoutHistory",customerOrdersTable:"#customerOrdersTable",customerOrdersTableRowTemplate:"#customerOrdersTableRowTemplate",vouchersTable:"#vouchersTable",vouchersTableRowTemplate:"#vouchersTableRowTemplate",cartBlock:"#cartBlock",vouchersBlock:"#vouchersBlock",addressesBlock:"#addressesBlock",deliveryAddressDetails:"#deliveryAddressDetails",invoiceAddressDetails:"#invoiceAddressDetails",deliveryAddressSelect:"#deliveryAddressSelect",invoiceAddressSelect:"#invoiceAddressSelect",addressSelect:".js-address-select",addressesContent:"#addressesContent",addressesWarning:"#addressesWarning",summaryBlock:"#summaryBlock",shippingBlock:"#shippingBlock"}},348:function(e,t,r){"use strict";var n=r(265),o=function(e){return e&&e.__esModule?e:{default:e}}(n);/**
                   * 2007-2019 PrestaShop SA and Contributors
                   *
                   * NOTICE OF LICENSE
                   *
                   * This source file is subject to the Open Software License (OSL 3.0)
                   * that is bundled with this package in the file LICENSE.txt.
                   * It is also available through the world-wide-web at this URL:
                   * https://opensource.org/licenses/OSL-3.0
                   * If you did not receive a copy of the license and are unable to
                   * obtain it through the world-wide-web, please send an email
                   * to license@prestashop.com so we can send you a copy immediately.
                   *
                   * DISCLAIMER
                   *
                   * Do not edit or add to this file if you wish to upgrade PrestaShop to newer
                   * versions in the future. If you wish to customize PrestaShop for your
                   * needs please refer to https://www.prestashop.com for more information.
                   *
                   * @author    PrestaShop SA <contact@prestashop.com>
                   * @copyright 2007-2019 PrestaShop SA and Contributors
                   * @license   https://opensource.org/licenses/OSL-3.0 Open Software License (OSL 3.0)
                   * International Registered Trademark & Property of PrestaShop SA
                   */
(0,window.$)(document).ready(function(){var e=new o.default;e.listenForCustomerSearch(),e.listenForCustomerSelect(),e.listenForCartSelect(),e.listenForOrderSelect(),e.listenForCartUpdate()})},349:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(33),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=window.$,i=function(){function e(){n(this,e)}return o(e,[{key:"render",value:function(e){var t="",r="",n=u(s.default.deliveryAddressDetails),o=u(s.default.invoiceAddressDetails),a=u(s.default.deliveryAddressSelect),i=u(s.default.invoiceAddressSelect),c=u(s.default.addressesContent),d=u(s.default.addressesWarning);if(n.empty(),o.empty(),a.empty(),i.empty(),0===e.length)return d.removeClass("d-none"),void c.addClass("d-none");c.removeClass("d-none"),d.addClass("d-none");for(var l in Object.keys(e)){var f=e[l],h={value:f.addressId,text:f.alias},m={value:f.addressId,text:f.alias};f.delivery&&(t=f.formattedAddress,h.selected="selected"),f.invoice&&(r=f.formattedAddress,m.selected="selected"),a.append(u("<option>",h)),i.append(u("<option>",m))}t&&u(s.default.deliveryAddressDetails).html(t),r&&u(s.default.invoiceAddressDetails).html(r)}}]),e}();t.default=i},350:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(33),u=n(s),i=r(68),c=n(i),d=window.$,l=function(){function e(){o(this,e),this.$container=d(u.default.orderCreationContainer),this.router=new c.default}return a(e,[{key:"getCart",value:function(e){return d.ajax(this.router.generate("admin_carts_info",{cartId:e}),{method:"GET"})}},{key:"loadEmptyCart",value:function(e){return d.ajax(this.router.generate("admin_carts_create"),{method:"POST",data:{customerId:e},dataType:"json"})}},{key:"duplicateOrderCart",value:function(e){return d.ajax(this.router.generate("admin_orders_duplicate_cart",{orderId:e}),{method:"POST"})}}]),e}();t.default=l},351:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(33),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=window.$,i=function(){function e(){n(this,e)}return o(e,[{key:"render",value:function(e){var t=e.carts,r=e.currentCartId,n=u(s.default.customerCartsTable),o=u(u(s.default.customerCartsTableRowTemplate).html());if(n.find("tbody").empty(),t)for(var a in t){var i=t[a];if(i.cartId!==r){var c=o.clone();c.find(".js-cart-id").text(i.cartId),c.find(".js-cart-date").text(i.creationDate),c.find(".js-cart-total").text(i.totalPrice),c.find(".js-use-cart-btn").data("cart-id",i.cartId),n.find("tbody").append(c)}}}}]),e}();t.default=i},352:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(33),u=n(s),i=r(68),c=n(i),d=window.$,l=function(){function e(){o(this,e),this.$container=d(u.default.orderCreationContainer),this.router=new c.default}return a(e,[{key:"getCustomerCarts",value:function(e){return d.ajax(this.router.generate("admin_customers_carts",{customerId:e}),{method:"GET"})}},{key:"getCustomerOrders",value:function(e){return d.ajax(this.router.generate("admin_customers_orders",{customerId:e}),{method:"GET"})}}]),e}();t.default=l},353:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(33),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=window.$,i=function(){function e(){var t=this;return n(this,e),this.$container=u(s.default.customerSearchBlock),this.$searchInput=u(s.default.customerSearchInput),this.$customerSearchResultBlock=u(s.default.customerSearchResultsBlock),{onCustomerSearch:function(){t._doSearch()},onCustomerChooseForOrderCreation:function(e){return t._chooseCustomerForOrderCreation(e)},onCustomerChange:function(){t._showCustomerSearch()}}}return o(e,[{key:"_chooseCustomerForOrderCreation",value:function(e){var t=u(e.currentTarget),r=t.closest(".card");return t.addClass("d-none"),r.addClass("border-success"),r.find(s.default.changeCustomerBtn).removeClass("d-none"),this.$container.find(s.default.customerSearchRow).addClass("d-none"),this.$container.find(s.default.notSelectedCustomerSearchResults).closest(s.default.customerSearchResultColumn).remove(),t.data("customer-id")}},{key:"_doSearch",value:function(){var e=this,t=this.$searchInput.val();t.length<4||u.ajax(this.$searchInput.data("url"),{method:"GET",data:{customer_search:t}}).then(function(t){if(e._clearShownCustomers(),!t.found)return void e._showNotFoundCustomers();for(var r in t.customers){var n=t.customers[r],o={id:r,first_name:n.firstname,last_name:n.lastname,email:n.email,birthday:"0000-00-00"!==n.birthday?n.birthday:" "};e._showCustomer(o)}})}},{key:"_showCustomer",value:function(e){var t=u(u(s.default.customerSearchResultTemplate).html()),r=t.clone();return r.find(s.default.customerSearchResultName).text(e.first_name+" "+e.last_name),r.find(s.default.customerSearchResultEmail).text(e.email),r.find(s.default.customerSearchResultId).text(e.id),r.find(s.default.customerSearchResultBirthday).text(e.birthday),r.find(s.default.customerDetailsBtn).data("customer-id",e.id),r.find(s.default.chooseCustomerBtn).data("customer-id",e.id),this.$customerSearchResultBlock.append(r)}},{key:"_showNotFoundCustomers",value:function(){var e=u(u("#customerSearchEmptyResultTemplate").html());this.$customerSearchResultBlock.append(e)}},{key:"_clearShownCustomers",value:function(){this.$customerSearchResultBlock.empty()}},{key:"_showCustomerSearch",value:function(){this.$container.find(s.default.customerSearchRow).removeClass("d-none")}}]),e}();t.default=i},354:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(33),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=window.$,i=function(){function e(){n(this,e)}return o(e,[{key:"render",value:function(e){var t=u(s.default.customerOrdersTable),r=u(u(s.default.customerOrdersTableRowTemplate).html());if(t.find("tbody").empty(),e)for(var n in Object.keys(e)){var o=e[n],a=r.clone();a.find(".js-order-id").text(o.orderId),a.find(".js-order-date").text(o.orderPlacedDate),a.find(".js-order-products").text(o.totalProductsCount),a.find(".js-order-total-paid").text(o.totalPaid),a.find(".js-order-status").text(o.orderStatus),a.find(".js-use-order-btn").data("order-id",o.orderId),t.find("tbody").append(a)}}}]),e}();t.default=i},355:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(33),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=window.$,i=function(){function e(){n(this,e),this.$container=u(s.default.shippingBlock)}return o(e,[{key:"show",value:function(){this.$container.removeClass("d-none")}},{key:"hide",value:function(){this.$container.addClass("d-none")}}]),e}();t.default=i},356:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(33),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=window.$,i=function(){function e(){n(this,e)}return o(e,[{key:"render",value:function(e){var t=u(s.default.vouchersTable),r=u(u(s.default.vouchersTableRowTemplate).html());if(t.find("tbody").empty(),0===e.length)return void t.addClass("d-none");t.removeClass("d-none");for(var n in e){var o=e[n],a=r.clone();a.find(".js-voucher-name").text(o.name),a.find(".js-voucher-description").text(o.description),a.find(".js-voucher-value").text(o.value),a.find(".js-voucher-delete-btn").data("cart-rule-id",o.cartRuleId),t.find("tbody").append(a)}}}]),e}();t.default=i},428:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=Object.assign||function(e){for(var t,r=1;r<arguments.length;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function e(){var t=this;n(this,e),this.setRoutes=function(e){t.routesRouting=e||[]},this.getRoutes=function(){return t.routesRouting},this.setBaseUrl=function(e){t.contextRouting.base_url=e},this.getBaseUrl=function(){return t.contextRouting.base_url},this.setPrefix=function(e){t.contextRouting.prefix=e},this.setScheme=function(e){t.contextRouting.scheme=e},this.getScheme=function(){return t.contextRouting.scheme},this.setHost=function(e){t.contextRouting.host=e},this.getHost=function(){return t.contextRouting.host},this.buildQueryParams=function(e,r,n){var o=new RegExp(/\[]$/);r instanceof Array?r.forEach(function(r,s){o.test(e)?n(e,r):t.buildQueryParams(e+"["+("object"===(void 0===r?"undefined":a(r))?s:"")+"]",r,n)}):"object"===(void 0===r?"undefined":a(r))?Object.keys(r).forEach(function(o){return t.buildQueryParams(e+"["+o+"]",r[o],n)}):n(e,r)},this.getRoute=function(e){var r=t.contextRouting.prefix+e;if(t.routesRouting[r])return t.routesRouting[r];if(!t.routesRouting[e])throw new Error('The route "'+e+'" does not exist.');return t.routesRouting[e]},this.generate=function(e,r,n){var a=t.getRoute(e),s=r||{},u=o({},s),i="_scheme",c="",d=!0,l="";if((a.tokens||[]).forEach(function(t){if("text"===t[0])return c=t[1]+c,void(d=!1);if("variable"!==t[0])throw new Error('The token type "'+t[0]+'" is not supported.');var r=(a.defaults||{})[t[3]];if(0==d||!r||(s||{})[t[3]]&&s[t[3]]!==a.defaults[t[3]]){var n;if((s||{})[t[3]])n=s[t[3]],delete u[t[3]];else{if(!r){if(d)return;throw new Error('The route "'+e+'" requires the parameter "'+t[3]+'".')}n=a.defaults[t[3]]}if(!(!0===n||!1===n||""===n)||!d){var o=encodeURIComponent(n).replace(/%2F/g,"/");"null"===o&&null===n&&(o=""),c=t[1]+o+c}d=!1}else r&&delete u[t[3]]}),""==c&&(c="/"),(a.hosttokens||[]).forEach(function(e){var t;return"text"===e[0]?void(l=e[1]+l):void("variable"===e[0]&&((s||{})[e[3]]?(t=s[e[3]],delete u[e[3]]):a.defaults[e[3]]&&(t=a.defaults[e[3]]),l=e[1]+t+l))}),c=t.contextRouting.base_url+c,a.requirements[i]&&t.getScheme()!==a.requirements[i]?c=a.requirements[i]+"://"+(l||t.getHost())+c:l&&t.getHost()!==l?c=t.getScheme()+"://"+l+c:!0===n&&(c=t.getScheme()+"://"+t.getHost()+c),0<Object.keys(u).length){var f=[],h=function(e,t){var r=t;r="function"==typeof r?r():r,r=null===r?"":r,f.push(encodeURIComponent(e)+"="+encodeURIComponent(r))};Object.keys(u).forEach(function(e){return t.buildQueryParams(e,u[e],h)}),c=c+"?"+f.join("&").replace(/%20/g,"+")}return c},this.setData=function(e){t.setBaseUrl(e.base_url),t.setRoutes(e.routes),"prefix"in e&&t.setPrefix(e.prefix),t.setHost(e.host),t.setScheme(e.scheme)},this.contextRouting={base_url:"",prefix:"",host:"",scheme:""}};e.exports=new s},68:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(428),u=n(s),i=r(299),c=n(i),d=window.$,l=function(){function e(){return o(this,e),u.default.setData(c.default),u.default.setBaseUrl(d(document).find("body").data("base-url")),this}return a(e,[{key:"generate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.assign(t,{_token:d(document).find("body").data("token")});return u.default.generate(e,r)}}]),e}();t.default=l}});
>>>>>>> Rebuild assets
