window.improve_design_positions=function(o){function e(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return o[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var t={};return e.m=o,e.c=t,e.i=function(o){return o},e.d=function(o,t,n){e.o(o,t)||Object.defineProperty(o,t,{configurable:!1,enumerable:!0,get:n})},e.n=function(o){var t=o&&o.__esModule?function(){return o.default}:function(){return o};return e.d(t,"a",t),t},e.o=function(o,e){return Object.prototype.hasOwnProperty.call(o,e)},e.p="",e(e.s=368)}({281:function(o,e,t){"use strict";function n(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function o(o,e){var t=[],n=!0,i=!1,l=void 0;try{for(var s,a=o[Symbol.iterator]();!(n=(s=a.next()).done)&&(t.push(s.value),!e||t.length!==e);n=!0);}catch(o){i=!0,l=o}finally{try{!n&&a.return&&a.return()}finally{if(i)throw l}}return t}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return o(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function o(o,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(o,n.key,n)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),s=window,a=s.$,r=function(){function o(){if(n(this,o),0!==a("#position-filters").length){var e=this;e.$panelSelection=a("#modules-position-selection-panel"),e.$panelSelectionSingleSelection=a("#modules-position-single-selection"),e.$panelSelectionMultipleSelection=a("#modules-position-multiple-selection"),e.$panelSelectionOriginalY=e.$panelSelection.offset().top,e.$showModules=a("#show-modules"),e.$modulesList=a(".modules-position-checkbox"),e.$hookPosition=a("#hook-position"),e.$hookSearch=a("#hook-search"),e.$modulePositionsForm=a("#module-positions-form"),e.$moduleUnhookButton=a("#unhook-button-position-bottom"),e.$moduleButtonsUpdate=a(".module-buttons-update .btn"),e.handleList(),e.handleSortable(),a('input[name="form[general][enable_tos]"]').on("change",function(){return e.handle()})}}return l(o,[{key:"handleList",value:function(){var o=this;a(window).on("scroll",function(){var e=a(window).scrollTop();o.$panelSelection.css("top",e<20?0:e-o.$panelSelectionOriginalY)}),o.$modulesList.on("change",function(){var e=o.$modulesList.filter(":checked").length;0===e?(o.$moduleUnhookButton.hide(),o.$panelSelection.hide(),o.$panelSelectionSingleSelection.hide(),o.$panelSelectionMultipleSelection.hide()):1===e?(o.$moduleUnhookButton.show(),o.$panelSelection.show(),o.$panelSelectionSingleSelection.show(),o.$panelSelectionMultipleSelection.hide()):(o.$moduleUnhookButton.show(),o.$panelSelection.show(),o.$panelSelectionSingleSelection.hide(),o.$panelSelectionMultipleSelection.show(),a("#modules-position-selection-count").html(e))}),o.$panelSelection.find("button").click(function(){a('button[name="unhookform"]').trigger("click")}),o.$hooksList=[],a("section.hook-panel .hook-name").each(function(){var e=a(this);o.$hooksList.push({title:e.html(),element:e,container:e.parents(".hook-panel")})}),o.$showModules.select2(),o.$showModules.on("change",function(){o.modulesPositionFilterHooks()}),o.$hookPosition.on("change",function(){o.modulesPositionFilterHooks()}),o.$hookSearch.on("input",function(){o.modulesPositionFilterHooks()}),o.$hookSearch.on("keypress",function(o){return 13!==(o.keyCode||o.which)}),a(".hook-checker").on("click",function(){a(".hook"+a(this).data("hook-id")).prop("checked",a(this).prop("checked"))}),o.$modulesList.on("click",function(){a("#Ghook"+a(this).data("hook-id")).prop("checked",0===a(".hook"+a(this).data("hook-id")+":not(:checked)").length)}),o.$moduleButtonsUpdate.on("click",function(){var e=a(this),t=e.closest(".module-item"),n=void 0;return n=e.data("way")?t.next(".module-item"):t.prev(".module-item"),0!==n.length&&(e.data("way")?t.insertAfter(n):t.insertBefore(n),o.updatePositions({hookId:e.data("hook-id"),moduleId:e.data("module-id"),way:e.data("way"),positions:[]},e.closest("ul")),!1)})}},{key:"handleSortable",value:function(){var o=this;a(".sortable").sortable({forcePlaceholderSize:!0,start:function(o,e){a(this).data("previous-index",e.item.index())},update:function(e,t){var n=t.item.attr("id").split("_"),l=i(n,2),s=l[0],r=l[1],c={hookId:s,moduleId:r,way:a(this).data("previous-index")<t.item.index()?1:0,positions:[]};o.updatePositions(c,a(e.target))}})}},{key:"updatePositions",value:function(o,e){var t=this;a.each(e.children(),function(e,t){o.positions.push(a(t).attr("id"))}),a.ajax({type:"POST",headers:{"cache-control":"no-cache"},url:t.$modulePositionsForm.data("update-url"),data:o,success:function(){var o=0;a.each(e.children(),function(e,t){o+=1,a(t).find(".index-position").html(o)}),window.showSuccessMessage(window.update_success_msg)}})}},{key:"modulesPositionFilterHooks",value:function(){for(var o=this,e=o.$hookSearch.val(),t=o.$showModules.val(),n=new RegExp("("+e+")","gi"),i=0;i<o.$hooksList.length;i+=1)o.$hooksList[i].container.toggle(""===e&&"all"===t),o.$hooksList[i].element.html(o.$hooksList[i].title),o.$hooksList[i].container.find(".module-item").removeClass("highlight");if(""!==e||"all"!==t){for(var l=a(),s=a(),r=void 0,c=0;c<o.$hooksList.length;c+=1)"all"!==t&&(r=o.$hooksList[c].container.find(".module-position-"+t),r.length>0&&(l=l.add(o.$hooksList[c].container),r.addClass("highlight"))),""!==e&&-1!==o.$hooksList[c].title.toLowerCase().search(e.toLowerCase())&&(s=s.add(o.$hooksList[c].container),o.$hooksList[c].element.html(o.$hooksList[c].title.replace(n,'<span class="highlight">$1</span>')));"all"===t&&""!==e?s.show():""===e&&"all"!==t?l.show():s.filter(l).show()}if(!o.$hookPosition.prop("checked"))for(var u=0;u<o.$hooksList.length;u+=1)o.$hooksList[u].container.is(".hook-position")&&o.$hooksList[u].container.hide()}}]),o}();e.default=r},368:function(o,e,t){"use strict";var n=t(281),i=function(o){return o&&o.__esModule?o:{default:o}}(n);/**
                    * 2007-2019 PrestaShop SA and Contributors
                    *
                    * NOTICE OF LICENSE
                    *
                    * This source file is subject to the Open Software License (OSL 3.0)
                    * that is bundled with this package in the file LICENSE.txt.
                    * It is also available through the world-wide-web at this URL:
                    * https://opensource.org/licenses/OSL-3.0
                    * If you did not receive a copy of the license and are unable to
                    * obtain it through the world-wide-web, please send an email
                    * to license@prestashop.com so we can send you a copy immediately.
                    *
                    * DISCLAIMER
                    *
                    * Do not edit or add to this file if you wish to upgrade PrestaShop to newer
                    * versions in the future. If you wish to customize PrestaShop for your
                    * needs please refer to https://www.prestashop.com for more information.
                    *
                    * @author    PrestaShop SA <contact@prestashop.com>
                    * @copyright 2007-2019 PrestaShop SA and Contributors
                    * @license   https://opensource.org/licenses/OSL-3.0 Open Software License (OSL 3.0)
                    * International Registered Trademark & Property of PrestaShop SA
                    */
(0,window.$)(function(){new i.default})}});