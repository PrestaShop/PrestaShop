{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///(webpack)/buildin/global.js","webpack:///./js/app/pages/module-card/index.js","webpack:///./js/components/module-card.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","g","this","Function","eval","e","window","__webpack_exports__","global","_components_module_card__WEBPACK_IMPORTED_MODULE_0__","$","ModuleCard","init","BOEvent","eventName","eventType","_event","document","createEvent","initEvent","dispatchEvent","_classCallCheck","moduleActionMenuLinkSelector","moduleActionMenuInstallLinkSelector","moduleActionMenuEnableLinkSelector","moduleActionMenuUninstallLinkSelector","moduleActionMenuDisableLinkSelector","moduleActionMenuEnableMobileLinkSelector","moduleActionMenuDisableMobileLinkSelector","moduleActionMenuResetLinkSelector","moduleActionMenuUpdateLinkSelector","moduleItemListSelector","moduleItemGridSelector","moduleItemActionsSelector","moduleActionModalDisableLinkSelector","moduleActionModalResetLinkSelector","moduleActionModalUninstallLinkSelector","forceDeletionOption","initActionButtons","self","on","btn","attr","prop","removeAttr","length","modal","_dispatchPreEvent","_confirmAction","_requestToController","target","parents","event","action","element","data","first","result","that","_replacePrestaTrustPlaceholders","find","off","install_button","attributes","form","parent","type","appendTo","click","confirmation_subject","alertClass","prestatrust","status","check_list","show","hide","url","toggle","src","img","alt","text","displayName","author","message","jQuery","Event","trigger","isPropagationStopped","isImmediatePropagationStopped","forceDeletion","jqElementObj","closest","spinnerObj","location","host","actionParams","serializeArray","push","ajax","dataType","method","beforeSend","after","done","undefined","_typeof","growl","error","moduleTechName","keys","_confirmPrestaTrust","msg","notice","alteredSelector","mainElement","fadeOut","_getModuleItemSelector","replace","remove","addClass","removeClass","replaceWith","action_menu_html","always","fadeIn"],"mappings":"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","file":"module_card.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 245);\n","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","/**\n * 2007-2018 PrestaShop\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * https://opensource.org/licenses/OSL-3.0\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@prestashop.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade PrestaShop to newer\n * versions in the future. If you wish to customize PrestaShop for your\n * needs please refer to http://www.prestashop.com for more information.\n *\n * @author    PrestaShop SA <contact@prestashop.com>\n * @copyright 2007-2018 PrestaShop SA\n * @license   https://opensource.org/licenses/OSL-3.0 Open Software License (OSL 3.0)\n * International Registered Trademark & Property of PrestaShop SA\n */\n\nimport ModuleCard from '../../../components/module-card';\n\nconst $ = global.$;\n\n$(() => {\n  new ModuleCard().init();\n});\n","/**\n * 2007-2018 PrestaShop\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * https://opensource.org/licenses/OSL-3.0\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@prestashop.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade PrestaShop to newer\n * versions in the future. If you wish to customize PrestaShop for your\n * needs please refer to http://www.prestashop.com for more information.\n *\n * @author    PrestaShop SA <contact@prestashop.com>\n * @copyright 2007-2018 PrestaShop SA\n * @license   https://opensource.org/licenses/OSL-3.0 Open Software License (OSL 3.0)\n * International Registered Trademark & Property of PrestaShop SA\n */\n\nconst $ = window.$;\n\nvar BOEvent = {\n  on: function(eventName, callback, context) {\n\n    document.addEventListener(eventName, function(event) {\n      if (typeof context !== 'undefined') {\n        callback.call(context, event);\n      } else {\n        callback(event);\n      }\n    });\n  },\n\n  emitEvent: function(eventName, eventType) {\n    var _event = document.createEvent(eventType);\n    // true values stand for: can bubble, and is cancellable\n    _event.initEvent(eventName, true, true);\n    document.dispatchEvent(_event);\n  }\n};\n\n\n/**\n * Class is responsible for handling Module Card behavior\n *\n * This is a port of admin-dev/themes/default/js/bundle/module/module_card.js\n */\nexport default class ModuleCard {\n\n  constructor() {\n    /* Selectors for module action links (uninstall, reset, etc...) to add a confirm popin */\n    this.moduleActionMenuLinkSelector = 'button.module_action_menu_';\n    this.moduleActionMenuInstallLinkSelector = 'button.module_action_menu_install';\n    this.moduleActionMenuEnableLinkSelector = 'button.module_action_menu_enable';\n    this.moduleActionMenuUninstallLinkSelector = 'button.module_action_menu_uninstall';\n    this.moduleActionMenuDisableLinkSelector = 'button.module_action_menu_disable';\n    this.moduleActionMenuEnableMobileLinkSelector = 'button.module_action_menu_enable_mobile';\n    this.moduleActionMenuDisableMobileLinkSelector = 'button.module_action_menu_disable_mobile';\n    this.moduleActionMenuResetLinkSelector = 'button.module_action_menu_reset';\n    this.moduleActionMenuUpdateLinkSelector = 'button.module_action_menu_upgrade';\n    this.moduleItemListSelector = '.module-item-list';\n    this.moduleItemGridSelector = '.module-item-grid';\n    this.moduleItemActionsSelector = '.module-actions';\n\n    /* Selectors only for modal buttons */\n    this.moduleActionModalDisableLinkSelector = 'a.module_action_modal_disable';\n    this.moduleActionModalResetLinkSelector = 'a.module_action_modal_reset';\n    this.moduleActionModalUninstallLinkSelector = 'a.module_action_modal_uninstall';\n    this.forceDeletionOption = '#force_deletion';\n\n    this.initActionButtons();\n  }\n\n  initActionButtons() {\n    const self = this;\n\n    $(document).on('click', this.forceDeletionOption, function () {\n      const btn = $(self.moduleActionModalUninstallLinkSelector, $(\"div.module-item-list[data-tech-name='\" + $(this).attr(\"data-tech-name\") + \"']\"));\n      if ($(this).prop('checked') === true) {\n        btn.attr('data-deletion', 'true');\n      } else {\n        btn.removeAttr('data-deletion');\n      }\n    });\n\n    $(document).on('click', this.moduleActionMenuInstallLinkSelector, function () {\n      if ($(\"#modal-prestatrust\").length) {\n        $(\"#modal-prestatrust\").modal('hide');\n      }\n      return self._dispatchPreEvent('install', this) && self._confirmAction('install', this) && self._requestToController('install', $(this));\n    });\n    $(document).on('click', this.moduleActionMenuEnableLinkSelector, function () {\n      return self._dispatchPreEvent('enable', this) && self._confirmAction('enable', this) && self._requestToController('enable', $(this));\n    });\n    $(document).on('click', this.moduleActionMenuUninstallLinkSelector, function () {\n      return self._dispatchPreEvent('uninstall', this) && self._confirmAction('uninstall', this) && self._requestToController('uninstall', $(this));\n    });\n    $(document).on('click', this.moduleActionMenuDisableLinkSelector, function () {\n      return self._dispatchPreEvent('disable', this) && self._confirmAction('disable', this) && self._requestToController('disable', $(this));\n    });\n    $(document).on('click', this.moduleActionMenuEnableMobileLinkSelector, function () {\n      return self._dispatchPreEvent('enable_mobile', this) && self._confirmAction('enable_mobile', this) && self._requestToController('enable_mobile', $(this));\n    });\n    $(document).on('click', this.moduleActionMenuDisableMobileLinkSelector, function () {\n      return self._dispatchPreEvent('disable_mobile', this) && self._confirmAction('disable_mobile', this) && self._requestToController('disable_mobile', $(this));\n    });\n    $(document).on('click', this.moduleActionMenuResetLinkSelector, function () {\n      return self._dispatchPreEvent('reset', this) && self._confirmAction('reset', this) && self._requestToController('reset', $(this));\n    });\n    $(document).on('click', this.moduleActionMenuUpdateLinkSelector, function () {\n      return self._dispatchPreEvent('update', this) && self._confirmAction('update', this) && self._requestToController('update', $(this));\n    });\n\n    $(document).on('click', this.moduleActionModalDisableLinkSelector, function () {\n      return self._requestToController('disable', $(self.moduleActionMenuDisableLinkSelector, $(\"div.module-item-list[data-tech-name='\" + $(this).attr(\"data-tech-name\") + \"']\")));\n    });\n    $(document).on('click', this.moduleActionModalResetLinkSelector, function () {\n      return self._requestToController('reset', $(self.moduleActionMenuResetLinkSelector, $(\"div.module-item-list[data-tech-name='\" + $(this).attr(\"data-tech-name\") + \"']\")));\n    });\n    $(document).on('click', this.moduleActionModalUninstallLinkSelector, function (e) {\n      $(e.target).parents('.modal').on('hidden.bs.modal', function(event) {\n        return self._requestToController(\n          'uninstall',\n          $(\n            self.moduleActionMenuUninstallLinkSelector,\n            $(\"div.module-item-list[data-tech-name='\" + $(e.target).attr(\"data-tech-name\") + \"']\")\n          ),\n          $(e.target).attr(\"data-deletion\")\n        );\n      }.bind(e));\n    });\n  };\n\n  _getModuleItemSelector() {\n    if ($(this.moduleItemListSelector).length) {\n      return this.moduleItemListSelector;\n    } else {\n      return this.moduleItemGridSelector;\n    }\n  };\n\n  _confirmAction(action, element) {\n    var modal = $('#' + $(element).data('confirm_modal'));\n    if (modal.length != 1) {\n      return true;\n    }\n    modal.first().modal('show');\n\n    return false; // do not allow a.href to reload the page. The confirm modal dialog will do it async if needed.\n  };\n\n  /**\n   * Update the content of a modal asking a confirmation for PrestaTrust and open it\n   *\n   * @param {array} result containing module data\n   * @return {void}\n   */\n  _confirmPrestaTrust(result) {\n    var that = this;\n    var modal = this._replacePrestaTrustPlaceholders(result);\n\n    modal.find(\".pstrust-install\").off('click').on('click', function() {\n      // Find related form, update it and submit it\n      var install_button = $(that.moduleActionMenuInstallLinkSelector, '.module-item[data-tech-name=\"' + result.module.attributes.name + '\"]');\n      var form = install_button.parent(\"form\");\n      $('<input>').attr({\n        type: 'hidden',\n        value: '1',\n        name: 'actionParams[confirmPrestaTrust]'\n      }).appendTo(form);\n\n      install_button.click();\n      modal.modal('hide');\n    });\n\n    modal.modal();\n  };\n\n  _replacePrestaTrustPlaceholders(result) {\n    var modal = $(\"#modal-prestatrust\");\n    var module = result.module.attributes;\n\n    if (result.confirmation_subject !== 'PrestaTrust' || !modal.length) {\n      return;\n    }\n\n    var alertClass = module.prestatrust.status ? 'success' : 'warning';\n\n    if (module.prestatrust.check_list.property) {\n      modal.find(\"#pstrust-btn-property-ok\").show();\n      modal.find(\"#pstrust-btn-property-nok\").hide();\n    } else {\n      modal.find(\"#pstrust-btn-property-ok\").hide();\n      modal.find(\"#pstrust-btn-property-nok\").show();\n      modal.find(\"#pstrust-buy\").attr(\"href\", module.url).toggle(module.url !== null);\n    }\n\n    modal.find(\"#pstrust-img\").attr({src: module.img, alt: module.name});\n    modal.find(\"#pstrust-name\").text(module.displayName);\n    modal.find(\"#pstrust-author\").text(module.author);\n    modal.find(\"#pstrust-label\").attr(\"class\", \"text-\" + alertClass).text(module.prestatrust.status ? 'OK' : 'KO');\n    modal.find(\"#pstrust-message\").attr(\"class\", \"alert alert-\"+alertClass);\n    modal.find(\"#pstrust-message > p\").text(module.prestatrust.message);\n\n    return modal;\n  }\n\n  _dispatchPreEvent(action, element) {\n    var event = jQuery.Event('module_card_action_event');\n\n    $(element).trigger(event, [action]);\n    if (event.isPropagationStopped() !== false || event.isImmediatePropagationStopped() !== false) {\n      return false; // if all handlers have not been called, then stop propagation of the click event.\n    }\n\n    return (event.result !== false); // explicit false must be set from handlers to stop propagation of the click event.\n  };\n\n  _requestToController(action, element, forceDeletion) {\n    var self = this;\n    var jqElementObj = element.closest(this.moduleItemActionsSelector);\n    var form = element.closest(\"form\");\n    var spinnerObj = $(\"<button class=\\\"btn-primary-reverse onclick unbind spinner \\\"></button>\");\n    var url = \"//\" + window.location.host + form.attr(\"action\");\n    var actionParams = form.serializeArray();\n\n    if (forceDeletion === \"true\" || forceDeletion === true) {\n      actionParams.push({name: \"actionParams[deletion]\", value: true});\n    }\n\n    $.ajax({\n      url: url,\n      dataType: 'json',\n      method: 'POST',\n      data: actionParams,\n      beforeSend: function () {\n        jqElementObj.hide();\n        jqElementObj.after(spinnerObj);\n      }\n    }).done(function (result) {\n      if (typeof result === undefined) {\n        $.growl.error({message: \"No answer received from server\"});\n      } else {\n        var moduleTechName = Object.keys(result)[0];\n\n        if (result[moduleTechName].status === false) {\n          if (typeof result[moduleTechName].confirmation_subject !== 'undefined') {\n            self._confirmPrestaTrust(result[moduleTechName]);\n          }\n\n          $.growl.error({message: result[moduleTechName].msg});\n        } else {\n          $.growl.notice({message: result[moduleTechName].msg});\n\n          var alteredSelector = null;\n          var mainElement = null;\n\n          if (action == \"uninstall\") {\n            jqElementObj.fadeOut(function() {\n              alteredSelector = self._getModuleItemSelector().replace('.', '');\n              mainElement = jqElementObj.parents('.' + alteredSelector).first();\n              mainElement.remove();\n            });\n\n            BOEvent.emitEvent(\"Module Uninstalled\", \"CustomEvent\");\n          } else if (action == \"disable\") {\n\n            alteredSelector = self._getModuleItemSelector().replace('.', '');\n            mainElement = jqElementObj.parents('.' + alteredSelector).first();\n            mainElement.addClass(alteredSelector + '-isNotActive');\n            mainElement.attr('data-active', '0');\n\n            BOEvent.emitEvent(\"Module Disabled\", \"CustomEvent\");\n          } else if (action == \"enable\") {\n            alteredSelector = self._getModuleItemSelector().replace('.', '');\n\n            mainElement = jqElementObj.parents('.' + alteredSelector).first();\n            mainElement.removeClass(alteredSelector + '-isNotActive');\n            mainElement.attr('data-active', '1');\n\n            BOEvent.emitEvent(\"Module Enabled\", \"CustomEvent\");\n          }\n\n          jqElementObj.replaceWith(result[moduleTechName].action_menu_html);\n        }\n      }\n    }).always(function () {\n      jqElementObj.fadeIn();\n      spinnerObj.remove();\n    });\n\n    return false;\n  };\n}\n"],"sourceRoot":""}