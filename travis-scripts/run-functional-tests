#!/bin/bash

if [[ $EXTRA_TESTS != *"functional"* ]]; then
  exit 0
fi

bash $TRAVIS_BUILD_DIR/travis-scripts/install-prestashop

echo "* Installing functional tests ...";

cd $TRAVIS_BUILD_DIR/tests/E2E && npm install

DISPLAY=:10 npm run start-selenium &> /dev/null &
sleep 5

echo "* Running functional tests ...";
npm test -- --MODULE=ps_legalcompliance
exit $?
